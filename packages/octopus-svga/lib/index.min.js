!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).OctopusSvga={})}(this,(function(t){"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function n(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function r(t){return function(){var e=this,r=arguments;return new Promise((function(i,a){var o=t.apply(e,r);function s(t){n(o,i,a,s,u,"next",t)}function u(t){n(o,i,a,s,u,"throw",t)}s(void 0)}))}}function i(t,e,n){return e=l(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,f()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g(r.key),r)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=w(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function c(t,e,n){return(e=g(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function f(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(f=function(){return!!t})()}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var u=r&&r.prototype instanceof s?r:s,c=Object.create(u.prototype);return y(c,"_invoke",function(n,r,i){var a,s,u,c=0,l=i||[],f=!1,h={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,n){return a=e,s=0,u=t,h.n=n,o}};function v(n,r){for(s=n,u=r,e=0;!f&&c&&!i&&e<l.length;e++){var i,a=l[e],v=h.p,d=a[2];n>3?(i=d===r)&&(u=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=v&&((i=n<2&&v<a[1])?(s=0,h.v=r,h.n=a[1]):v<d&&(i=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,h.n=d,s=0))}if(i||n>1)return o;throw f=!0,r}return function(i,l,d){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&v(l,d),s=l,u=d;(e=s<2?t:u)||!f;){a||(s?s<3?(s>1&&(h.n=-1),v(s,u)):h.n=u:h.v=u);try{if(c=2,a){if(s||(i="next"),e=a[i]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(u=TypeError("The iterator does not provide a '"+i+"' method"),s=1);a=t}else if((e=(f=h.n<0)?u:n.call(r,h))!==o)break}catch(e){a=t,s=1,u=e}finally{c=1}}return{value:e,done:f}}}(n,i,a),!0),c}var o={};function s(){}function u(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(y(e={},r,(function(){return this})),e),f=c.prototype=s.prototype=Object.create(l);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,y(t,i,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=c,y(f,"constructor",c),y(c,"constructor",u),u.displayName="GeneratorFunction",y(c,i,"GeneratorFunction"),y(f),y(f,i,"Generator"),y(f,r,(function(){return this})),y(f,"toString",(function(){return"[object Generator]"})),(d=function(){return{w:a,m:h}})()}function y(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}y=function(t,e,n,r){if(e)i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{function a(e,n){y(t,e,(function(t){return this._invoke(e,n,t)}))}a("next",0),a("throw",1),a("return",2)}},y(t,e,n,r)}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(t,e)||w(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==typeof e?e:e+""}function w(t,n){if(t){if("string"==typeof t)return e(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}function k(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((r=r.apply(t,e||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;var b=function(){};function x(t,e){return new Promise((function(n){return setTimeout((function(){return n(t())}),e)}))}function C(t){return T.apply(this,arguments)}function T(){return T=r(d().m((function t(e){var n,r,i,a=arguments;return d().w((function(t){for(;;)switch(t.p=t.n){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:[],r=a.length>2&&void 0!==a[2]?a[2]:0,t.p=1,t.a(2,e());case 2:if(t.p=2,i=t.v,!(r>=n.length)){t.n=3;break}throw i;case 3:return t.a(2,x((function(){return C(e,n,++r)}),n[r]))}}),t,null,[[1,2]])}))),T.apply(this,arguments)}var S=4096,P=new Uint16Array(S);function A(t,e,n){if(e<0||n>t.length)throw new RangeError("Index out of range");if(n-e<1)return"";for(var r=[],i=0,a=function(t){r.push(String.fromCharCode.apply(null,Array.from(t)))},o=!0,s=e;s<n;s++)if(t[s]>127){o=!1;break}if(o){for(var u=e;u<n;u+=S){for(var c=Math.min(u+S,n)-u,l=0;l<c;l++)P[l]=t[u+l];a(P.subarray(0,c))}return r.join("")}for(var f=e;f<n;){var h=t[f++];if(h<128)P[i++]=h,i===S&&(a(P),i=0);else{i>0&&(a(P.subarray(0,i)),i=0);var v=void 0;if(192==(224&h)&&f<n)v=(31&h)<<6|63&t[f++];else if(224==(240&h)&&f+1<n)v=(15&h)<<12|(63&t[f++])<<6|63&t[f++];else if(240==(248&h)&&f+2<n){if((v=(7&h)<<18|(63&t[f++])<<12|(63&t[f++])<<6|63&t[f++])>65535){v-=65536,P[i++]=55296+(v>>10),P[i++]=56320+(1023&v),i>=4094&&(a(P.subarray(0,i)),i=0);continue}}else for(v=65533;f<n&&128==(192&t[f]);)f++;P[i++]=v,i>=4093&&(a(P.subarray(0,i)),i=0)}}return i>0&&a(P.subarray(0,i)),r.join("")}var E={name:"getSelector",install:function(){var t=this.globals,e=t.env,n=t.br;return"h5"===e?function(t){return document.querySelector(t)}:function(t,e){var r=n.createSelectorQuery();return e&&(r=r.in(e)),r.select(t).fields({node:!0,size:!0})}}},R={name:"getCanvas",dependencies:["getSelector"],install:function(){var t=this.retry,e=this.getSelector,n=this.globals,r=n.env;n.br;var i=n.dpr,a=[50,100,100];function o(t,e,n){if(!t)throw new Error("canvas not found.");var r=t.getContext("2d");return t.width=e*i,t.height=n*i,{canvas:t,context:r}}return"h5"===r?function(n){return t((function(){var t=e("canvas[canvas-id=".concat(n.slice(1),"]"))||e(n);return o(t,null==t?void 0:t.clientWidth,null==t?void 0:t.clientHeight)}),a)}:function(n,r){return t((function(){return new Promise((function(t,i){e(n,r).exec((function(e){var n=e[0]||{},r=n.node,a=n.width,s=n.height;try{t(o(r,a,s))}catch(t){i(t)}}))}))}),a)}}},I={name:"decode",install:function(){var t=this.globals,e=t.env,n=t.br,r=function(t){return"data:".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png",";base64,").concat(t)},i={toBuffer:function(t){var e=t.buffer,n=t.byteOffset,r=t.byteLength;if(e instanceof ArrayBuffer)return e.slice(n,n+r);var i=new Uint8Array(r);return i.set(t),i.buffer},bytesToString:function(t){for(var e="",n=0;n<t.length;n+=8192){var r=t.slice(n,n+8192);e+=String.fromCharCode.apply(null,Array.from(r))}return e}};if("h5"===e){var a=new TextDecoder("utf-8",{fatal:!0});return v(v({},i),{},{toDataURL:function(t){return r(btoa(i.bytesToString(t)))},utf8:function(t,e,n){return a.decode(t.subarray(e,n))}})}return v(v({},i),{},{toDataURL:function(t){return r(n.arrayBufferToBase64(i.toBuffer(t)))},utf8:A})}},M={name:"remote",install:function(){var t=this.globals,e=t.env,n=t.br,r=function(t){return/^(blob:)?http(s)?:\/\//.test(t)};if("h5"===e)return{is:r,fetch:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return fetch(t).then((function(t){if(t.ok)return t.arrayBuffer();throw new Error("HTTP error, status=".concat(t.status,", statusText=").concat(t.statusText))}))}))};function i(t,e){return new Promise((function(r,i){n.request({url:t,dataType:"arraybuffer",responseType:"arraybuffer",enableCache:e,success:function(t){return r(t.data)},fail:i})})).catch((function(e){var n=e.errMsg||e.errorMessage||e.message;if(n.includes("ERR_CACHE_WRITE_FAILURE")||n.includes("ERR_CACHE_WRITE_FAILED"))return i(t,!1);throw e}))}return{is:r,fetch:function(t){return i(t,!0)}}}},O={name:"local",install:function(){var t=this.globals,e=t.env,n=t.br;if("h5"===e||"tt"===e)return null;var r=n.getFileSystemManager();return{exists:function(t){return new Promise((function(e){r.access({path:t,success:function(){return e(!0)},fail:function(){return e(!1)}})}))},write:function(t,e){return new Promise((function(n,i){r.writeFile({filePath:e,data:t,success:function(){return n(e)},fail:i})}))},read:function(t){return new Promise((function(e,n){r.readFile({filePath:t,success:function(t){return e(t.data)},fail:n})}))},remove:function(t){return new Promise((function(e,n){r.unlink({filePath:t,success:function(){return e(t)},fail:n})}))}}}},D={name:"image",dependencies:["local","decode"],install:function(){var t,e=this.local,n=this.decode,i=this.globals.env,a=function(t,e){return"string"==typeof t?t:n.toDataURL(t)};function o(t,e){return new Promise((function(n,r){t.onload=function(){return n(t)},t.onerror=function(){return r(new Error("SVGA LOADING FAILURE: ".concat(e)))},t.src=e}))}function s(t){t.onload=null,t.onerror=null,t.src=""}return"h5"===i?{create:function(t){return new Image},load:function(t,e,r){return e instanceof Uint8Array&&"createImageBitmap"in globalThis?createImageBitmap(new Blob([n.toBuffer(e)])):e instanceof ImageBitmap?Promise.resolve(e):o(t(),a(e,r))},release:s}:("weapp"===i&&(a=function(){var t=r(d().m((function t(r,i){return d().w((function(t){for(;;)switch(t.n){case 0:if("string"!=typeof r){t.n=1;break}return t.a(2,r);case 1:return t.a(2,e.write(n.toBuffer(r),i).catch((function(t){return console.warn("image write fail: ".concat(t.errorMessage||t.errMsg||t.message)),n.toDataURL(r)})))}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),{create:function(t){return t.createImage()},load:(t=r(d().m((function t(e,n,r){var i,s,u;return d().w((function(t){for(;;)switch(t.n){case 0:return i=o,s=e(),t.n=1,a(n,r);case 1:return u=t.v,t.a(2,i(s,u))}}),t)}))),function(e,n,r){return t.apply(this,arguments)}),release:s})}},F={name:"now",install:function(){var t=this.globals,e=t.env,n=t.br,r="h5"===e||"tt"===e?performance:n.getPerformance();return"function"==typeof(null==r?void 0:r.now)?r.now()-Date.now()>1?function(){return r.now()/1e3}:function(){return r.now()}:function(){return Date.now()}}},B={name:"getOfsCanvas",install:function(){var t,e=this.globals.env;return t="h5"===e?function(t){return new OffscreenCanvas(t.width,t.height)}:"alipay"===e?function(t){return my.createOffscreenCanvas(t)}:"tt"===e?function(t){var e=tt.createOffscreenCanvas();return e.width=t.width,e.height=t.height,e}:function(t){return wx.createOffscreenCanvas(t)},function(e){var n=e.type||"2d",r=t(v(v({},e),{},{type:n})),i=r.getContext(n);return{canvas:r,context:i}}}},U={name:"path",install:function(){var t=this.globals,e=t.env,n=t.br,r=function(t){var e=t.split(/\?#/g)[0];return e.substring(e.lastIndexOf("/")+1)};if("h5"===e||"tt"===e)return{USER_DATA_PATH:"",is:function(t){return!1},filename:r,resolve:function(t,e){return""}};var i=n.env.USER_DATA_PATH;return{USER_DATA_PATH:i,is:function(t){return null==t?void 0:t.startsWith(i)},filename:r,resolve:function(t,e){return"".concat(i,"/").concat(e?"".concat(e,"__"):"").concat(t)}}}},j={name:"rAF",install:function(){function t(){return function(t){return setTimeout(t,Math.max(0,16-Date.now()%16))}}if("h5"===this.globals.env){var e="requestAnimationFrame"in globalThis?requestAnimationFrame:t();return function(t,n){return e(n)}}return function(e,n){try{return e.requestAnimationFrame(n)}catch(e){return console.warn(e.message),t()(n)}}}},_=function(t){function e(){var t;return a(this,e),(t=i(this,e,[[E,R,B,I,M,O,D,F,U,j],"1.1.0"])).init(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(e,t),s(e,[{key:"installPlugin",value:function(t){!function(t,e){var n=e.install.call(t);Object.defineProperty(t,e.name,{get:function(){return n},enumerable:!0,configurable:!0})}(this,t)}}])}(function(){return s((function t(e,n){a(this,t),c(this,"plugins",[]),c(this,"platformVersion","0.1.2"),c(this,"version",""),c(this,"globals",{env:"unknown",br:null,dpr:1,system:"unknown"}),c(this,"noop",b),c(this,"retry",C),this.version=n||"",this.plugins=e,this.globals.env=this.autoEnv()}),[{key:"init",value:function(){var t=this.globals,e=this.plugins,n=new Map,r=[],i=new Set;t.br=this.useBridge(),t.dpr=this.usePixelRatio(),t.system=this.useSystem();var a,o=u(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;r.push(s.name),n.set(s.name,s)}}catch(t){o.e(t)}finally{o.f()}this.usePlugins(n,r,i),i.clear()}},{key:"autoEnv",value:function(){if("undefined"!=typeof window)return"h5";if("undefined"!=typeof tt)return"tt";if("undefined"!=typeof my)return"alipay";if("undefined"!=typeof wx)return"weapp";throw new Error("Unsupported platform！")}},{key:"useBridge",value:function(){switch(this.globals.env){case"alipay":return my;case"tt":return tt;case"weapp":return wx}return globalThis}},{key:"usePixelRatio",value:function(){var t=this.globals,e=t.env,n=t.br;return"h5"===e?devicePixelRatio:"getWindowInfo"in n?n.getWindowInfo().pixelRatio:"getSystemInfoSync"in n?n.getSystemInfoSync().pixelRatio:1}},{key:"useSystem",value:function(){var t;switch(this.globals.env){case"weapp":t=wx.getDeviceInfo().platform;break;case"alipay":t=my.getDeviceBaseInfo().platform;break;case"tt":t=tt.getDeviceInfoSync().platform;break;default:t="unknown"}return t.toLowerCase()}},{key:"usePlugins",value:function(t,e,n){var r,i=u(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(!t.has(a))throw new Error("Plugin ".concat(a," not found"));if(n.has(a))return;var o=t.get(a);if(Array.isArray(o.dependencies)){var s,c=u(o.dependencies);try{for(c.s();!(s=c.n()).done;){var l,f=s.value;if("function"!=typeof(null===(l=t.get(f))||void 0===l?void 0:l.install))throw new Error("Plugin ".concat(a," depends on plugin ").concat(f,", but ").concat(f," is not found"))}}catch(t){c.e(t)}finally{c.f()}this.usePlugins(t,o.dependencies,n)}this.installPlugin(o),n.add(a)}}catch(t){i.e(t)}finally{i.f()}}},{key:"switch",value:function(t){this.globals.env=t,this.init()}}])}()),L=new _,z=function(){function t(e){a(this,t),this.painter=e,this.caches=[],this.dynamicMaterials=new Map,this.materials=new Map,this.point=0}return s(t,[{key:"createImage",value:function(){var t=null;return this.point>0&&(this.point--,t=this.caches.shift()),t||(t=L.image.create(this.painter.F)),this.caches.push(t),t}},{key:"inertBitmapIntoCaches",value:function(e){t.isBitmap(e)&&this.caches.push(e)}},{key:"loadExtImage",value:function(t,e){var n=this;return L.image.load((function(){return n.createImage()}),t,L.path.resolve(e,"ext")).then((function(t){return n.inertBitmapIntoCaches(t),t}))}},{key:"loadImagesWithRecord",value:function(t,e){return k(this,arguments,void 0,(function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";return d().m((function i(){var a,o;return d().w((function(i){for(;;)switch(i.n){case 0:return a=[],o="".concat(e.replace(/\.svga$/g,""),".png"),Object.entries(t).forEach((function(t){var e=m(t,2),i=e[0],s=e[1];if(!(s instanceof Uint8Array&&s.byteLength<70)){var u=L.image.load((function(){return n.createImage()}),s,L.path.resolve(o,"dynamic"===r?"dyn_".concat(i):i)).then((function(t){n.inertBitmapIntoCaches(t),"dynamic"===r?n.dynamicMaterials.set(i,t):n.materials.set(i,t)}));a.push(u)}})),i.n=1,Promise.all(a);case 1:return i.a(2)}}),i)}))()}))}},{key:"release",value:function(){var e,n=u(this.caches);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.releaseOne(r)}}catch(t){n.e(t)}finally{n.f()}this.materials.clear(),this.dynamicMaterials.clear(),"alipay"===L.globals.env?this.cleanup():this.tidyUp()}},{key:"tidyUp",value:function(){this.caches=Array.from(new Set(this.caches)),this.point=this.caches.length}},{key:"cleanup",value:function(){this.caches.length=0,this.point=0}}],[{key:"isBitmap",value:function(t){return"h5"===L.globals.env&&t instanceof ImageBitmap}},{key:"releaseOne",value:function(e){t.isBitmap(e)?e.close():""!==e.src&&("weapp"===L.globals.env&&e.src.includes(L.path.USER_DATA_PATH)&&L.local.remove(e.src),L.image.release(e))}}])}();var H,W,V=(H=Array(4).fill(0).map((function(){return new DataView(new ArrayBuffer(8))})),W=0,function(t,e){if(e<0||e+4>t.length)throw new RangeError("Index out of range");var n=H[W];W=(W+1)%4;var r=new Uint8Array(n.buffer);return r[0]=t[e],r[1]=t[e+1],r[2]=t[e+2],r[3]=t[e+3],n.getFloat32(0,!0)});var N=function(){return s((function t(){a(this,t),this.caches=new Map,this.count=0}),[{key:"size",get:function(){return this.caches.size}},{key:"hitCount",get:function(){return this.count}},{key:"calculate",value:function(t,e){var n=t.pos,r=t.buf,i=Math.min(e,t.len);return function(t,e,n,r){for(var i=0,a=e;a<n;a+=r)i=(i<<5)-i+t[a],i|=0;return i=(i<<5)-i+n-e,(i|=0).toString(36)}(r,n,i,Math.max(1,Math.floor((i-n)/100)))}},{key:"has",value:function(t){var e=this.caches.has(t);return e&&this.count++,e}},{key:"get",value:function(t){return this.caches.get(t)}},{key:"set",value:function(t,e){this.caches.set(t,e)}},{key:"clear",value:function(){this.count=0,this.caches.clear()}}])}(),G=function(){function t(e){a(this,t),this.preflight=new N,this.buf=e,this.pos=0,this.len=e.length}return s(t,[{key:"indexOutOfRange",value:function(t,e){return new RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}},{key:"readVarint32Slow",value:function(){var t=this.buf[this.pos++],e=127&t,n=7;do{if(this.pos>=this.len)throw this.indexOutOfRange(this);e|=(127&(t=this.buf[this.pos++]))<<n,n+=7}while(t>=128&&n<32);return e>>>0}},{key:"end",value:function(t){return void 0===t?this.len:this.pos+t}},{key:"uint32",value:function(){var t=this.buf[this.pos];return t<128?(this.pos++,t):this.readVarint32Slow()}},{key:"int32",value:function(){return 0|this.uint32()}},{key:"float",value:function(){var t=this.pos+4;if(t>this.len)throw this.indexOutOfRange(this,4);var e=V(this.buf,this.pos);return this.pos=t,e}},{key:"getBytesRange",value:function(){var t=this.uint32(),e=this.pos,n=e+t;if(n>this.len)throw this.indexOutOfRange(this,t);return[e,n,t]}},{key:"bytes",value:function(){var e=m(this.getBytesRange(),3),n=e[0],r=e[1],i=e[2];return this.pos+=i,0===i?t.EMPTY_UINT8ARRAY:this.buf.subarray(n,r)}},{key:"string",value:function(){var t=m(this.getBytesRange(),2),e=t[0],n=t[1],r=L.decode.utf8(this.buf,e,n);return this.pos=n,r}},{key:"skip",value:function(t){if("number"==typeof t){if(this.pos+t>this.len)throw this.indexOutOfRange(this,t);return this.pos+=t,this}for(var e=this.buf,n=this.len,r=this.pos;r<n;){if(!(128&e[r++]))return this.pos=r,this;if(r<n&&128&e[r]&&++r<n&&128&e[r]&&++r<n&&128&e[r]){for(r++;r<n&&128&e[r];)if(++r-this.pos>=10)throw Error("invalid varint encoding");if(r<n)return this.pos=r+1,this}}throw this.indexOutOfRange(this)}},{key:"skipType",value:function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this}}])}();G.EMPTY_UINT8ARRAY=new Uint8Array(0);var Y=function(){function t(){a(this,t),this.x=0,this.y=0,this.width=0,this.height=0}return s(t,null,[{key:"decode",value:function(e,n){var r=e.preflight,i=e.end(n),a=r.calculate(e,i);if(r.has(a))return e.pos=i,r.get(a);for(var o,s=new t;e.pos<i;)switch((o=e.uint32())>>>3){case 1:s.x=e.float();break;case 2:s.y=e.float();break;case 3:s.width=e.float();break;case 4:s.height=e.float();break;default:e.skipType(7&o)}return r.set(a,t.format(s)),r.get(a)}},{key:"format",value:function(t){var e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,a=t.width,o=void 0===a?0:a,s=t.height;return{x:n,y:i,width:o,height:void 0===s?0:s}}}])}(),q=function(){function t(){a(this,t),this.a=0,this.b=0,this.c=0,this.d=0,this.tx=0,this.ty=0}return s(t,null,[{key:"decode",value:function(e,n){for(var r,i=e.end(n),a=new t;e.pos<i;)switch((r=e.uint32())>>>3){case 1:a.a=e.float();break;case 2:a.b=e.float();break;case 3:a.c=e.float();break;case 4:a.d=e.float();break;case 5:a.tx=e.float();break;case 6:a.ty=e.float();break;default:e.skipType(7&r)}return a}}])}(),K=function(){function t(){a(this,t),this.d=""}return s(t,null,[{key:"decode",value:function(e,n){var r=e.preflight,i=e.end(n),a=r.calculate(e,i);if(r.has(a))return e.pos=i,r.get(a);for(var o,s=new t;e.pos<i;)if((o=e.uint32())>>>3==1)s.d=e.string();else e.skipType(7&o);return r.set(a,s),r.get(a)}}])}(),X=function(){function t(){a(this,t),this.x=0,this.y=0,this.width=0,this.height=0,this.cornerRadius=0}return s(t,null,[{key:"decode",value:function(e,n){var r=e.preflight,i=e.end(n),a=r.calculate(e,i);if(r.has(a))return e.pos=i,r.get(a);for(var o,s=new t;e.pos<i;)switch((o=e.uint32())>>>3){case 1:s.x=e.float();break;case 2:s.y=e.float();break;case 3:s.width=e.float();break;case 4:s.height=e.float();break;case 5:s.cornerRadius=e.float();break;default:e.skipType(7&o)}return r.set(a,s),r.get(a)}}])}(),J=function(){function t(){a(this,t),this.x=0,this.y=0,this.radiusX=0,this.radiusY=0}return s(t,null,[{key:"decode",value:function(e,n){var r=e.preflight,i=e.end(n),a=r.calculate(e,i);if(r.has(a))return e.pos=i,r.get(a);for(var o,s=new t;e.pos<i;)switch((o=e.uint32())>>>3){case 1:s.x=e.float();break;case 2:s.y=e.float();break;case 3:s.radiusX=e.float();break;case 4:s.radiusY=e.float();break;default:e.skipType(7&o)}return r.set(a,s),r.get(a)}}])}(),Q=function(){function t(){a(this,t),this.r=0,this.g=0,this.b=0,this.a=0}return s(t,null,[{key:"decode",value:function(e,n){var r=e.preflight,i=e.end(n),a=r.calculate(e,i);if(r.has(a))return e.pos=i,r.get(a);for(var o,s=new t;e.pos<i;)switch((o=e.uint32())>>>3){case 1:s.r=e.float();break;case 2:s.g=e.float();break;case 3:s.b=e.float();break;case 4:s.a=e.float();break;default:e.skipType(7&o)}return r.set(a,t.format(s)),r.get(a)}},{key:"format",value:function(t){var e=t.r,n=t.g,r=t.b,i=t.a;return"rgba(".concat(255*e|0,", ").concat(255*n|0,", ").concat(255*r|0,", ").concat(1*i|0,")")}}])}(),Z=function(){function t(){a(this,t),this.fill=null,this.stroke=null,this.strokeWidth=0,this.lineCap=0,this.lineJoin=0,this.miterLimit=0,this.lineDashI=0,this.lineDashII=0,this.lineDashIII=0}return s(t,null,[{key:"decode",value:function(e,n){var r=e.preflight,i=e.end(n),a=r.calculate(e,i);if(r.has(a))return e.pos=i,r.get(a);for(var o,s=new t;e.pos<i;)switch((o=e.uint32())>>>3){case 1:s.fill=Q.decode(e,e.uint32());break;case 2:s.stroke=Q.decode(e,e.uint32());break;case 3:s.strokeWidth=e.float();break;case 4:s.lineCap=e.int32();break;case 5:s.lineJoin=e.int32();break;case 6:s.miterLimit=e.float();break;case 7:s.lineDashI=e.float();break;case 8:s.lineDashII=e.float();break;case 9:s.lineDashIII=e.float();break;default:e.skipType(7&o)}return r.set(a,t.format(s)),r.get(a)}},{key:"format",value:function(t){var e,n,r=t.fill,i=t.stroke,a=t.strokeWidth,o=t.miterLimit,s=t.lineDashI,u=t.lineDashII,c=t.lineDashIII,l=[];switch(s>0&&l.push(s),u>0&&(l.length<1&&l.push(0),l.push(u)),c>0&&(l.length<2&&l.push(0,0),l.push(c)),t.lineCap){case 0:e="butt";break;case 1:e="round";break;case 2:e="square"}switch(t.lineJoin){case 0:n="miter";break;case 1:n="round";break;case 2:n="bevel"}return{lineDash:l,fill:r||null,stroke:i||null,lineCap:e,lineJoin:n,strokeWidth:a,miterLimit:o}}}])}(),$=function(){function t(){a(this,t),this.type=0,this.shape=null,this.rect=null,this.ellipse=null,this.styles=null,this.transform=null}return s(t,null,[{key:"decode",value:function(e,n){for(var r,i=e.end(n),a=new t;e.pos<i;)switch((r=e.uint32())>>>3){case 1:a.type=e.int32();break;case 2:a.shape=K.decode(e,e.uint32());break;case 3:a.rect=X.decode(e,e.uint32());break;case 4:a.ellipse=J.decode(e,e.uint32());break;case 10:a.styles=Z.decode(e,e.uint32());break;case 11:a.transform=q.decode(e,e.uint32());break;default:e.skipType(7&r)}return t.format(a)}},{key:"format",value:function(t){var e=t.type,n=t.shape,r=t.rect,i=t.ellipse,a=t.styles,o=t.transform;switch(e){case 0:return{type:"shape",path:n,styles:a,transform:o};case 1:return{type:"rect",path:r,styles:a,transform:o};case 2:return{type:"ellipse",path:i,styles:a,transform:o}}return null}}])}(),et=function(){function t(){a(this,t),this.shapes=[],this.alpha=0,this.layout=null,this.transform=null,this.clipPath=""}return s(t,null,[{key:"decode",value:function(e,n){for(var r,i=e.end(n),a=new t;e.pos<i;)switch((r=e.uint32())>>>3){case 1:a.alpha=e.float();break;case 2:a.layout=Y.decode(e,e.uint32());break;case 3:a.transform=q.decode(e,e.uint32());break;case 4:a.clipPath=e.string();break;case 5:var o=$.decode(e,e.uint32());null!==o&&a.shapes.push(o);break;default:e.skipType(7&r)}return 0===a.shapes.length?a.shapes=e.preflight.get("latest_shapes"):e.preflight.set("latest_shapes",a.shapes),t.format(a)}},{key:"format",value:function(e){return e.alpha<.05?t.HIDDEN_FRAME:{alpha:e.alpha,layout:e.layout,transform:e.transform,shapes:e.shapes}}}])}();et.HIDDEN_FRAME={alpha:0};var nt=function(){function t(){a(this,t),this.frames=[],this.imageKey="",this.matteKey=""}return s(t,null,[{key:"decode",value:function(e,n){var r,i=e.end(n),a=new t;for(e.preflight.set("latest_shapes",[]);e.pos<i;)switch((r=e.uint32())>>>3){case 1:a.imageKey=e.string();break;case 2:a.frames&&a.frames.length||(a.frames=[]),a.frames.push(et.decode(e,e.uint32()));break;case 3:a.matteKey=e.string();break;default:e.skipType(7&r)}return t.format(a)}},{key:"format",value:function(t){return{imageKey:t.imageKey,frames:t.frames}}}])}(),rt=function(){function t(){a(this,t),this.viewBoxWidth=0,this.viewBoxHeight=0,this.fps=0,this.frames=0}return s(t,null,[{key:"decode",value:function(e,n){for(var r,i=e.end(n),a=new t;e.pos<i;)switch((r=e.uint32())>>>3){case 1:a.viewBoxWidth=e.float();break;case 2:a.viewBoxHeight=e.float();break;case 3:a.fps=e.int32();break;case 4:a.frames=e.int32();break;default:e.skipType(7&r)}return a}}])}(),it=function(){function t(){a(this,t),this.version="",this.params=null,this.images={},this.sprites=[]}return s(t,null,[{key:"decode",value:function(e,n){for(var r,i,a,o,s,u=e.end(n),c=new t;e.pos<u;)switch((o=e.uint32())>>>3){case 1:c.version=e.string();break;case 2:c.params=rt.decode(e,e.uint32());break;case 3:for(a=e.uint32()+e.pos,r="",i=t.EMPTY_U8;e.pos<a;)switch((s=e.uint32())>>>3){case 1:r=e.string();break;case 2:i=e.bytes();break;default:e.skipType(7&s)}c.images[r]=i;break;case 4:c.sprites.push(nt.decode(e,e.uint32()));break;default:e.skipType(7&o)}return t.format(c)}},{key:"format",value:function(t){var e=t.version,n=t.images,r=t.sprites,i=t.params,a=i.fps,o=i.frames;return{version:e,filename:"",locked:!1,dynamicElements:{},size:{width:i.viewBoxWidth,height:i.viewBoxHeight},fps:a,frames:o,images:n,sprites:r}}}])}();it.EMPTY_U8=new Uint8Array(0);var at=function(){return s((function t(){a(this,t),this.pool=[]}),[{key:"acquire",value:function(){var t=this.pool;return t.length>0?t.pop():{x:0,y:0,x1:0,y1:0,x2:0,y2:0}}},{key:"release",value:function(t){t.x=t.y=t.x1=t.y1=t.x2=t.y2=0,this.pool.push(t)}}])}(),ot=function(){function t(e){a(this,t),this.context=e,this.pointPool=new at,this.lastResizeKey="",this.globalTransform=void 0,this.currentPoint=this.pointPool.acquire()}return s(t,[{key:"setTransform",value:function(t){t&&this.context&&this.context.transform(t.a,t.b,t.c,t.d,t.tx,t.ty)}},{key:"drawBezier",value:function(e,n,r){var i=this.context,a=this.pointPool;if(this.currentPoint=a.acquire(),i.save(),t.resetShapeStyles(i,r),this.setTransform(n),i.beginPath(),e){var o,s=u(t.parseSVGPath(e));try{for(s.s();!(o=s.n()).done;){var c=o.value,l=c.command,f=c.args;t.SVG_PATH.has(l)&&this.drawBezierElement(this.currentPoint,l,f.split(/[\s,]+/).filter(Boolean))}}catch(t){s.e(t)}finally{s.f()}}t.fillOrStroke(i,r),a.release(this.currentPoint),i.restore()}},{key:"drawBezierElement",value:function(t,e,n){var r=this.context;switch(e){case"M":t.x=+n[0],t.y=+n[1],r.moveTo(t.x,t.y);break;case"m":t.x+=+n[0],t.y+=+n[1],r.moveTo(t.x,t.y);break;case"L":t.x=+n[0],t.y=+n[1],r.lineTo(t.x,t.y);break;case"l":t.x+=+n[0],t.y+=+n[1],r.lineTo(t.x,t.y);break;case"H":t.x=+n[0],r.lineTo(t.x,t.y);break;case"h":t.x+=+n[0],r.lineTo(t.x,t.y);break;case"V":t.y=+n[0],r.lineTo(t.x,t.y);break;case"v":t.y+=+n[0],r.lineTo(t.x,t.y);break;case"C":t.x1=+n[0],t.y1=+n[1],t.x2=+n[2],t.y2=+n[3],t.x=+n[4],t.y=+n[5],r.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y);break;case"c":t.x1=t.x+ +n[0],t.y1=t.y+ +n[1],t.x2=t.x+ +n[2],t.y2=t.y+ +n[3],t.x+=+n[4],t.y+=+n[5],r.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y);break;case"S":void 0!==t.x1&&void 0!==t.y1&&void 0!==t.x2&&void 0!==t.y2?(t.x1=t.x-t.x2+t.x,t.y1=t.y-t.y2+t.y,t.x2=+n[0],t.y2=+n[1],t.x=+n[2],t.y=+n[3],r.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y)):(t.x1=+n[0],t.y1=+n[1],t.x=+n[2],t.y=+n[3],r.quadraticCurveTo(t.x1,t.y1,t.x,t.y));break;case"s":void 0!==t.x1&&void 0!==t.y1&&void 0!==t.x2&&void 0!==t.y2?(t.x1=t.x-t.x2+t.x,t.y1=t.y-t.y2+t.y,t.x2=t.x+ +n[0],t.y2=t.y+ +n[1],t.x+=+n[2],t.y+=+n[3],r.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y)):(t.x1=t.x+ +n[0],t.y1=t.y+ +n[1],t.x+=+n[2],t.y+=+n[3],r.quadraticCurveTo(t.x1,t.y1,t.x,t.y));break;case"Q":t.x1=+n[0],t.y1=+n[1],t.x=+n[2],t.y=+n[3],r.quadraticCurveTo(t.x1,t.y1,t.x,t.y);break;case"q":t.x1=t.x+ +n[0],t.y1=t.y+ +n[1],t.x+=+n[2],t.y+=+n[3],r.quadraticCurveTo(t.x1,t.y1,t.x,t.y);break;case"Z":case"z":r.closePath()}}},{key:"drawEllipse",value:function(e,n,r,i,a,o){var s=this.context;s.save(),t.resetShapeStyles(s,o),this.setTransform(a);var u=2*r,c=2*i,l=.5522848,f=u/2*l,h=c/2*l,v=(e-=r)+u,d=(n-=i)+c,y=e+u/2,p=n+c/2;s.beginPath(),s.moveTo(e,p),s.bezierCurveTo(e,p-h,y-f,n,y,n),s.bezierCurveTo(y+f,n,v,p-h,v,p),s.bezierCurveTo(v,p+h,y+f,d,y,d),s.bezierCurveTo(y-f,d,e,p+h,e,p),t.fillOrStroke(s,o),s.restore()}},{key:"drawRect",value:function(e,n,r,i,a,o,s){var u=this.context;u.save(),t.resetShapeStyles(u,s),this.setTransform(o);var c=a;r<2*c&&(c=r/2),i<2*c&&(c=i/2),u.beginPath(),u.moveTo(e+c,n),u.arcTo(e+r,n,e+r,n+i,c),u.arcTo(e+r,n+i,e,n+i,c),u.arcTo(e,n+i,e,n,c),u.arcTo(e,n,e+r,n,c),u.closePath(),t.fillOrStroke(u,s),u.restore()}},{key:"drawShape",value:function(t){var e,n,r,i,a,o,s,u,c,l=t.type,f=t.path,h=t.transform,v=t.styles;switch(l){case"shape":this.drawBezier(f.d,h,v);break;case"ellipse":this.drawEllipse(null!==(e=f.x)&&void 0!==e?e:0,null!==(n=f.y)&&void 0!==n?n:0,null!==(r=f.radiusX)&&void 0!==r?r:0,null!==(i=f.radiusY)&&void 0!==i?i:0,h,v);break;case"rect":this.drawRect(null!==(a=f.x)&&void 0!==a?a:0,null!==(o=f.y)&&void 0!==o?o:0,null!==(s=f.width)&&void 0!==s?s:0,null!==(u=f.height)&&void 0!==u?u:0,null!==(c=f.cornerRadius)&&void 0!==c?c:0,h,v)}}},{key:"drawSprite",value:function(t,e,n){if(0!==t.alpha){var r=this.context,i=t.alpha,a=t.transform,o=t.layout,s=t.shapes,u=null!=a?a:{},c=u.a,l=void 0===c?1:c,f=u.b,h=void 0===f?0:f,v=u.c,d=void 0===v?0:v,y=u.d,p=void 0===y?1:y,m=u.tx,g=void 0===m?0:m,w=u.ty,k=void 0===w?0:w;r.save(),this.setTransform(this.globalTransform),r.globalAlpha=i,r.transform(l,h,d,p,g,k),e&&r.drawImage(e,0,0,o.width,o.height),n&&r.drawImage(n,(o.width-n.width)/2,(o.height-n.height)/2);for(var b=0;b<s.length;b++)this.drawShape(s[b]);r.restore()}}},{key:"resize",value:function(e,n,r){var i=r.width,a=r.height,o=n.width,s=n.height,u="".concat(e,"-").concat(o,"-").concat(s,"-").concat(i,"-").concat(a),c=this.globalTransform;if(this.lastResizeKey!==u||!c){var l={scaleX:1,scaleY:1,translateX:0,translateY:0};"fill"===e?(l.scaleX=i/o,l.scaleY=a/s):l=t.calculateScale(e,n,r),this.lastResizeKey=u,this.globalTransform={a:l.scaleX,b:0,c:0,d:l.scaleY,tx:l.translateX,ty:l.translateY}}}},{key:"render",value:function(t,e,n,r,i,a){for(var o,s,u,c,l=i;l<a;l++)s=(o=t.sprites[l]).imageKey,u=e.get(s),c=n.get(s),this.drawSprite(o.frames[r],u,c)}},{key:"destroy",value:function(){this.globalTransform=void 0,this.lastResizeKey="",this.context=null}}],[{key:"parseSVGPath",value:function(e){for(var n=t.SVG_LETTER_REGEXP,r=[],i=0,a=0,o="",s="";i<e.length;){var u=e[i];switch(a){case 0:n.test(u)&&(o=u,a=1);break;case 1:n.test(u)?(r.push({command:o,args:s.trim()}),o=u,s=""):s+=u}i++}return o&&1===a&&r.push({command:o,args:s.trim()}),r}},{key:"fillOrStroke",value:function(t,e){e&&(e.fill&&t.fill(),e.stroke&&t.stroke())}},{key:"resetShapeStyles",value:function(t,e){e&&(t.strokeStyle=e.stroke||"transparent",e.strokeWidth>0&&(t.lineWidth=e.strokeWidth),e.miterLimit>0&&(t.miterLimit=e.miterLimit),e.lineCap&&(t.lineCap=e.lineCap),e.lineJoin&&(t.lineJoin=e.lineJoin),t.fillStyle=e.fill||"transparent",e.lineDash&&t.setLineDash(e.lineDash))}},{key:"calculateScale",value:function(t,e,n){var r=e.width/e.height,i=n.width/n.height,a="aspect-fit"===t,o=function(t,e,n){return{scaleX:t,scaleY:t,translateX:e,translateY:n}};if(r>=i&&a||r<=i&&!a){var s=n.width/e.width;return o(s,0,(n.height-e.height*s)/2)}var u=n.height/e.height;return o(u,(n.width-e.width*u)/2,0)}}])}();ot.SVG_PATH=new Set(["M","L","H","V","Z","C","S","Q","m","l","h","v","z","c","s","q"]),ot.SVG_LETTER_REGEXP=/[a-zA-Z]/;var st=function(){return s((function t(){a(this,t),this.isRunning=!1,this.startTime=0,this.duration=0,this.loopStart=0,this.pauseTime=0,this.loopDuration=0,this.onAnimate=L.noop,this.onStart=L.noop,this.onUpdate=L.noop,this.onEnd=L.noop}),[{key:"setConfig",value:function(t,e,n,r){this.duration=t,this.loopStart=e,this.loopDuration=t*n+r-e}},{key:"start",value:function(){this.isRunning=!0,this.startTime=L.now(),this.pauseTime=0,this.onStart(),this.doFrame()}},{key:"resume",value:function(){return 0!==this.startTime&&(this.isRunning=!0,this.doFrame(),!0)}},{key:"pause",value:function(){return 0!==this.startTime&&(this.isRunning=!1,this.pauseTime=(L.now()-this.startTime)%this.duration,!0)}},{key:"stop",value:function(){this.isRunning=!1,this.startTime=0}},{key:"doFrame",value:function(){var t=this;this.isRunning&&(this.doDeltaTime(L.now()-this.startTime),this.isRunning&&this.onAnimate((function(){return t.doFrame()})))}},{key:"doDeltaTime",value:function(t){var e,n=this.duration,r=this.loopStart,i=this.pauseTime,a=!1;t>=this.loopDuration?(e=1,a=!0,this.stop()):e=(t+r+i)%n/n,this.onUpdate(e),!this.isRunning&&a&&this.onEnd()}}])}(),ut=Uint8Array,ct=Uint16Array,lt=Int32Array,ft=new ut([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ht=new ut([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),vt=new ut([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dt=function(t,e){for(var n=new ct(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new lt(n[30]),a=1;a<30;++a)for(var o=n[a];o<n[a+1];++o)i[o]=o-n[a]<<5|a;return{b:n,r:i}},yt=dt(ft,2),pt=yt.b,mt=yt.r;pt[28]=258,mt[258]=28;for(var gt=dt(ht,0),wt=gt.b,kt=gt.r,bt=new ct(32768),xt=0;xt<32768;++xt){var Ct=(43690&xt)>>1|(21845&xt)<<1;Ct=(61680&(Ct=(52428&Ct)>>2|(13107&Ct)<<2))>>4|(3855&Ct)<<4,bt[xt]=((65280&Ct)>>8|(255&Ct)<<8)>>1}for(var Tt=function(t,e,n){for(var r=t.length,i=0,a=new ct(e);i<r;++i)t[i]&&++a[t[i]-1];var o,s=new ct(e);for(i=1;i<e;++i)s[i]=s[i-1]+a[i-1]<<1;if(n){o=new ct(1<<e);var u=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],l=e-t[i],f=s[t[i]-1]++<<l,h=f|(1<<l)-1;f<=h;++f)o[bt[f]>>u]=c}else for(o=new ct(r),i=0;i<r;++i)t[i]&&(o[i]=bt[s[t[i]-1]++]>>15-t[i]);return o},St=new ut(288),Pt=0;Pt<144;++Pt)St[Pt]=8;for(var At=144;At<256;++At)St[At]=9;for(var Et=256;Et<280;++Et)St[Et]=7;for(var Rt=280;Rt<288;++Rt)St[Rt]=8;for(var It=new ut(32),Mt=0;Mt<32;++Mt)It[Mt]=5;var Ot=Tt(St,9,0),Dt=Tt(St,9,1),Ft=Tt(It,5,0),Bt=Tt(It,5,1),Ut=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},jt=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(7&e)&n},_t=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},Lt=function(t){return(t+7)/8|0},zt=function(t,e,n){return(null==n||n>t.length)&&(n=t.length),new ut(t.subarray(e,n))},Ht=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Wt=function(t,e,n){var r=new Error(e||Ht[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Wt),!n)throw r;return r},Vt=function(t,e,n){n<<=7&e;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Nt=function(t,e,n){n<<=7&e;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},Gt=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,a=n.slice();if(!i)return{t:Zt,l:0};if(1==i){var o=new ut(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort((function(t,e){return t.f-e.f})),n.push({s:-1,f:25001});var s=n[0],u=n[1],c=0,l=1,f=2;for(n[0]={s:-1,f:s.f+u.f,l:s,r:u};l!=i-1;)s=n[n[c].f<n[f].f?c++:f++],u=n[c!=l&&n[c].f<n[f].f?c++:f++],n[l++]={s:-1,f:s.f+u.f,l:s,r:u};for(var h=a[0].s,v=1;v<i;++v)a[v].s>h&&(h=a[v].s);var d=new ct(h+1),y=Yt(n[l-1],d,0);if(y>e){var p=0,m=0,g=y-e,w=1<<g;for(a.sort((function(t,e){return d[e.s]-d[t.s]||t.f-e.f}));p<i;++p){var k=a[p].s;if(!(d[k]>e))break;m+=w-(1<<y-d[k]),d[k]=e}for(m>>=g;m>0;){var b=a[p].s;d[b]<e?m-=1<<e-d[b]++-1:++p}for(;p>=0&&m;--p){var x=a[p].s;d[x]==e&&(--d[x],++m)}y=e}return{t:new ut(d),l:y}},Yt=function(t,e,n){return-1==t.s?Math.max(Yt(t.l,e,n+1),Yt(t.r,e,n+1)):e[t.s]=n},qt=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new ct(++e),r=0,i=t[0],a=1,o=function(t){n[r++]=t},s=1;s<=e;++s)if(t[s]==i&&s!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=t[s]}return{c:n.subarray(0,r),n:e}},Kt=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Xt=function(t,e,n){var r=n.length,i=Lt(e+2);t[i]=255&r,t[i+1]=r>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<r;++a)t[i+a+4]=n[a];return 8*(i+4+r)},Jt=function(t,e,n,r,i,a,o,s,u,c,l){Vt(e,l++,n),++i[256];for(var f=Gt(i,15),h=f.t,v=f.l,d=Gt(a,15),y=d.t,p=d.l,m=qt(h),g=m.c,w=m.n,k=qt(y),b=k.c,x=k.n,C=new ct(19),T=0;T<g.length;++T)++C[31&g[T]];for(var S=0;S<b.length;++S)++C[31&b[S]];for(var P=Gt(C,7),A=P.t,E=P.l,R=19;R>4&&!A[vt[R-1]];--R);var I,M,O,D,F=c+5<<3,B=Kt(i,St)+Kt(a,It)+o,U=Kt(i,h)+Kt(a,y)+o+14+3*R+Kt(C,A)+2*C[16]+3*C[17]+7*C[18];if(u>=0&&F<=B&&F<=U)return Xt(e,l,t.subarray(u,u+c));if(Vt(e,l,1+(U<B)),l+=2,U<B){I=Tt(h,v,0),M=h,O=Tt(y,p,0),D=y;var j=Tt(A,E,0);Vt(e,l,w-257),Vt(e,l+5,x-1),Vt(e,l+10,R-4),l+=14;for(var _=0;_<R;++_)Vt(e,l+3*_,A[vt[_]]);l+=3*R;for(var L=[g,b],z=0;z<2;++z)for(var H=L[z],W=0;W<H.length;++W){var V=31&H[W];Vt(e,l,j[V]),l+=A[V],V>15&&(Vt(e,l,H[W]>>5&127),l+=H[W]>>12)}}else I=Ot,M=St,O=Ft,D=It;for(var N=0;N<s;++N){var G=r[N];if(G>255){var Y=G>>18&31;Nt(e,l,I[Y+257]),l+=M[Y+257],Y>7&&(Vt(e,l,G>>23&31),l+=ft[Y]);var q=31&G;Nt(e,l,O[q]),l+=D[q],q>3&&(Nt(e,l,G>>5&8191),l+=ht[q])}else Nt(e,l,I[G]),l+=M[G]}return Nt(e,l,I[256]),l+M[256]},Qt=new lt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Zt=new ut(0),$t=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,a=0|n.length,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)i+=r+=n[o];r=(65535&r)+15*(r>>16),i=(65535&i)+15*(i>>16)}t=r,e=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(e%=65521))<<8|e>>8}}},te=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),o=new ut(a.length+t.length);o.set(a),o.set(t,a.length),t=o,i.w=a.length}return function(t,e,n,r,i,a){var o=a.z||t.length,s=new ut(r+o+5*(1+Math.ceil(o/7e3))+i),u=s.subarray(r,s.length-i),c=a.l,l=7&(a.r||0);if(e){l&&(u[0]=a.r>>3);for(var f=Qt[e-1],h=f>>13,v=8191&f,d=(1<<n)-1,y=a.p||new ct(32768),p=a.h||new ct(d+1),m=Math.ceil(n/3),g=2*m,w=function(e){return(t[e]^t[e+1]<<m^t[e+2]<<g)&d},k=new lt(25e3),b=new ct(288),x=new ct(32),C=0,T=0,S=a.i||0,P=0,A=a.w||0,E=0;S+2<o;++S){var R=w(S),I=32767&S,M=p[R];if(y[I]=M,p[R]=I,A<=S){var O=o-S;if((C>7e3||P>24576)&&(O>423||!c)){l=Jt(t,u,0,k,b,x,T,P,E,S-E,l),P=C=T=0,E=S;for(var D=0;D<286;++D)b[D]=0;for(var F=0;F<30;++F)x[F]=0}var B=2,U=0,j=v,_=I-M&32767;if(O>2&&R==w(S-_))for(var L=Math.min(h,O)-1,z=Math.min(32767,S),H=Math.min(258,O);_<=z&&--j&&I!=M;){if(t[S+B]==t[S+B-_]){for(var W=0;W<H&&t[S+W]==t[S+W-_];++W);if(W>B){if(B=W,U=_,W>L)break;for(var V=Math.min(_,W-2),N=0,G=0;G<V;++G){var Y=S-_+G&32767,q=Y-y[Y]&32767;q>N&&(N=q,M=Y)}}}_+=(I=M)-(M=y[I])&32767}if(U){k[P++]=268435456|mt[B]<<18|kt[U];var K=31&mt[B],X=31&kt[U];T+=ft[K]+ht[X],++b[257+K],++x[X],A=S+B,++C}else k[P++]=t[S],++b[t[S]]}}for(S=Math.max(S,A);S<o;++S)k[P++]=t[S],++b[t[S]];l=Jt(t,u,c,k,b,x,T,P,E,S-E,l),c||(a.r=7&l|u[l/8|0]<<3,l-=7,a.h=p,a.p=y,a.i=S,a.w=A)}else{for(var J=a.w||0;J<o+c;J+=65535){var Q=J+65535;Q>=o&&(u[l/8|0]=c,Q=o),l=Xt(u,l+1,t.subarray(J,Q))}a.i=o}return zt(s,0,r+Lt(l)+i)}(t,null==e.level?6:e.level,null==e.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):20:12+e.mem,n,r,i)},ee=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8};function ne(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=$t();n.p(t);var r=te(t,e,e.dictionary?6:2,4);return function(t,e){var n,r,i=null!==(n=e.level)&&void 0!==n?n:0,a=0==i?0:i<6?1:9==i?3:2;if(t[0]=120,t[1]=a<<6|((null!==(r=e.dictionary)&&void 0!==r?r:0)&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var o=$t();o.p(e.dictionary),ee(t,2,o.d())}}(r,e),ee(r,r.length-4,n.d()),r}function re(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e,n,r){var i=t.length,a=r?r.length:0;if(!i||e.f&&!e.l)return n||new ut(0);var o=!n,s=o||2!=e.i,u=e.i;o&&(n=new ut(3*i));var c=function(t){var e=n.length;if(t>e){var r=new ut(Math.max(2*e,t));r.set(n),n=r}},l=e.f||0,f=e.p||0,h=e.b||0,v=e.l,d=e.d,y=e.m,p=e.n,m=8*i;do{if(!v){l=jt(t,f,1);var g=jt(t,f+1,3);if(f+=3,!g){var w=Lt(f)+4,k=t[w-4]|t[w-3]<<8,b=w+k;if(b>i){u&&Wt(0);break}s&&c(h+k),n.set(t.subarray(w,b),h),e.b=h+=k,e.p=f=8*b,e.f=l;continue}if(1==g)v=Dt,d=Bt,y=9,p=5;else if(2==g){var x=jt(t,f,31)+257,C=jt(t,f+10,15)+4,T=x+jt(t,f+5,31)+1;f+=14;for(var S=new ut(T),P=new ut(19),A=0;A<C;++A)P[vt[A]]=jt(t,f+3*A,7);f+=3*C;for(var E=Ut(P),R=(1<<E)-1,I=Tt(P,E,1),M=0;M<T;){var O=I[jt(t,f,R)];f+=15&O;var D=O>>4;if(D<16)S[M++]=D;else{var F=0,B=0;for(16==D?(B=3+jt(t,f,3),f+=2,F=S[M-1]):17==D?(B=3+jt(t,f,7),f+=3):18==D&&(B=11+jt(t,f,127),f+=7);B--;)S[M++]=F}}var U=S.subarray(0,x),j=S.subarray(x);y=Ut(U),p=Ut(j),v=Tt(U,y,1),d=Tt(j,p,1)}else Wt(1);if(f>m){u&&Wt(0);break}}s&&c(h+131072);for(var _=(1<<y)-1,L=(1<<p)-1,z=f;;z=f){var H=v[_t(t,f)&_],W=H>>4;if((f+=15&H)>m){u&&Wt(0);break}if(H||Wt(2),W<256)n[h++]=W;else{if(256==W){z=f,v=void 0;break}var V=W-254;if(W>264){var N=W-257,G=ft[N];V=jt(t,f,(1<<G)-1)+pt[N],f+=G}var Y=d[_t(t,f)&L],q=Y>>4;Y||Wt(3),f+=15&Y;var K=wt[q];if(q>3){var X=ht[q];K+=_t(t,f)&(1<<X)-1,f+=X}if(f>m){u&&Wt(0);break}s&&c(h+131072);var J=h+V;if(h<K){var Q=a-K,Z=Math.min(K,J);for(Q+h<0&&Wt(3);h<Z;++h)n[h]=r[Q+h]}for(;h<J;++h)n[h]=n[h-K]}}e.l=v,e.p=z,e.b=h,e.f=l,v&&(l=1,e.m=y,e.d=d,e.n=p)}while(!l);return h!=n.length&&o?zt(n,0,h):n.subarray(0,h)}(t.subarray((e=t,n=r.dictionary,(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Wt(6,"invalid zlib data"),(e[1]>>5&1)==+!n&&Wt(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)),-4),{i:2},r&&r.out,r&&r.dictionary)}var ie=function(){function t(){a(this,t),this.caches=new Map}return s(t,[{key:"calculate",value:function(e){if(!(e instanceof Uint8Array))throw new TypeError("Input must be a Uint8Array");var n=this.caches,r=L.decode.bytesToString(e);if(n.has(r))return n.get(r);for(var i=t.WHITE_COLOR,a=0;a<e.length;a++)i=i>>>8^t.table[255&(i^e[a])];return n.set(r,(i^t.WHITE_COLOR)>>>0),n.get(r)}},{key:"clear",value:function(){this.caches.clear()}}])}();ie.table=Uint32Array.from(Array(256),(function(t,e){for(var n=e,r=0;r<8;r++)n=1&n?3988292384^n>>>1:n>>>1;return n>>>0})),ie.WHITE_COLOR=4294967295;for(var ae=function(){return s((function t(e,n){a(this,t),this.width=e,this.height=n,this.crc32=new ie,this.view=new DataView(new ArrayBuffer(4*e*n))}),[{key:"createChunk",value:function(t,e){var n=new Uint8Array(4);new DataView(n.buffer).setUint32(0,e.length,!1);var r=Uint8Array.from(t,(function(t){return t.charCodeAt(0)})),i=new Uint8Array(r.length+e.length);i.set(r),i.set(e,r.length);var a=new Uint8Array(4);new DataView(a.buffer).setUint32(0,this.crc32.calculate(i)>>>0,!1);var o=new Uint8Array(n.length+i.length+a.length);return o.set(n),o.set(i,n.length),o.set(a,n.length+i.length),o}},{key:"createIHDRChunk",value:function(){var t=new Uint8Array(13),e=new DataView(t.buffer);return e.setUint32(0,this.width,!1),e.setUint32(4,this.height,!1),e.setUint8(8,8),e.setUint8(9,6),e.setUint8(10,0),e.setUint8(11,0),e.setUint8(12,0),this.createChunk("IHDR",t)}},{key:"createIDATChunk",value:function(){for(var t,e,n=this.width,r=this.height,i=4*n,a=i+1,o=new Uint8Array(a*r),s=new Uint8Array(this.view.buffer),u=0;u<r;u++)o[t=u*a]=0,e=u*i,o.set(s.subarray(e,e+i),t+1);return this.createChunk("IDAT",ne(o))}},{key:"setPixel",value:function(t,e,n){this.view.setUint32(4*(e*this.width+t),n,!1)}},{key:"write",value:function(t){for(var e,n,r=this.width,i=this.height,a=0;a<i;a++)for(var o=0;o<r;o++)n=(t[e=4*(a*r+o)]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0,this.setPixel(o,a,n);return this}},{key:"flush",value:function(){var t=this.createIHDRChunk(),e=this.createIDATChunk(),n=this.createChunk("IEND",new Uint8Array(0)),r=new Uint8Array(8+t.length+e.length+n.length),i=0;return r.set(new Uint8Array([137,80,78,71,13,10,26,10]),i),i+=8,r.set(t,i),i+=t.length,r.set(e,i),i+=e.length,r.set(n,i),this.crc32.clear(),r}}])}(),oe=function(){return s((function t(){a(this,t),this.buffer=[],this.lengthInBits=0}),[{key:"getAt",value:function(t){var e=~~(t/8);return 1==(this.buffer[e]>>>7-t%8&1)}},{key:"put",value:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))}},{key:"putBit",value:function(t){var e=this.lengthInBits,n=this.buffer,r=~~(e/8);n.length<=r&&n.push(0),t&&(n[r]|=128>>>e%8),this.lengthInBits+=1}}])}(),se=1,ue=2,ce=4,le=8,fe={L:1,M:0,Q:3,H:2},he=0,ve=1,de=2,ye=3,pe=4,me=5,ge=6,we=7,ke=function(){return s((function t(e){a(this,t);for(var n=[],r=0;r<e.length;r++){var i=[],o=e.charCodeAt(r);o>65536?(i[0]=240|(1835008&o)>>>18,i[1]=128|(258048&o)>>>12,i[2]=128|(4032&o)>>>6,i[3]=128|63&o):o>2048?(i[0]=224|(61440&o)>>>12,i[1]=128|(4032&o)>>>6,i[2]=128|63&o):o>128?(i[0]=192|(1984&o)>>>6,i[1]=128|63&o):i[0]=o,n.push(i)}this.bytes=n.flat(1);var s=this.bytes;s.length!==e.length&&(s.unshift(191),s.unshift(187),s.unshift(239))}),[{key:"mode",get:function(){return ce}},{key:"length",get:function(){return this.bytes.length}},{key:"write",value:function(t){for(var e=this.bytes,n=0;n<e.length;n++)t.put(e[n],8)}}])}(),be=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],xe=function(){return s((function t(){a(this,t)}),[{key:"getRSBlockTable",value:function(t,e){var n=4*(t-1);switch(e){case fe.L:return be[n+0];case fe.M:return be[n+1];case fe.Q:return be[n+2];case fe.H:return be[n+3];default:throw new Error("bad rs block @ typeNumber:".concat(t,"/errorCorrectLevel: ").concat(e))}}},{key:"getRSBlocks",value:function(t,e){for(var n=this.getRSBlockTable(t,e),r=n.length/3,i=[],a=0;a<r;a++)for(var o=n[3*a],s=n[3*a+1],u=n[3*a+2],c=0;c<o;c++)i.push({totalCount:s,dataCount:u});return i}}])}(),Ce=new Array(256),Te=new Array(256),Se=0;Se<8;Se++)Ce[Se]=1<<Se;for(var Pe=8;Pe<256;Pe++)Ce[Pe]=Ce[Pe-4]^Ce[Pe-5]^Ce[Pe-6]^Ce[Pe-8];for(var Ae=0;Ae<255;Ae++)Te[Ce[Ae]]=Ae;var Ee=function(t){if(t<1)throw new Error("glog(".concat(t,")"));return Te[t]},Re=function(t){return t<0?t=255+t%255:t>255&&(t%=255),Ce[t]},Ie=function(){function t(e,n){a(this,t);var r=e.length;if(void 0===r)throw new Error("".concat(r,"/").concat(n));for(var i=0;i<r&&0===e[i];)i++;var o=r-i;this.num=new Array(o+n);for(var s=0;s<o;s++)this.num[s]=e[s+i]}return s(t,[{key:"length",get:function(){return this.num.length}},{key:"getAt",value:function(t){return this.num[t]}},{key:"multiply",value:function(e){for(var n=Ee,r=Re,i=[],a=0;a<this.length;a++)for(var o=0;o<e.length;o++)i[a+o]^=r(n(this.getAt(a))+n(e.getAt(o)));return new t(i,0)}},{key:"mod",value:function(e){if(this.length-e.length<0)return this;for(var n=Ee,r=Re,i=n(this.getAt(0))-n(e.getAt(0)),a=[],o=0;o<this.length;o++){var s=this.getAt(o);a[o]=o<e.length?s^r(n(e.getAt(o))+i):s}return new t(a,0).mod(e)}}])}(),Me=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],Oe=function(t){return 0===t?0:Math.log2(t)},De=Oe(1335),Fe=Oe(7973),Be=function(t){for(var e=t<<10;Oe(e)-De>=0;)e^=1335<<Oe(e)-De;return 21522^(t<<10|e)},Ue=function(t){for(var e=t<<12;Oe(e)-Fe>=0;)e^=7973<<Oe(e)-Fe;return t<<12|e},je=function(t){return Me[t-1]},_e=function(t){switch(t){case he:return function(t,e){return(t+e)%2==0};case ve:return function(t){return t%2==0};case de:return function(t,e){return e%3==0};case ye:return function(t,e){return(t+e)%3==0};case pe:return function(t,e){return(~~(t/2)+~~(e/3))%2==0};case me:return function(t,e){return t*e%2+t*e%3==0};case ge:return function(t,e){return(t*e%2+t*e%3)%2==0};case we:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw new Error("bad maskPattern: ".concat(t))}},Le=function(t){for(var e=new Ie([1],0),n=0;n<t;n++)e=e.multiply(new Ie([1,Re(n)],0));return e},ze=function(t,e){var n=se,r=ue,i=ce,a=le;if(e<1||e>40)throw new Error("type: ".concat(e));if(e>=1&&e<10)switch(t){case n:return 10;case r:return 9;case i:case a:return 8}if(e<27)switch(t){case n:return 12;case r:return 11;case i:return 16;case a:return 10}if(e<=40)switch(t){case n:return 14;case r:return 13;case i:return 16;case a:return 12}throw new Error("mode: ".concat(t))},He=function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r++)for(var i=0;i<e;i++){for(var a=t.isDark(r,i),o=0,s=-1;s<=1;s++){var u=r+s;if(!(u<0||e<=u))for(var c=-1;c<=1;c++){var l=i+c;l<0||e<=l||(0===s&&0===c||a===t.isDark(u,l)&&o++)}}o>5&&(n+=o+3-5)}for(var f=0;f<e-1;f++)for(var h=0;h<e-1;h++){var v=0;t.isDark(f,h)&&v++,t.isDark(f+1,h)&&v++,t.isDark(f,h+1)&&v++,t.isDark(f+1,h+1)&&v++,0!==v&&4!==v||(n+=3)}for(var d=0;d<e;d++)for(var y=0;y<e-6;y++)t.isDark(d,y)&&!t.isDark(d,y+1)&&t.isDark(d,y+2)&&t.isDark(d,y+3)&&t.isDark(d,y+4)&&!t.isDark(d,y+5)&&t.isDark(d,y+6)&&(n+=40);for(var p=0;p<e;p++)for(var m=0;m<e-6;m++)t.isDark(m,p)&&!t.isDark(m+1,p)&&t.isDark(m+2,p)&&t.isDark(m+3,p)&&t.isDark(m+4,p)&&!t.isDark(m+5,p)&&t.isDark(m+6,p)&&(n+=40);for(var g=0,w=0;w<e;w++)for(var k=0;k<e;k++)t.isDark(k,w)&&g++;return n+10*(Math.abs(100*g/Math.pow(e,2)-50)/5)},We=function(){return s((function t(e,n){a(this,t),this.typeNumber=e,this.modules=[],this.moduleCount=0,this.dataCache=null,this.dataList=[],this.errorCorrectLevel=fe[n]}),[{key:"makeImpl",value:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=function(t){for(var e=[],n=0;n<t;n++){e[n]=[];for(var r=0;r<t;r++)e[n][r]=null}return e}(this.moduleCount);var n=this.moduleCount-7;this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(n,0),this.setupPositionProbePattern(0,n),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null===this.dataCache&&(this.dataCache=this.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)}},{key:"setupPositionProbePattern",value:function(t,e){for(var n=this.modules,r=this.moduleCount,i=-1;i<=7;i++){var a=t+i;if(!(a<=-1||r<=a))for(var o=-1;o<=7;o++){var s=e+o;s<=-1||r<=s||(n[a][s]=i>=0&&i<=6&&(0===o||6===o)||o>=0&&o<=6&&(0===i||6===i)||i>=2&&i<=4&&o>=2&&o<=4)}}}},{key:"setupPositionAdjustPattern",value:function(){for(var t=this.typeNumber,e=this.modules,n=je(t),r=n.length,i=0;i<r;i++)for(var a=0;a<r;a++){var o=n[i],s=n[a];if(null==e[o][s])for(var u=-2;u<=2;u++)for(var c=-2;c<=2;c++)e[o+u][s+c]=-2===u||2===u||-2===c||2===c||0===u&&0===c}}},{key:"setupTimingPattern",value:function(){for(var t=this.moduleCount,e=this.modules,n=t-8,r=8;r<n;r++)null==e[r][6]&&(e[r][6]=r%2==0);for(var i=8;i<n;i++)null==e[6][i]&&(e[6][i]=i%2==0)}},{key:"setupTypeInfo",value:function(t,e){for(var n=this.errorCorrectLevel,r=this.modules,i=this.moduleCount,a=Be(n<<3|e),o=0;o<15;o++){var s=!t&&1==(a>>o&1);o<6?r[o][8]=s:o<8?r[o+1][8]=s:r[i-15+o][8]=s}for(var u=0;u<15;u++){var c=!t&&1==(a>>u&1);u<8?r[8][i-u-1]=c:u<9?r[8][15-u]=c:r[8][15-u-1]=c}r[i-8][8]=!t}},{key:"getBestMaskPattern",value:function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=He(this);(0===n||t>r)&&(t=r,e=n)}return e}},{key:"setupTypeNumber",value:function(t){for(var e=this.typeNumber,n=this.modules,r=this.moduleCount,i=Ue(e),a=0;a<18;a++){var o=!t&&1==(i>>a&1);n[~~(a/3)][a%3+r-8-3]=o,n[a%3+r-8-3][~~(a/3)]=o}}},{key:"createData",value:function(t,e,n){for(var r=(new xe).getRSBlocks(t,e),i=new oe,a=0;a<n.length;a++){var o=n[a];i.put(o.mode,4),i.put(o.length,ze(o.mode,t)),o.write(i)}for(var s=0,u=0;u<r.length;u++)s+=r[u].dataCount;var c=8*s;if(i.lengthInBits>c)throw new Error("code length overflow. (".concat(i.lengthInBits," > ").concat(c,")"));for(i.lengthInBits+4<=c&&i.put(0,4);i.lengthInBits%8!=0;)i.putBit(!1);for(;!(i.lengthInBits>=c||(i.put(236,8),i.lengthInBits>=c));)i.put(17,8);return this.createBytes(i,r)}},{key:"mapData",value:function(t,e){for(var n=this.modules,r=this.moduleCount,i=_e(e),a=-1,o=r-1,s=7,u=0,c=o;c>0;c-=2)for(6===c&&(c-=1);;){for(var l=0;l<2;l++)if(null==n[o][c-l]){var f=!1;u<t.length&&(f=1==(t[u]>>>s&1)),i(o,c-l)&&(f=!f),n[o][c-l]=f,-1===--s&&(u++,s=7)}if((o+=a)<0||r<=o){o-=a,a=-a;break}}}},{key:"createBytes",value:function(t,e){for(var n=[],r=[],i=0,a=0,o=0,s=0;s<e.length;s++){var u=e[s].dataCount,c=e[s].totalCount-u;a=Math.max(a,u),o=Math.max(o,c),n[s]=[];for(var l=0;l<u;l++)n[s][l]=255&t.buffer[l+i];i+=u;var f=Le(c),h=new Ie(n[s],f.length-1).mod(f);r[s]=new Array(f.length-1);for(var v=0;v<r[s].length;v++){var d=v+h.length-r[s].length;r[s][v]=d>=0?h.getAt(d):0}}for(var y=0,p=0;p<e.length;p++)y+=e[p].totalCount;for(var m=new Array(y),g=0,w=0;w<a;w++)for(var k=0;k<e.length;k++)w<n[k].length&&(m[g++]=n[k][w]);for(var b=0;b<o;b++)for(var x=0;x<e.length;x++)b<r[x].length&&(m[g++]=r[x][b]);return m}},{key:"isDark",value:function(t,e){var n=this.moduleCount;if(t<0||n<=t||e<0||n<=e)throw new Error("".concat(t,", ").concat(e));return this.modules[t][e]}},{key:"addData",value:function(t){this.dataList.push(new ke(t)),this.dataCache=null}},{key:"getModuleCount",value:function(){return this.moduleCount}},{key:"make",value:function(){this.makeImpl(!1,this.getBestMaskPattern())}}])}(),Ve=function(){function t(){a(this,t)}return s(t,null,[{key:"decompress",value:function(t){return re(new Uint8Array(t)).buffer}},{key:"parseVideo",value:function(t,e){return function(t,e){if(t instanceof Uint8Array){var n=new G(t),r=it.decode(n);return r.filename=e,n.preflight.clear(),r}throw new Error("Invalid data type")}(new Uint8Array(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?this.decompress(t):t),L.path.filename(e))}},{key:"download",value:function(t){return k(this,void 0,void 0,d().m((function e(){var n,r,i,a,o,s,u,c,l;return d().w((function(e){for(;;)switch(e.p=e.n){case 0:if(n=L.globals,r=L.remote,i=L.path,a=L.local,o=n.env,s="h5"!==o&&"tt"!==o,u=i.is(t)?t:i.resolve(i.filename(t)),!s){e.n=2;break}return e.n=1,a.exists(u);case 1:if(!e.v){e.n=2;break}return e.a(2,a.read(u));case 2:return e.n=3,r.fetch(t);case 3:if(c=e.v,!s){e.n=7;break}return e.p=4,e.n=5,a.write(c,u);case 5:e.n=7;break;case 6:e.p=6,l=e.v,console.error(l);case 7:return e.a(2,c)}}),e,null,[[4,6]])})))}},{key:"load",value:function(e){return k(this,void 0,void 0,d().m((function n(){var r,i,a;return d().w((function(n){for(;;)switch(n.n){case 0:return r=t,n.n=1,t.download(e);case 1:return i=n.v,a=e,n.a(2,r.parseVideo.call(r,i,a))}}),n)})))}}])}(),Ne=L.noop,Ge=function(){return s((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"animation",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;a(this,t),this.mode=e,this.F=null,this.FC=null,this.B=null,this.BC=null,this.model={},this.clearContainer=Ne,this.clearSecondary=Ne;var i=L.globals.dpr;this.W=n*i,this.H=r*i}),[{key:"setActionModel",value:function(t){var e=this.model,n=L.globals.env;e.type=t,"O"===t&&"h5"===n&&navigator.userAgent.includes("Firefox")?e.clear="CR":e.clear="O"===t&&"tt"===n||"alipay"===n?"CL":"RE"}},{key:"register",value:function(t,e,n){return k(this,void 0,void 0,d().m((function r(){var i,a,o,s,u,c,l,f,h,v,y,p,m,g,w,k,b,x=this;return d().w((function(r){for(;;)switch(r.n){case 0:if(i=this.model,a=this.mode,o=L.getCanvas,s=L.getOfsCanvas,u=L.globals.env,"poster"!==a||"h5"===u&&!("OffscreenCanvas"in globalThis)){r.n=1;break}c=this.W,l=this.H,f=s({width:c,height:l}),h=f.canvas,v=f.context,this.F=h,this.FC=v,this.setActionModel("O"),r.n=3;break;case 1:return r.n=2,o(t,n);case 2:y=r.v,p=y.canvas,m=y.context,g=p.width,w=p.height,this.F=p,this.FC=m,this.setActionModel("C"),"poster"===a?(p.width=this.W,p.height=this.H):(this.W=g,this.H=w);case 3:if("CL"===i.clear?this.clearContainer=function(){var t=x.W,e=x.H;x.FC.clearRect(0,0,t,e)}:this.clearContainer=function(){var t=x.W,e=x.H,n=x.F;n.width=t,n.height=e},"poster"!==a){r.n=4;break}this.B=this.F,this.BC=this.FC,this.clearSecondary=this.stick=Ne,r.n=11;break;case 4:if("string"!=typeof e||""===e){r.n=6;break}return r.n=5,o(e,n);case 5:(k=r.v).canvas.width=this.W,k.canvas.height=this.H,this.setActionModel("C"),r.n=7;break;case 6:k=s({width:this.W,height:this.H}),this.setActionModel("O");case 7:this.B=k.canvas,this.BC=k.context,b=i.clear,r.n="CR"===b?8:"CL"===b?9:10;break;case 8:return this.clearSecondary=function(){var t=x.W,e=x.H,n=s({width:t,height:e}),r=n.canvas,i=n.context;x.B=r,x.BC=i},r.a(3,11);case 9:return this.clearSecondary=function(){var t=x.W,e=x.H;x.BC.clearRect(0,0,t,e)},r.a(3,11);case 10:this.clearSecondary=function(){var t=x.W,e=x.H,n=x.B;n.width=t,n.height=e};case 11:return r.a(2)}}),r,this)})))}},{key:"stick",value:function(){var t=this.W,e=this.H,n=this.FC,r=this.BC;"poster"!==this.mode&&n.drawImage(r.canvas,0,0,t,e)}},{key:"destroy",value:function(){this.clearContainer(),this.clearSecondary(),this.F=this.FC=this.B=this.BC=null,this.clearContainer=this.clearSecondary=this.stick=Ne}}])}(),Ye=function(){return s((function t(){a(this,t),this.fillMode="backwards",this.playMode="forwards",this.contentMode="fill",this.startFrame=0,this.endFrame=0,this.loopStartFrame=0,this.loop=0}),[{key:"register",value:function(t){"number"==typeof t.loop&&t.loop>=0&&(this.loop=t.loop),t.fillMode&&["forwards","backwards","none"].includes(t.fillMode)&&(this.fillMode=t.fillMode),t.playMode&&["forwards","fallbacks"].includes(t.playMode)&&(this.playMode=t.playMode),"number"==typeof t.startFrame&&t.startFrame>=0&&(this.startFrame=t.startFrame),"number"==typeof t.endFrame&&t.endFrame>=0&&(this.endFrame=t.endFrame),"number"==typeof t.loopStartFrame&&t.loopStartFrame>=0&&(this.loopStartFrame=t.loopStartFrame),"string"==typeof t.contentMode&&(this.contentMode=t.contentMode)}},{key:"setItem",value:function(t,e){this.register(c({},t,e))}},{key:"getConfig",value:function(t){var e=this.playMode,n=this.loopStartFrame,r=this.startFrame,i=this.endFrame,a=this.fillMode,o=this.loop,s=t.fps,u=t.sprites,c=t.frames,l=u.length,f=r>0?r:0,h=i>0&&i<c?i:c,v=1e3/s;if(f>h)throw new Error("StartFrame should greater than EndFrame");h<c?c=h-f:f>0&&(c-=f);var d,y=Math.floor(c*v*Math.pow(10,6))/Math.pow(10,6),p=0,m=0;return"forwards"===e?(p=Math.max(n,r),"forwards"===a&&(m=1),d=n>f?(n-f)*v:0):(p=Math.min(n,h-1),"backwards"===a&&(m=1),d=n<h?(h-n)*v:0),{currFrame:p,startFrame:f,endFrame:h,totalFrame:c,spriteCount:l,aniConfig:{duration:y,loopStart:d,loop:0===o?1/0:o,fillValue:m*v}}}}])}(),qe=function(){return s((function t(){a(this,t),this.config=new Ye,this.resource=null,this.painter=new Ge,this.animator=new st,this.renderer=null}),[{key:"setConfig",value:function(t,e){return k(this,void 0,void 0,d().m((function n(){var r,i,a;return d().w((function(n){for(;;)switch(n.n){case 0:return i=(r="string"==typeof t?{container:t}:t).container,a=r.secondary,this.config.register(r),n.n=1,this.painter.register(i,a,e);case 1:this.renderer=new ot(this.painter.BC),this.resource=new z(this.painter),this.animator.onAnimate=L.rAF.bind(null,this.painter.F);case 2:return n.a(2)}}),n,this)})))}},{key:"setItem",value:function(t,e){this.config.setItem(t,e)}},{key:"mount",value:function(t){return k(this,void 0,void 0,d().m((function e(){var n,r;return d().w((function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}throw new Error("videoEntity undefined");case 1:return n=t.images,r=t.filename,this.animator.stop(),this.painter.clearSecondary(),this.resource.release(),this.entity=t,e.n=2,this.resource.loadImagesWithRecord(n,r);case 2:return e.a(2)}}),e,this)})))}},{key:"start",value:function(){var t;this.startAnimation(),null===(t=this.onStart)||void 0===t||t.call(this)}},{key:"resume",value:function(){var t;this.animator.resume()&&(null===(t=this.onResume)||void 0===t||t.call(this))}},{key:"pause",value:function(){var t;this.animator.pause()&&(null===(t=this.onPause)||void 0===t||t.call(this))}},{key:"stop",value:function(){var t;this.animator.stop(),this.painter.clearContainer(),this.painter.clearSecondary(),null===(t=this.onStop)||void 0===t||t.call(this)}},{key:"destroy",value:function(){var t,e,n;this.animator.stop(),this.painter.destroy(),null===(t=this.renderer)||void 0===t||t.destroy(),null===(e=this.resource)||void 0===e||e.release(),null===(n=this.resource)||void 0===n||n.cleanup(),this.entity=void 0}},{key:"stepToFrame",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!this.entity||t<0||t>=this.entity.frames||(this.pause(),this.config.loopStartFrame=t,e&&this.start())}},{key:"stepToPercentage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.entity){var n=this.entity.frames,r=t<0?0:Math.round(t*n);r>=n&&(r=n-1),this.stepToFrame(r,e)}}},{key:"startAnimation",value:function(){var t,e,n,r,i,a,o=this,s=this.entity,u=this.config,c=this.animator,l=this.painter,f=this.renderer,h=this.resource,v=l.W,d=l.H,y=u.fillMode,p=u.playMode,m=u.contentMode,g=u.getConfig(s),w=g.currFrame,k=g.startFrame,b=g.endFrame,x=g.totalFrame,C=g.spriteCount,T=g.aniConfig,S=T.duration,P=T.loopStart,A=T.loop,E=T.fillValue,R="fallbacks"===p,I=w,M=0;c.setConfig(S,P,A,E),f.resize(m,s.size,{width:v,height:d});var O,D,F,B=4;c.onUpdate=function(u){var c;!function(e){for(O=L.now(),e();M<C;)if(D=Math.min(B,C-M),t=M+D|0,f.render(s,h.materials,h.dynamicMaterials,I,M,t),M=t,(F=L.now()-O)<3)B=Math.min(2*B,34);else if(F>8){B=Math.max(B/2,1);break}}((function(){r=(i=R?1-u:u)*x,R?(n=(0===u?b:Math.ceil(r))-1,i=I/x):n=1===u?k:Math.floor(r),a=I===n})),a||(l.clearContainer(),l.stick(),l.clearSecondary(),e=I,I=n,M=0,null===(c=o.onProcess)||void 0===c||c.call(o,~~(100*i)/100,e))},c.onStart=function(){s.locked=!0},c.onEnd=function(){var t;s.locked=!1,"none"===y&&l.clearContainer(),null===(t=o.onEnd)||void 0===t||t.call(o)},c.start()}}])}(),Ke=function(){return s((function t(e,n){a(this,t),this.config={container:"",contentMode:"fill",frame:0},this.isConfigured=!1,this.resource=null,this.renderer=null,this.painter=new Ge("poster",e,n)}),[{key:"register",value:function(){return k(this,arguments,void 0,(function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return d().m((function r(){return d().w((function(r){for(;;)switch(r.n){case 0:return r.n=1,t.painter.register(e,"",n);case 1:t.renderer=new ot(t.painter.BC),t.resource=new z(t.painter);case 2:return r.a(2)}}),r)}))()}))}},{key:"setConfig",value:function(){return k(this,arguments,void 0,(function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return d().m((function r(){return d().w((function(r){for(;;)switch(r.n){case 0:return"string"==typeof e?t.config.container=e:Object.assign(t.config,e),t.isConfigured=!0,r.n=1,t.register(t.config.container,n);case 1:return r.a(2)}}),r)}))()}))}},{key:"setContentMode",value:function(t){this.config.contentMode=t}},{key:"setFrame",value:function(t){this.config.frame=t}},{key:"mount",value:function(t){return k(this,void 0,void 0,d().m((function e(){var n,r;return d().w((function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}throw new Error("videoEntity undefined");case 1:if(this.isConfigured){e.n=3;break}return e.n=2,this.register();case 2:this.isConfigured=!0;case 3:return n=t.images,r=t.filename,this.painter.clearContainer(),this.resource.release(),this.entity=t,e.n=4,this.resource.loadImagesWithRecord(n,r);case 4:return e.a(2)}}),e,this)})))}},{key:"draw",value:function(){if(this.entity){var t=this.painter,e=this.renderer,n=this.resource,r=this.entity,i=this.config;e.resize(i.contentMode,r.size,t.F),e.render(r,n.materials,n.dynamicMaterials,i.frame,0,r.sprites.length)}}},{key:"toImageData",value:function(){var t=this.painter,e=t.FC,n=t.W,r=t.H;return e.getImageData(0,0,n,r)}},{key:"destroy",value:function(){var t,e,n;this.painter.destroy(),null===(t=this.renderer)||void 0===t||t.destroy(),null===(e=this.resource)||void 0===e||e.release(),null===(n=this.resource)||void 0===n||n.cleanup(),this.entity=void 0}}])}();function Xe(t){var e,n=function(t){var e,n,r,i,a=null!==(e=t.typeNumber)&&void 0!==e?e:4,o=null!==(n=t.correctLevel)&&void 0!==n?n:"H",s=null!==(r=t.codeColor)&&void 0!==r?r:"#000000",u=null!==(i=t.backgroundColor)&&void 0!==i?i:"#FFFFFF";return{code:t.code,size:t.size,typeNumber:a,correctLevel:o,codeColor:s,backgroundColor:u}}(t),r=n.code,i=n.typeNumber,a=n.correctLevel,o=n.size,s=n.codeColor,u=n.backgroundColor;try{(e=new We(i,a)).addData(r),e.make()}catch(t){if(i>=40)throw new Error("Text too long to encode");return arguments.callee({code:r,size:o,correctLevel:a,typeNumber:i+1,codeColor:s,backgroundColor:u})}for(var c=e.getModuleCount(),l=function(t,e){var n=~~(e/t);return{padding:~~((e-t*n)/2),cellSize:n||2}}(c,o),f=l.padding,h=l.cellSize,v=c*h+f,d=+"".concat(s.replace("#","0x"),"FF"),y=+"".concat(u.replace("#","0x"),"FF"),p=new ae(o,o),m=0;m<o;m++)for(var g=0;g<o;g++)if(f<=g&&g<v&&f<=m&&m<v){var w=~~((g-f)/h),k=~~((m-f)/h);p.setPixel(g,m,e.isDark(k,w)?d:y)}else p.setPixel(g,m,y);return p.flush()}function Je(t){var e=t.width,n=t.height,r=t.data;return new ae(e,n).write(r).flush()}var Qe=Je;function Ze(t){var e=Je(t);return L.decode.toDataURL(e)}var $e=Ze;var tn=function(){return s((function t(e,n){a(this,t),this.point=0,this.maxRemain=3,this.remainStart=0,this.remainEnd=0,this.loadMode="fast",this.buckets=[],this.options={preprocess:function(t){return Ve.download(t.origin)},postprocess:function(t,e){return Ve.parseVideo(e,t.origin,!0)},cleanup:function(t){L.globals;var e=L.local,n=L.path;t.forEach((function(t){n.is(t.local)&&e.remove(t.local)}))}},"string"==typeof e&&(this.loadMode=e),Object.assign(this.options,n)}),[{key:"size",get:function(){return this.buckets.length}},{key:"updateRemainRange",value:function(t,e,n){this.point=t<0?0:t>=n?n-1:t,"whole"===this.loadMode?(this.remainStart=0,this.remainEnd=n):(this.maxRemain=e<1?1:e>n?n:e,this.remainStart=this.point-Math.floor(this.maxRemain/2),this.remainStart<0&&(this.remainStart=n+this.remainStart),this.remainEnd=this.remainStart+this.maxRemain,this.remainEnd>n&&(this.remainEnd=this.remainEnd%n))}},{key:"includeRemainRange",value:function(t){return this.remainStart<this.remainEnd?t>=this.remainStart&&t<this.remainEnd:!(this.remainStart>this.remainEnd)||(t>=this.remainStart||t<this.remainEnd)}},{key:"downloadAndParseVideo",value:function(t){return k(this,arguments,void 0,(function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return d().m((function r(){var i,a;return d().w((function(r){for(;;)switch(r.n){case 0:return i=e.options,r.n=1,i.preprocess(t);case 1:if(a=r.v,!n){r.n=2;break}return r.a(2,i.postprocess(t,a));case 2:return r.a(2,a)}}),r)}))()}))}},{key:"createBucket",value:function(t,e,n){return k(this,void 0,void 0,d().m((function r(){var i,a;return d().w((function(r){for(;;)switch(r.n){case 0:if(i=L.path,a={origin:t,local:i.resolve(i.filename(t)),entity:null,promise:null},this.buckets[e]=a,!n){r.n=2;break}return r.n=1,this.downloadAndParseVideo(a,!0);case 1:a.entity=r.v,r.n=3;break;case 2:this.includeRemainRange(e)&&(a.promise=this.downloadAndParseVideo(a));case 3:return r.a(2,a)}}),r,this)})))}},{key:"prepare",value:function(t){return k(this,arguments,void 0,(function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return d().m((function i(){var a,o,s;return d().w((function(i){for(;;)switch(i.n){case 0:return e.updateRemainRange(n,r,t.length),a=e.loadMode,o=e.point,i.n=1,e.createBucket(t[o],o,!0);case 1:return s=i.v,i.n=2,Promise.all(t.map((function(t,n){return n===o?s:e.createBucket(t,n,"whole"===a)})));case 2:return i.a(2)}}),i)}))()}))}},{key:"get",value:function(){return k(this,void 0,void 0,d().m((function t(){var e,n=this;return d().w((function(t){for(;;)switch(t.n){case 0:if(!(e=this.buckets[this.point]).promise){t.n=2;break}return t.n=1,e.promise.then((function(t){return n.options.postprocess(e,t)}));case 1:e.entity=t.v,e.promise=null,t.n=4;break;case 2:if(e.entity){t.n=4;break}return t.n=3,this.downloadAndParseVideo(e,!0);case 3:e.entity=t.v;case 4:return t.a(2,e)}}),t,this)})))}},{key:"getPoint",value:function(){return this.point}},{key:"go",value:function(t){return k(this,void 0,void 0,d().m((function e(){var n,r,i,a=this;return d().w((function(e){for(;;)switch(e.n){case 0:if(n=this.size,r=this.buckets,i=this.loadMode,!(t<0||t>=n)){e.n=1;break}return e.a(2,r[this.point]);case 1:return this.updateRemainRange(t,this.maxRemain,r.length),"fast"===i&&this.maxRemain!==r.length&&r.forEach((function(t,e){a.includeRemainRange(e)?null===t.entity&&null===t.promise&&(t.promise=a.downloadAndParseVideo(t)):(t.entity=null,t.promise=null)})),e.a(2,this.get())}}),e,this)})))}},{key:"clear",value:function(){return k(this,arguments,void 0,(function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return d().m((function n(){var r;return d().w((function(n){for(;;)switch(n.n){case 0:if(r=t.buckets,t.point=0,t.remainStart=0,t.remainEnd=0,t.maxRemain=3,t.buckets=[],!e){n.n=1;break}return n.n=1,t.options.cleanup(r);case 1:return n.a(2)}}),n)}))()}))}}])}(),en=function(){return s((function t(e,n,r){a(this,t),this.painter=e,this.resource=n,this.entity=r}),[{key:"set",value:function(t,e){return k(this,arguments,void 0,(function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"R";return d().m((function i(){var a,o;return d().w((function(i){for(;;)switch(i.n){case 0:if(a=n.entity,o=n.resource,"A"!==r){i.n=2;break}return i.n=1,o.loadImagesWithRecord(c({},t,e),a.filename,"dynamic");case 1:i.n=3;break;case 2:a.images[t]=e;case 3:return i.a(2)}}),i)}))()}))}},{key:"getContext",value:function(){return this.painter.BC}},{key:"hasValidKey",value:function(t){var e=this.entity.images;return"function"==typeof Object.hasOwn?Object.hasOwn(e,t):Object.prototype.hasOwnProperty.call(e,t)}},{key:"loadImage",value:function(t,e){return this.resource.loadExtImage(t,L.path.filename(e))}},{key:"setCanvas",value:function(t,e,n){return k(this,void 0,void 0,d().m((function r(){var i,a,o,s,u,c;return d().w((function(r){for(;;)switch(r.n){case 0:if(!this.entity.locked){r.n=1;break}return r.a(2);case 1:return o=e.canvas,s=null!==(i=null==n?void 0:n.width)&&void 0!==i?i:o.width,u=null!==(a=null==n?void 0:n.height)&&void 0!==a?a:o.height,c=e.getImageData(0,0,s,u),r.n=2,this.set(t,new Uint8Array(Je(c)),null==n?void 0:n.mode);case 2:return r.a(2)}}),r,this)})))}},{key:"setImage",value:function(t,e,n){return k(this,void 0,void 0,d().m((function r(){var i,a,o,s,u,c;return d().w((function(r){for(;;)switch(r.n){case 0:if(!this.entity.locked){r.n=1;break}return r.a(2);case 1:if(!e.startsWith("data:image")){r.n=3;break}return r.n=2,this.set(t,e,null==n?void 0:n.mode);case 2:r.n=5;break;case 3:return i=this,a=t,o=Uint8Array,r.n=4,Ve.download(e);case 4:return s=r.v,u=new o(s),c=null==n?void 0:n.mode,r.n=5,i.set.call(i,a,u,c);case 5:return r.a(2)}}),r,this)})))}},{key:"setQRCode",value:function(t,e,n){return k(this,void 0,void 0,d().m((function r(){return d().w((function(r){for(;;)switch(r.n){case 0:if(!this.entity.locked){r.n=1;break}return r.a(2);case 1:return r.n=2,this.set(t,new Uint8Array(Xe(Object.assign(Object.assign({},n),{code:e}))),null==n?void 0:n.mode);case 2:return r.a(2)}}),r,this)})))}}])}();t.Painter=Ge,t.Parser=Ve,t.Player=qe,t.Poster=Ke,t.VideoEditor=en,t.VideoManager=tn,t.createBufferOfImageData=Je,t.createImageDataUrl=Ze,t.generateImageBufferFromCode=Xe,t.generateImageFromCode=function(t){var e=Xe(t);return L.decode.toDataURL(e)},t.getBufferFromImageData=Qe,t.getDataURLFromImageData=$e,t.isZlibCompressed=function(t){if(t.length<6)return!1;var e=t[0],n=t[1];if(8!=(15&e))return!1;if((256*e+n)%31!=0)return!1;if(!!(32&n))return!1;var r=t.slice(-4);if(4!==r.length)return!1;var i=r[0]<<24|r[1]<<16|r[2]<<8|r[3];return!(t.length>2&&0===i)},t.platform=L,Object.defineProperty(t,"__esModule",{value:!0})}));//# sourceMappingURL=index.min.js.map
