!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).OctopusSvga={})}(this,(function(t){"use strict";const e=()=>{};async function r(t,e=[],n=0){try{return t()}catch(a){if(n>=e.length)throw a;return i=()=>r(t,e,++n),o=e[n],new Promise((t=>setTimeout((()=>t(i())),o)))}var i,o}const n=4096,i=new Uint16Array(n);function o(t,e,r){if(e<0||r>t.length)throw new RangeError("Index out of range");if(r-e<1)return"";const o=[];let a=0;const s=t=>{o.push(String.fromCharCode.apply(null,Array.from(t)))};let c=!0;for(let n=e;n<r;n++)if(t[n]>127){c=!1;break}if(c){for(let o=e;o<r;o+=n){const e=Math.min(o+n,r)-o;for(let r=0;r<e;r++)i[r]=t[o+r];s(i.subarray(0,e))}return o.join("")}for(let o=e;o<r;){const e=t[o++];if(e<128){i[a++]=e,a===n&&(s(i),a=0);continue}let c;if(a>0&&(s(i.subarray(0,a)),a=0),192==(224&e)&&o<r)c=(31&e)<<6|63&t[o++];else if(224==(240&e)&&o+1<r)c=(15&e)<<12|(63&t[o++])<<6|63&t[o++];else if(240==(248&e)&&o+2<r){if(c=(7&e)<<18|(63&t[o++])<<12|(63&t[o++])<<6|63&t[o++],c>65535){c-=65536,i[a++]=55296+(c>>10),i[a++]=56320+(1023&c),a>=4094&&(s(i.subarray(0,a)),a=0);continue}}else for(c=65533;o<r&&128==(192&t[o]);)o++;i[a++]=c,a>=4093&&(s(i.subarray(0,a)),a=0)}return a>0&&s(i.subarray(0,a)),o.join("")}class a{plugins=[];platformVersion="0.0.1";version="";globals={env:"unknown",br:null,dpr:1,system:"unknown"};noop=e;retry=r;constructor(t,e){this.version=e||"",this.plugins=t,this.globals.env=this.autoEnv()}init(){const{globals:t,plugins:e}=this,r=new Map,n=[],i=new Set;t.br=this.useBridge(),t.dpr=this.usePixelRatio(),t.system=this.useSystem();for(const t of e)n.push(t.name),r.set(t.name,t);this.usePlugins(r,n,i),i.clear()}autoEnv(){if("undefined"!=typeof window)return"h5";if("undefined"!=typeof tt)return"tt";if("undefined"!=typeof my)return"alipay";if("undefined"!=typeof wx)return"weapp";throw new Error("Unsupported app")}useBridge(){switch(this.globals.env){case"h5":return globalThis;case"alipay":return my;case"tt":return tt;case"weapp":return wx}return{}}usePixelRatio(){const{env:t,br:e}=this.globals;return"h5"===t?devicePixelRatio:"getWindowInfo"in e?e.getWindowInfo().pixelRatio:"getSystemInfoSync"in e?e.getSystemInfoSync().pixelRatio:1}useSystem(){const{env:t}=this.globals;let e;switch(t){case"weapp":e=wx.getDeviceInfo().platform;break;case"alipay":e=my.getDeviceBaseInfo().platform;break;case"tt":e=tt.getDeviceInfoSync().platform;break;default:e="unknown"}return e.toLowerCase()}usePlugins(t,e,r){for(const n of e){if(!t.has(n))throw new Error(`Plugin ${n} not found`);if(r.has(n))return;const e=t.get(n);if(Array.isArray(e.dependencies)){for(const r of e.dependencies)if("function"!=typeof t.get(r)?.install)throw new Error(`Plugin ${n} depends on plugin ${r}, but ${r} is not found`);this.usePlugins(t,e.dependencies,r)}this.installPlugin(e),r.add(n)}}switch(t){this.globals.env=t,this.init()}}function s(t,e){const r=e.install.call(t);Object.defineProperty(t,e.name,{get:()=>r,enumerable:!0,configurable:!0})}var c={name:"getCanvas",install(){const{retry:t}=this,{env:e,br:r,dpr:n}=this.globals,i=[50,100,100];function o(t,e,r){if(!t)throw new Error("canvas not found.");const i=t.getContext("2d");return t.width=e*n,t.height=r*n,{canvas:t,context:i}}if("h5"===e){const e=t=>document.querySelector(t);return r=>t((()=>{const t=e(`canvas[canvas-id=${r.slice(1)}]`)||e(r);return o(t,t?.clientWidth,t?.clientHeight)}),i)}return(e,n)=>t((()=>new Promise(((t,i)=>{let a=r.createSelectorQuery();n&&(a=a.in(n)),a.select(e).fields({node:!0,size:!0},(e=>{const{node:r,width:n,height:a}=e||{};try{t(o(r,n,a))}catch(t){i(t)}})).exec()}))),i)}},u={name:"decode",install(){const{env:t,br:e}=this.globals,r=(t,e="image/png")=>`data:${e};base64,${t}`,n={toBuffer(t){const{buffer:e,byteOffset:r,byteLength:n}=t;if(e instanceof ArrayBuffer)return e.slice(r,r+n);const i=new Uint8Array(n);return i.set(t),i.buffer},bytesToString(t){let e="";for(let r=0;r<t.length;r+=8192){const n=t.slice(r,r+8192);e+=String.fromCharCode.apply(null,Array.from(n))}return e}};if("h5"===t){const t=new TextDecoder("utf-8",{fatal:!0});return{...n,toDataURL:t=>r(btoa(n.bytesToString(t))),utf8:(e,r,n)=>t.decode(e.subarray(r,n))}}return{...n,toDataURL:t=>r(e.arrayBufferToBase64(n.toBuffer(t))),utf8:o}}},l={name:"remote",install(){const{env:t,br:e}=this.globals,r=t=>/^(blob:)?http(s)?:\/\//.test(t);if("h5"===t)return{is:r,fetch:t=>fetch(t).then((t=>{if(t.ok)return t.arrayBuffer();throw new Error(`HTTP error, status=${t.status}, statusText=${t.statusText}`)}))};function n(t,r){return new Promise(((n,i)=>{e.request({url:t,dataType:"arraybuffer",responseType:"arraybuffer",enableCache:r,success:t=>n(t.data),fail:i})})).catch((e=>{const r=e.errMsg||e.errorMessage||e.message;if(r.includes("ERR_CACHE_WRITE_FAILURE")||r.includes("ERR_CACHE_WRITE_FAILED"))return n(t,!1);throw e}))}return{is:r,fetch:t=>n(t,!0)}}},h={name:"local",install(){const{env:t,br:e}=this.globals;if("h5"===t||"tt"===t)return null;const r=e.getFileSystemManager();return{exists:t=>new Promise((e=>{r.access({path:t,success:()=>e(!0),fail:()=>e(!1)})})),write:(t,e)=>new Promise(((n,i)=>{r.writeFile({filePath:e,data:t,success:()=>n(e),fail:i})})),read:t=>new Promise(((e,n)=>{r.readFile({filePath:t,success:t=>e(t.data),fail:n})})),remove:t=>new Promise(((e,n)=>{r.unlink({filePath:t,success:()=>e(t),fail:n})}))}}},f={name:"image",dependencies:["local","decode"],install(){const{local:t,decode:e}=this,{env:r}=this.globals;let n=(t,r)=>"string"==typeof t?t:e.toDataURL(t);function i(t,e){return new Promise(((r,n)=>{t.onload=()=>r(t),t.onerror=()=>n(new Error(`SVGA LOADING FAILURE: ${e}`)),t.src=e}))}function o(t){t.onload=null,t.onerror=null,t.src=""}return"h5"===r?{create:t=>new Image,load:(t,r,o)=>r instanceof Uint8Array&&"createImageBitmap"in globalThis?createImageBitmap(new Blob([e.toBuffer(r)])):r instanceof ImageBitmap?Promise.resolve(r):i(t(),n(r,o)),release:o}:("weapp"===r&&(n=async(r,n)=>"string"==typeof r?r:t.write(e.toBuffer(r),n).catch((t=>(console.warn(`image write fail: ${t.errorMessage||t.errMsg||t.message}`),e.toDataURL(r))))),{create:t=>t.createImage(),load:async(t,e,r)=>i(t(),await n(e,r)),release:o})}},p={name:"now",install(){const{env:t,br:e}=this.globals,r="h5"===t||"tt"===t?performance:e.getPerformance();return"function"==typeof r?.now?r.now()-Date.now()>1?()=>r.now()/1e3:()=>r.now():()=>Date.now()}},d={name:"getOfsCanvas",install(){const{env:t}=this.globals;let e;return e="h5"===t?t=>new OffscreenCanvas(t.width,t.height):"alipay"===t?t=>my.createOffscreenCanvas(t):"tt"===t?t=>{const e=tt.createOffscreenCanvas();return e.width=t.width,e.height=t.height,e}:t=>wx.createOffscreenCanvas(t),t=>{const r=t.type||"2d",n=e({...t,type:r}),i=n.getContext(r);return{canvas:n,context:i}}}},y={name:"path",install(){const{env:t,br:e}=this.globals,r=t=>t.substring(t.lastIndexOf("/")+1);if("h5"===t||"tt"===t)return{USER_DATA_PATH:"",is:t=>!1,filename:r,resolve:(t,e)=>""};const{USER_DATA_PATH:n}=e.env;return{USER_DATA_PATH:n,is:t=>t?.startsWith(n),filename:r,resolve:(t,e)=>`${n}/${e?`${e}__`:""}${t}`}}},v={name:"rAF",install(){const{env:t}=this.globals;function e(){return t=>setTimeout(t,Math.max(0,16-Date.now()%16))}if("h5"===t){const t="requestAnimationFrame"in globalThis?requestAnimationFrame:e();return(e,r)=>t(r)}return(t,r)=>{try{return t.requestAnimationFrame(r)}catch(t){return console.warn(t.message),e()(r)}}}};const m=new class extends a{now;constructor(){super([p],"0.0.1"),this.init()}installPlugin(t){s(this,t)}},g=["%cBENCHMARK","padding: 2px 4px; background: #68B984; color: #FFFFFF; border-radius: 4px;"];const w=new class{timeLabels=new Map;markLabels=new Map;start(t){this.timeLabels.set(t,m.now())}stop(t){const e=m.now(),{timeLabels:r}=this;r.has(t)&&(console.log(`${t}: ${e-r.get(t)} ms`),r.delete(t))}mark(t){const e=m.now(),{markLabels:r}=this;r.has(t)&&console.log(`${t}: ${e-r.get(t)} ms`),r.set(t,e)}reset(t){this.markLabels.delete(t)}clear(){this.timeLabels.clear(),this.markLabels.clear()}},b=Object.create(w);b.now=()=>m.now(),b.time=async(t,e)=>{w.start(t);const r=await e();return w.stop(t),r},b.line=(t=40)=>{console.log("-".repeat(t))},b.log=(...t)=>{console.log(...g,...t)};var k=function(t,e){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},k(t,e)};var x=function(){return x=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},x.apply(this,arguments)};function C(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{c(n.next(t))}catch(t){o(t)}}function s(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))}function T(t,e){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}"function"==typeof SuppressedError&&SuppressedError;var S=new(function(t){function e(){var e=t.call(this,[c,d,u,l,h,f,p,y,v],"0.2.0")||this;return e.init(),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}k(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.installPlugin=function(t){s(this,t)},e}(a));var A,P,M=(A=Array(4).fill(0).map((function(){return new DataView(new ArrayBuffer(8))})),P=0,function(t,e){if(e<0||e+4>t.length)throw new RangeError("Index out of range");var r=A[P];P=(P+1)%4;var n=new Uint8Array(r.buffer);return n[0]=t[e],n[1]=t[e+1],n[2]=t[e+2],n[3]=t[e+3],r.getFloat32(0,!0)});function R(t,e,r,n){for(var i=0,o=e;o<r;o+=n)i=(i<<5)-i+t[o],i|=0;return i=(i<<5)-i+r-e,(i|=0).toString(36)}var I=function(){function t(){this.caches=new Map,this.count=0}return Object.defineProperty(t.prototype,"size",{get:function(){return this.caches.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hitCount",{get:function(){return this.count},enumerable:!1,configurable:!0}),t.prototype.calculate=function(t,e){var r=t.pos,n=t.buf,i=Math.min(e,t.len);return R(n,r,i,Math.max(1,Math.floor((i-r)/100)))},t.prototype.has=function(t){var e=this.caches.has(t);return e&&this.count++,e},t.prototype.get=function(t){return this.caches.get(t)},t.prototype.set=function(t,e){this.caches.set(t,e)},t.prototype.clear=function(){this.count=0,this.caches.clear()},t}(),E=function(){function t(t){this.preflight=new I,this.buf=t,this.pos=0,this.len=t.length}return t.prototype.indexOutOfRange=function(t,e){return new RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)},t.prototype.readVarint32Slow=function(){var t=this.buf[this.pos++],e=127&t,r=7;do{if(this.pos>=this.len)throw this.indexOutOfRange(this);e|=(127&(t=this.buf[this.pos++]))<<r,r+=7}while(t>=128&&r<32);return e>>>0},t.prototype.end=function(t){return void 0===t?this.len:this.pos+t},t.prototype.uint32=function(){var t=this.buf[this.pos];return t<128?(this.pos++,t):this.readVarint32Slow()},t.prototype.int32=function(){return 0|this.uint32()},t.prototype.float=function(){var t=this.pos+4;if(t>this.len)throw this.indexOutOfRange(this,4);var e=M(this.buf,this.pos);return this.pos=t,e},t.prototype.getBytesRange=function(){var t=this.uint32(),e=this.pos,r=e+t;if(r>this.len)throw this.indexOutOfRange(this,t);return[e,r,t]},t.prototype.bytes=function(){var e=this.getBytesRange(),r=e[0],n=e[1],i=e[2];return this.pos+=i,0===i?t.EMPTY_UINT8ARRAY:this.buf.subarray(r,n)},t.prototype.string=function(){var t=this.getBytesRange(),e=t[0],r=t[1],n=S.decode.utf8(this.buf,e,r);return this.pos=r,n},t.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw this.indexOutOfRange(this,t);return this.pos+=t,this}for(var e=this.buf,r=this.len,n=this.pos;n<r;){if(!(128&e[n++]))return this.pos=n,this;if(n<r&&128&e[n]&&++n<r&&128&e[n]&&++n<r&&128&e[n]){for(n++;n<r&&128&e[n];)if(++n-this.pos>=10)throw Error("invalid varint encoding");if(n<r)return this.pos=n+1,this}}throw this.indexOutOfRange(this)},t.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},t.EMPTY_UINT8ARRAY=new Uint8Array(0),t}(),D=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0}return t.decode=function(e,r){var n=e.preflight,i=e.end(r),o=n.calculate(e,i);if(n.has(o))return e.pos=i,n.get(o);for(var a,s=new t;e.pos<i;)switch((a=e.uint32())>>>3){case 1:s.x=e.float();break;case 2:s.y=e.float();break;case 3:s.width=e.float();break;case 4:s.height=e.float();break;default:e.skipType(7&a)}return n.set(o,t.format(s)),n.get(o)},t.format=function(t){var e=t.x,r=void 0===e?0:e,n=t.y,i=void 0===n?0:n,o=t.width,a=void 0===o?0:o,s=t.height;return{x:r,y:i,width:a,height:void 0===s?0:s}},t}(),F=function(){function t(){this.a=0,this.b=0,this.c=0,this.d=0,this.tx=0,this.ty=0}return t.decode=function(e,r){for(var n,i=e.end(r),o=new t;e.pos<i;)switch((n=e.uint32())>>>3){case 1:o.a=e.float();break;case 2:o.b=e.float();break;case 3:o.c=e.float();break;case 4:o.d=e.float();break;case 5:o.tx=e.float();break;case 6:o.ty=e.float();break;default:e.skipType(7&n)}return o},t}(),O=function(){function t(){this.d=""}return t.decode=function(e,r){var n=e.preflight,i=e.end(r),o=n.calculate(e,i);if(n.has(o))return e.pos=i,n.get(o);for(var a,s=new t;e.pos<i;)if((a=e.uint32())>>>3==1)s.d=e.string();else e.skipType(7&a);return n.set(o,s),n.get(o)},t}(),U=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0,this.cornerRadius=0}return t.decode=function(e,r){var n=e.preflight,i=e.end(r),o=n.calculate(e,i);if(n.has(o))return e.pos=i,n.get(o);for(var a,s=new t;e.pos<i;)switch((a=e.uint32())>>>3){case 1:s.x=e.float();break;case 2:s.y=e.float();break;case 3:s.width=e.float();break;case 4:s.height=e.float();break;case 5:s.cornerRadius=e.float();break;default:e.skipType(7&a)}return n.set(o,s),n.get(o)},t}(),B=function(){function t(){this.x=0,this.y=0,this.radiusX=0,this.radiusY=0}return t.decode=function(e,r){var n=e.preflight,i=e.end(r),o=n.calculate(e,i);if(n.has(o))return e.pos=i,n.get(o);for(var a,s=new t;e.pos<i;)switch((a=e.uint32())>>>3){case 1:s.x=e.float();break;case 2:s.y=e.float();break;case 3:s.radiusX=e.float();break;case 4:s.radiusY=e.float();break;default:e.skipType(7&a)}return n.set(o,s),n.get(o)},t}(),L=function(){function t(){this.r=0,this.g=0,this.b=0,this.a=0}return t.decode=function(e,r){var n=e.preflight,i=e.end(r),o=n.calculate(e,i);if(n.has(o))return e.pos=i,n.get(o);for(var a,s=new t;e.pos<i;)switch((a=e.uint32())>>>3){case 1:s.r=e.float();break;case 2:s.g=e.float();break;case 3:s.b=e.float();break;case 4:s.a=e.float();break;default:e.skipType(7&a)}return n.set(o,t.format(s)),n.get(o)},t.format=function(t){var e=t.r,r=t.g,n=t.b,i=t.a;return"rgba(".concat(255*e|0,", ").concat(255*r|0,", ").concat(255*n|0,", ").concat(1*i|0,")")},t}(),_=function(){function t(){this.fill=null,this.stroke=null,this.strokeWidth=0,this.lineCap=0,this.lineJoin=0,this.miterLimit=0,this.lineDashI=0,this.lineDashII=0,this.lineDashIII=0}return t.decode=function(e,r){var n=e.preflight,i=e.end(r),o=n.calculate(e,i);if(n.has(o))return e.pos=i,n.get(o);for(var a,s=new t;e.pos<i;)switch((a=e.uint32())>>>3){case 1:s.fill=L.decode(e,e.uint32());break;case 2:s.stroke=L.decode(e,e.uint32());break;case 3:s.strokeWidth=e.float();break;case 4:s.lineCap=e.int32();break;case 5:s.lineJoin=e.int32();break;case 6:s.miterLimit=e.float();break;case 7:s.lineDashI=e.float();break;case 8:s.lineDashII=e.float();break;case 9:s.lineDashIII=e.float();break;default:e.skipType(7&a)}return n.set(o,t.format(s)),n.get(o)},t.format=function(t){var e,r,n=t.fill,i=t.stroke,o=t.strokeWidth,a=t.miterLimit,s=t.lineDashI,c=t.lineDashII,u=t.lineDashIII,l=[];switch(s>0&&l.push(s),c>0&&(l.length<1&&l.push(0),l.push(c)),u>0&&(l.length<2&&l.push(0,0),l.push(u)),t.lineCap){case 0:e="butt";break;case 1:e="round";break;case 2:e="square"}switch(t.lineJoin){case 0:r="miter";break;case 1:r="round";break;case 2:r="bevel"}return{lineDash:l,fill:n||null,stroke:i||null,lineCap:e,lineJoin:r,strokeWidth:o,miterLimit:a}},t}(),z=function(){function t(){this.type=0,this.shape=null,this.rect=null,this.ellipse=null,this.styles=null,this.transform=null}return t.decode=function(e,r){for(var n,i=e.end(r),o=new t;e.pos<i;)switch((n=e.uint32())>>>3){case 1:o.type=e.int32();break;case 2:o.shape=O.decode(e,e.uint32());break;case 3:o.rect=U.decode(e,e.uint32());break;case 4:o.ellipse=B.decode(e,e.uint32());break;case 10:o.styles=_.decode(e,e.uint32());break;case 11:o.transform=F.decode(e,e.uint32());break;default:e.skipType(7&n)}return t.format(o)},t.format=function(t){var e=t.type,r=t.shape,n=t.rect,i=t.ellipse,o=t.styles,a=t.transform;switch(e){case 0:return{type:"shape",path:r,styles:o,transform:a};case 1:return{type:"rect",path:n,styles:o,transform:a};case 2:return{type:"ellipse",path:i,styles:o,transform:a}}return null},t}(),H=function(){function t(){this.shapes=[],this.alpha=0,this.layout=null,this.transform=null,this.clipPath=""}return t.decode=function(e,r){for(var n,i=e.end(r),o=new t;e.pos<i;)switch((n=e.uint32())>>>3){case 1:o.alpha=e.float();break;case 2:o.layout=D.decode(e,e.uint32());break;case 3:o.transform=F.decode(e,e.uint32());break;case 4:o.clipPath=e.string();break;case 5:var a=z.decode(e,e.uint32());null!==a&&o.shapes.push(a);break;default:e.skipType(7&n)}return 0===o.shapes.length?o.shapes=e.preflight.get("latest_shapes"):e.preflight.set("latest_shapes",o.shapes),t.format(o)},t.format=function(e){return e.alpha<.05?t.HIDDEN_FRAME:{alpha:e.alpha,layout:e.layout,transform:e.transform,shapes:e.shapes}},t.HIDDEN_FRAME={alpha:0},t}(),W=function(){function t(){this.frames=[],this.imageKey="",this.matteKey=""}return t.decode=function(e,r){var n,i=e.end(r),o=new t;for(e.preflight.set("latest_shapes",[]);e.pos<i;)switch((n=e.uint32())>>>3){case 1:o.imageKey=e.string();break;case 2:o.frames&&o.frames.length||(o.frames=[]),o.frames.push(H.decode(e,e.uint32()));break;case 3:o.matteKey=e.string();break;default:e.skipType(7&n)}return t.format(o)},t.format=function(t){return{imageKey:t.imageKey,frames:t.frames}},t}(),Y=function(){function t(){this.viewBoxWidth=0,this.viewBoxHeight=0,this.fps=0,this.frames=0}return t.decode=function(e,r){for(var n,i=e.end(r),o=new t;e.pos<i;)switch((n=e.uint32())>>>3){case 1:o.viewBoxWidth=e.float();break;case 2:o.viewBoxHeight=e.float();break;case 3:o.fps=e.int32();break;case 4:o.frames=e.int32();break;default:e.skipType(7&n)}return o},t}(),V=function(){function t(){this.version="",this.params=null,this.images={},this.sprites=[]}return t.decode=function(e,r){for(var n,i,o,a,s,c=e.end(r),u=new t;e.pos<c;)switch((a=e.uint32())>>>3){case 1:u.version=e.string();break;case 2:u.params=Y.decode(e,e.uint32());break;case 3:for(o=e.uint32()+e.pos,n="",i=t.EMPTY_U8;e.pos<o;)switch((s=e.uint32())>>>3){case 1:n=e.string();break;case 2:i=e.bytes();break;default:e.skipType(7&s)}u.images[n]=i;break;case 4:u.sprites.push(W.decode(e,e.uint32()));break;default:e.skipType(7&a)}return t.format(u)},t.format=function(t){var e=t.version,r=t.images,n=t.sprites,i=t.params,o=i.fps,a=i.frames;return{version:e,filename:"",locked:!1,dynamicElements:{},size:{width:i.viewBoxWidth,height:i.viewBoxHeight},fps:o,frames:a,images:r,sprites:n}},t.EMPTY_U8=new Uint8Array(0),t}();var X=function(){function t(){this.pool=[]}return t.prototype.acquire=function(){var t=this.pool;return t.length>0?t.pop():{x:0,y:0,x1:0,y1:0,x2:0,y2:0}},t.prototype.release=function(t){t.x=t.y=t.x1=t.y1=t.x2=t.y2=0,this.pool.push(t)},t}(),j=function(){function t(t){this.context=t,this.pointPool=new X,this.lastResizeKey="",this.globalTransform=void 0,this.currentPoint=this.pointPool.acquire()}return t.parseSVGPath=function(e){for(var r=t.SVG_LETTER_REGEXP,n=[],i=0,o=0,a="",s="";i<e.length;){var c=e[i];switch(o){case 0:r.test(c)&&(a=c,o=1);break;case 1:r.test(c)?(n.push({command:a,args:s.trim()}),a=c,s=""):s+=c}i++}return a&&1===o&&n.push({command:a,args:s.trim()}),n},t.fillOrStroke=function(t,e){e&&(e.fill&&t.fill(),e.stroke&&t.stroke())},t.resetShapeStyles=function(t,e){e&&(t.strokeStyle=e.stroke||"transparent",e.strokeWidth>0&&(t.lineWidth=e.strokeWidth),e.miterLimit>0&&(t.miterLimit=e.miterLimit),e.lineCap&&(t.lineCap=e.lineCap),e.lineJoin&&(t.lineJoin=e.lineJoin),t.fillStyle=e.fill||"transparent",e.lineDash&&t.setLineDash(e.lineDash))},t.calculateScale=function(t,e,r){var n=e.width/e.height,i=r.width/r.height,o="aspect-fit"===t,a=function(t,e,r){return{scaleX:t,scaleY:t,translateX:e,translateY:r}};if(n>=i&&o||n<=i&&!o){var s=r.width/e.width;return a(s,0,(r.height-e.height*s)/2)}var c=r.height/e.height;return a(c,(r.width-e.width*c)/2,0)},t.prototype.setTransform=function(t){t&&this.context&&this.context.transform(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.prototype.drawBezier=function(e,r,n){var i=this.context,o=this.pointPool;if(this.currentPoint=o.acquire(),i.save(),t.resetShapeStyles(i,n),this.setTransform(r),i.beginPath(),e)for(var a=0,s=t.parseSVGPath(e);a<s.length;a++){var c=s[a],u=c.command,l=c.args;t.SVG_PATH.has(u)&&this.drawBezierElement(this.currentPoint,u,l.split(/[\s,]+/).filter(Boolean))}t.fillOrStroke(i,n),o.release(this.currentPoint),i.restore()},t.prototype.drawBezierElement=function(t,e,r){var n=this.context;switch(e){case"M":t.x=+r[0],t.y=+r[1],n.moveTo(t.x,t.y);break;case"m":t.x+=+r[0],t.y+=+r[1],n.moveTo(t.x,t.y);break;case"L":t.x=+r[0],t.y=+r[1],n.lineTo(t.x,t.y);break;case"l":t.x+=+r[0],t.y+=+r[1],n.lineTo(t.x,t.y);break;case"H":t.x=+r[0],n.lineTo(t.x,t.y);break;case"h":t.x+=+r[0],n.lineTo(t.x,t.y);break;case"V":t.y=+r[0],n.lineTo(t.x,t.y);break;case"v":t.y+=+r[0],n.lineTo(t.x,t.y);break;case"C":t.x1=+r[0],t.y1=+r[1],t.x2=+r[2],t.y2=+r[3],t.x=+r[4],t.y=+r[5],n.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y);break;case"c":t.x1=t.x+ +r[0],t.y1=t.y+ +r[1],t.x2=t.x+ +r[2],t.y2=t.y+ +r[3],t.x+=+r[4],t.y+=+r[5],n.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y);break;case"S":void 0!==t.x1&&void 0!==t.y1&&void 0!==t.x2&&void 0!==t.y2?(t.x1=t.x-t.x2+t.x,t.y1=t.y-t.y2+t.y,t.x2=+r[0],t.y2=+r[1],t.x=+r[2],t.y=+r[3],n.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y)):(t.x1=+r[0],t.y1=+r[1],t.x=+r[2],t.y=+r[3],n.quadraticCurveTo(t.x1,t.y1,t.x,t.y));break;case"s":void 0!==t.x1&&void 0!==t.y1&&void 0!==t.x2&&void 0!==t.y2?(t.x1=t.x-t.x2+t.x,t.y1=t.y-t.y2+t.y,t.x2=t.x+ +r[0],t.y2=t.y+ +r[1],t.x+=+r[2],t.y+=+r[3],n.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y)):(t.x1=t.x+ +r[0],t.y1=t.y+ +r[1],t.x+=+r[2],t.y+=+r[3],n.quadraticCurveTo(t.x1,t.y1,t.x,t.y));break;case"Q":t.x1=+r[0],t.y1=+r[1],t.x=+r[2],t.y=+r[3],n.quadraticCurveTo(t.x1,t.y1,t.x,t.y);break;case"q":t.x1=t.x+ +r[0],t.y1=t.y+ +r[1],t.x+=+r[2],t.y+=+r[3],n.quadraticCurveTo(t.x1,t.y1,t.x,t.y);break;case"Z":case"z":n.closePath()}},t.prototype.drawEllipse=function(e,r,n,i,o,a){var s=this.context;s.save(),t.resetShapeStyles(s,a),this.setTransform(o);var c=2*n,u=2*i,l=.5522848,h=c/2*l,f=u/2*l,p=(e-=n)+c,d=(r-=i)+u,y=e+c/2,v=r+u/2;s.beginPath(),s.moveTo(e,v),s.bezierCurveTo(e,v-f,y-h,r,y,r),s.bezierCurveTo(y+h,r,p,v-f,p,v),s.bezierCurveTo(p,v+f,y+h,d,y,d),s.bezierCurveTo(y-h,d,e,v+f,e,v),t.fillOrStroke(s,a),s.restore()},t.prototype.drawRect=function(e,r,n,i,o,a,s){var c=this.context;c.save(),t.resetShapeStyles(c,s),this.setTransform(a);var u=o;n<2*u&&(u=n/2),i<2*u&&(u=i/2),c.beginPath(),c.moveTo(e+u,r),c.arcTo(e+n,r,e+n,r+i,u),c.arcTo(e+n,r+i,e,r+i,u),c.arcTo(e,r+i,e,r,u),c.arcTo(e,r,e+n,r,u),c.closePath(),t.fillOrStroke(c,s),c.restore()},t.prototype.drawShape=function(t){var e,r,n,i,o,a,s,c,u,l=t.type,h=t.path,f=t.transform,p=t.styles;switch(l){case"shape":this.drawBezier(h.d,f,p);break;case"ellipse":this.drawEllipse(null!==(e=h.x)&&void 0!==e?e:0,null!==(r=h.y)&&void 0!==r?r:0,null!==(n=h.radiusX)&&void 0!==n?n:0,null!==(i=h.radiusY)&&void 0!==i?i:0,f,p);break;case"rect":this.drawRect(null!==(o=h.x)&&void 0!==o?o:0,null!==(a=h.y)&&void 0!==a?a:0,null!==(s=h.width)&&void 0!==s?s:0,null!==(c=h.height)&&void 0!==c?c:0,null!==(u=h.cornerRadius)&&void 0!==u?u:0,f,p)}},t.prototype.drawSprite=function(t,e,r){if(0!==t.alpha){var n=this.context,i=t,o=i.alpha,a=i.transform,s=i.layout,c=i.shapes,u=null!=a?a:{},l=u.a,h=void 0===l?1:l,f=u.b,p=void 0===f?0:f,d=u.c,y=void 0===d?0:d,v=u.d,m=void 0===v?1:v,g=u.tx,w=void 0===g?0:g,b=u.ty,k=void 0===b?0:b;n.save(),this.setTransform(this.globalTransform),n.globalAlpha=o,n.transform(h,p,y,m,w,k),e&&n.drawImage(e,0,0,s.width,s.height),r&&n.drawImage(r,(s.width-r.width)/2,(s.height-r.height)/2);for(var x=0;x<c.length;x++)this.drawShape(c[x]);n.restore()}},t.prototype.resize=function(e,r,n){var i=n.width,o=n.height,a=r.width,s=r.height,c="".concat(e,"-").concat(a,"-").concat(s,"-").concat(i,"-").concat(o),u=this.globalTransform;if(this.lastResizeKey!==c||!u){var l={scaleX:1,scaleY:1,translateX:0,translateY:0};"fill"===e?(l.scaleX=i/a,l.scaleY=o/s):l=t.calculateScale(e,r,n),this.lastResizeKey=c,this.globalTransform={a:l.scaleX,b:0,c:0,d:l.scaleY,tx:l.translateX,ty:l.translateY}}},t.prototype.render=function(t,e,r,n,i,o){for(var a,s,c,u,l=i;l<o;l++)s=(a=t.sprites[l]).imageKey,c=e.get(s),u=r.get(s),this.drawSprite(a.frames[n],c,u)},t.prototype.destroy=function(){this.globalTransform=void 0,this.lastResizeKey="",this.context=null},t.SVG_PATH=new Set(["M","L","H","V","Z","C","S","Q","m","l","h","v","z","c","s","q"]),t.SVG_LETTER_REGEXP=/[a-zA-Z]/,t}(),N=function(){function t(){this.isRunning=!1,this.startTime=0,this.duration=0,this.loopStart=0,this.loopDuration=0,this.onAnimate=S.noop,this.onStart=S.noop,this.onUpdate=S.noop,this.onEnd=S.noop}return t.prototype.setConfig=function(t,e,r,n){this.duration=t,this.loopStart=e,this.loopDuration=t*r+n-e},t.prototype.start=function(){this.isRunning=!0,this.startTime=S.now(),this.onStart(),this.doFrame()},t.prototype.resume=function(){this.isRunning=!0,this.startTime=S.now(),this.doFrame()},t.prototype.pause=function(){this.isRunning=!1,this.loopStart=(S.now()-this.startTime+this.loopStart)%this.duration},t.prototype.stop=function(){this.isRunning=!1,this.loopStart=0},t.prototype.doFrame=function(){var t=this;this.isRunning&&(this.doDeltaTime(S.now()-this.startTime),this.isRunning&&this.onAnimate((function(){return t.doFrame()})))},t.prototype.doDeltaTime=function(t){var e,r=this,n=r.duration,i=r.loopStart,o=!1;t>=r.loopDuration?(e=1,o=!0,this.stop()):e=(t+i)%n/n,this.onUpdate(e),!this.isRunning&&o&&this.onEnd()},t}(),$=Uint8Array,q=Uint16Array,K=Int32Array,G=new $([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),J=new $([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Q=new $([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Z=function(t,e){for(var r=new q(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];var i=new K(r[30]);for(n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return{b:r,r:i}},et=Z(G,2),rt=et.b,nt=et.r;rt[28]=258,nt[258]=28;for(var it=Z(J,0),ot=it.b,at=it.r,st=new q(32768),ct=0;ct<32768;++ct){var ut=(43690&ct)>>1|(21845&ct)<<1;ut=(61680&(ut=(52428&ut)>>2|(13107&ut)<<2))>>4|(3855&ut)<<4,st[ct]=((65280&ut)>>8|(255&ut)<<8)>>1}var lt=function(t,e,r){for(var n=t.length,i=0,o=new q(e);i<n;++i)t[i]&&++o[t[i]-1];var a,s=new q(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;if(r){a=new q(1<<e);var c=15-e;for(i=0;i<n;++i)if(t[i])for(var u=i<<4|t[i],l=e-t[i],h=s[t[i]-1]++<<l,f=h|(1<<l)-1;h<=f;++h)a[st[h]>>c]=u}else for(a=new q(n),i=0;i<n;++i)t[i]&&(a[i]=st[s[t[i]-1]++]>>15-t[i]);return a},ht=new $(288);for(ct=0;ct<144;++ct)ht[ct]=8;for(ct=144;ct<256;++ct)ht[ct]=9;for(ct=256;ct<280;++ct)ht[ct]=7;for(ct=280;ct<288;++ct)ht[ct]=8;var ft=new $(32);for(ct=0;ct<32;++ct)ft[ct]=5;var pt=lt(ht,9,0),dt=lt(ht,9,1),yt=lt(ft,5,0),vt=lt(ft,5,1),mt=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},gt=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(7&e)&r},wt=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(7&e)},bt=function(t){return(t+7)/8|0},kt=function(t,e,r){return(null==r||r>t.length)&&(r=t.length),new $(t.subarray(e,r))},xt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ct=function(t,e,r){var n=new Error(e||xt[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Ct),!r)throw n;return n},Tt=function(t,e,r){r<<=7&e;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},St=function(t,e,r){r<<=7&e;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},At=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,o=r.slice();if(!i)return{t:Ft,l:0};if(1==i){var a=new $(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort((function(t,e){return t.f-e.f})),r.push({s:-1,f:25001});var s=r[0],c=r[1],u=0,l=1,h=2;for(r[0]={s:-1,f:s.f+c.f,l:s,r:c};l!=i-1;)s=r[r[u].f<r[h].f?u++:h++],c=r[u!=l&&r[u].f<r[h].f?u++:h++],r[l++]={s:-1,f:s.f+c.f,l:s,r:c};var f=o[0].s;for(n=1;n<i;++n)o[n].s>f&&(f=o[n].s);var p=new q(f+1),d=Pt(r[l-1],p,0);if(d>e){n=0;var y=0,v=d-e,m=1<<v;for(o.sort((function(t,e){return p[e.s]-p[t.s]||t.f-e.f}));n<i;++n){var g=o[n].s;if(!(p[g]>e))break;y+=m-(1<<d-p[g]),p[g]=e}for(y>>=v;y>0;){var w=o[n].s;p[w]<e?y-=1<<e-p[w]++-1:++n}for(;n>=0&&y;--n){var b=o[n].s;p[b]==e&&(--p[b],++y)}d=e}return{t:new $(p),l:d}},Pt=function(t,e,r){return-1==t.s?Math.max(Pt(t.l,e,r+1),Pt(t.r,e,r+1)):e[t.s]=r},Mt=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new q(++e),n=0,i=t[0],o=1,a=function(t){r[n++]=t},s=1;s<=e;++s)if(t[s]==i&&s!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(i),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(i);o=1,i=t[s]}return{c:r.subarray(0,n),n:e}},Rt=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},It=function(t,e,r){var n=r.length,i=bt(e+2);t[i]=255&n,t[i+1]=n>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var o=0;o<n;++o)t[i+o+4]=r[o];return 8*(i+4+n)},Et=function(t,e,r,n,i,o,a,s,c,u,l){Tt(e,l++,r),++i[256];for(var h=At(i,15),f=h.t,p=h.l,d=At(o,15),y=d.t,v=d.l,m=Mt(f),g=m.c,w=m.n,b=Mt(y),k=b.c,x=b.n,C=new q(19),T=0;T<g.length;++T)++C[31&g[T]];for(T=0;T<k.length;++T)++C[31&k[T]];for(var S=At(C,7),A=S.t,P=S.l,M=19;M>4&&!A[Q[M-1]];--M);var R,I,E,D,F=u+5<<3,O=Rt(i,ht)+Rt(o,ft)+a,U=Rt(i,f)+Rt(o,y)+a+14+3*M+Rt(C,A)+2*C[16]+3*C[17]+7*C[18];if(c>=0&&F<=O&&F<=U)return It(e,l,t.subarray(c,c+u));if(Tt(e,l,1+(U<O)),l+=2,U<O){R=lt(f,p,0),I=f,E=lt(y,v,0),D=y;var B=lt(A,P,0);Tt(e,l,w-257),Tt(e,l+5,x-1),Tt(e,l+10,M-4),l+=14;for(T=0;T<M;++T)Tt(e,l+3*T,A[Q[T]]);l+=3*M;for(var L=[g,k],_=0;_<2;++_){var z=L[_];for(T=0;T<z.length;++T){var H=31&z[T];Tt(e,l,B[H]),l+=A[H],H>15&&(Tt(e,l,z[T]>>5&127),l+=z[T]>>12)}}}else R=pt,I=ht,E=yt,D=ft;for(T=0;T<s;++T){var W=n[T];if(W>255){St(e,l,R[(H=W>>18&31)+257]),l+=I[H+257],H>7&&(Tt(e,l,W>>23&31),l+=G[H]);var Y=31&W;St(e,l,E[Y]),l+=D[Y],Y>3&&(St(e,l,W>>5&8191),l+=J[Y])}else St(e,l,R[W]),l+=I[W]}return St(e,l,R[256]),l+I[256]},Dt=new K([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ft=new $(0),Ot=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,o=0|r.length,a=0;a!=o;){for(var s=Math.min(a+2655,o);a<s;++a)i+=n+=r[a];n=(65535&n)+15*(n>>16),i=(65535&i)+15*(i>>16)}t=n,e=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(e%=65521))<<8|e>>8}}},Ut=function(t,e,r,n,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),a=new $(o.length+t.length);a.set(o),a.set(t,o.length),t=a,i.w=o.length}return function(t,e,r,n,i,o){var a=o.z||t.length,s=new $(n+a+5*(1+Math.ceil(a/7e3))+i),c=s.subarray(n,s.length-i),u=o.l,l=7&(o.r||0);if(e){l&&(c[0]=o.r>>3);for(var h=Dt[e-1],f=h>>13,p=8191&h,d=(1<<r)-1,y=o.p||new q(32768),v=o.h||new q(d+1),m=Math.ceil(r/3),g=2*m,w=function(e){return(t[e]^t[e+1]<<m^t[e+2]<<g)&d},b=new K(25e3),k=new q(288),x=new q(32),C=0,T=0,S=o.i||0,A=0,P=o.w||0,M=0;S+2<a;++S){var R=w(S),I=32767&S,E=v[R];if(y[I]=E,v[R]=I,P<=S){var D=a-S;if((C>7e3||A>24576)&&(D>423||!u)){l=Et(t,c,0,b,k,x,T,A,M,S-M,l),A=C=T=0,M=S;for(var F=0;F<286;++F)k[F]=0;for(F=0;F<30;++F)x[F]=0}var O=2,U=0,B=p,L=I-E&32767;if(D>2&&R==w(S-L))for(var _=Math.min(f,D)-1,z=Math.min(32767,S),H=Math.min(258,D);L<=z&&--B&&I!=E;){if(t[S+O]==t[S+O-L]){for(var W=0;W<H&&t[S+W]==t[S+W-L];++W);if(W>O){if(O=W,U=L,W>_)break;var Y=Math.min(L,W-2),V=0;for(F=0;F<Y;++F){var X=S-L+F&32767,j=X-y[X]&32767;j>V&&(V=j,E=X)}}}L+=(I=E)-(E=y[I])&32767}if(U){b[A++]=268435456|nt[O]<<18|at[U];var N=31&nt[O],Q=31&at[U];T+=G[N]+J[Q],++k[257+N],++x[Q],P=S+O,++C}else b[A++]=t[S],++k[t[S]]}}for(S=Math.max(S,P);S<a;++S)b[A++]=t[S],++k[t[S]];l=Et(t,c,u,b,k,x,T,A,M,S-M,l),u||(o.r=7&l|c[l/8|0]<<3,l-=7,o.h=v,o.p=y,o.i=S,o.w=P)}else{for(S=o.w||0;S<a+u;S+=65535){var Z=S+65535;Z>=a&&(c[l/8|0]=u,Z=a),l=It(c,l+1,t.subarray(S,Z))}o.i=a}return kt(s,0,n+bt(l)+i)}(t,null==e.level?6:e.level,null==e.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):20:12+e.mem,r,n,i)},Bt=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8};function Lt(t,e){void 0===e&&(e={});var r=Ot();r.p(t);var n=Ut(t,e,e.dictionary?6:2,4);return function(t,e){var r,n,i=null!==(r=e.level)&&void 0!==r?r:0,o=0==i?0:i<6?1:9==i?3:2;if(t[0]=120,t[1]=o<<6|((null!==(n=e.dictionary)&&void 0!==n?n:0)&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=Ot();a.p(e.dictionary),Bt(t,2,a.d())}}(n,e),Bt(n,n.length-4,r.d()),n}function _t(t,e){return void 0===e&&(e={}),function(t,e,r,n){var i=t.length,o=n?n.length:0;if(!i||e.f&&!e.l)return r||new $(0);var a=!r,s=a||2!=e.i,c=e.i;a&&(r=new $(3*i));var u=function(t){var e=r.length;if(t>e){var n=new $(Math.max(2*e,t));n.set(r),r=n}},l=e.f||0,h=e.p||0,f=e.b||0,p=e.l,d=e.d,y=e.m,v=e.n,m=8*i;do{if(!p){l=gt(t,h,1);var g=gt(t,h+1,3);if(h+=3,!g){var w=t[(I=bt(h)+4)-4]|t[I-3]<<8,b=I+w;if(b>i){c&&Ct(0);break}s&&u(f+w),r.set(t.subarray(I,b),f),e.b=f+=w,e.p=h=8*b,e.f=l;continue}if(1==g)p=dt,d=vt,y=9,v=5;else if(2==g){var k=gt(t,h,31)+257,x=gt(t,h+10,15)+4,C=k+gt(t,h+5,31)+1;h+=14;for(var T=new $(C),S=new $(19),A=0;A<x;++A)S[Q[A]]=gt(t,h+3*A,7);h+=3*x;var P=mt(S),M=(1<<P)-1,R=lt(S,P,1);for(A=0;A<C;){var I,E=R[gt(t,h,M)];if(h+=15&E,(I=E>>4)<16)T[A++]=I;else{var D=0,F=0;for(16==I?(F=3+gt(t,h,3),h+=2,D=T[A-1]):17==I?(F=3+gt(t,h,7),h+=3):18==I&&(F=11+gt(t,h,127),h+=7);F--;)T[A++]=D}}var O=T.subarray(0,k),U=T.subarray(k);y=mt(O),v=mt(U),p=lt(O,y,1),d=lt(U,v,1)}else Ct(1);if(h>m){c&&Ct(0);break}}s&&u(f+131072);for(var B=(1<<y)-1,L=(1<<v)-1,_=h;;_=h){var z=(D=p[wt(t,h)&B])>>4;if((h+=15&D)>m){c&&Ct(0);break}if(D||Ct(2),z<256)r[f++]=z;else{if(256==z){_=h,p=void 0;break}var H=z-254;if(z>264){var W=G[A=z-257];H=gt(t,h,(1<<W)-1)+rt[A],h+=W}var Y=d[wt(t,h)&L],V=Y>>4;if(Y||Ct(3),h+=15&Y,U=ot[V],V>3&&(W=J[V],U+=wt(t,h)&(1<<W)-1,h+=W),h>m){c&&Ct(0);break}s&&u(f+131072);var X=f+H;if(f<U){var j=o-U,N=Math.min(U,X);for(j+f<0&&Ct(3);f<N;++f)r[f]=n[j+f]}for(;f<X;++f)r[f]=r[f-U]}}e.l=p,e.p=_,e.b=f,e.f=l,p&&(l=1,e.m=y,e.d=d,e.n=v)}while(!l);return f!=r.length&&a?kt(r,0,f):r.subarray(0,f)}(t.subarray((r=t,n=e.dictionary,(8!=(15&r[0])||r[0]>>4>7||(r[0]<<8|r[1])%31)&&Ct(6,"invalid zlib data"),(r[1]>>5&1)==+!n&&Ct(6,"invalid zlib data: "+(32&r[1]?"need":"unexpected")+" dictionary"),2+(r[1]>>3&4)),-4),{i:2},e&&e.out,e&&e.dictionary);var r,n}for(var zt=function(){function t(){this.caches=new Map}return t.prototype.calculate=function(e){if(!(e instanceof Uint8Array))throw new TypeError("Input must be a Uint8Array");var r=this.caches,n=S.decode.bytesToString(e);if(r.has(n))return r.get(n);for(var i=t.WHITE_COLOR,o=0;o<e.length;o++)i=i>>>8^t.table[255&(i^e[o])];return r.set(n,(i^t.WHITE_COLOR)>>>0),r.get(n)},t.prototype.clear=function(){this.caches.clear()},t.table=Uint32Array.from(Array(256),(function(t,e){for(var r=e,n=0;n<8;n++)r=1&r?3988292384^r>>>1:r>>>1;return r>>>0})),t.WHITE_COLOR=4294967295,t}(),Ht=function(){function t(t,e){this.width=t,this.height=e,this.crc32=new zt,this.view=new DataView(new ArrayBuffer(4*t*e))}return t.prototype.createChunk=function(t,e){var r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,e.length,!1);var n=Uint8Array.from(t,(function(t){return t.charCodeAt(0)})),i=new Uint8Array(n.length+e.length);i.set(n),i.set(e,n.length);var o=new Uint8Array(4);new DataView(o.buffer).setUint32(0,this.crc32.calculate(i)>>>0,!1);var a=new Uint8Array(r.length+i.length+o.length);return a.set(r),a.set(i,r.length),a.set(o,r.length+i.length),a},t.prototype.createIHDRChunk=function(){var t=new Uint8Array(13),e=new DataView(t.buffer);return e.setUint32(0,this.width,!1),e.setUint32(4,this.height,!1),e.setUint8(8,8),e.setUint8(9,6),e.setUint8(10,0),e.setUint8(11,0),e.setUint8(12,0),this.createChunk("IHDR",t)},t.prototype.createIDATChunk=function(){for(var t,e,r=this.width,n=this.height,i=4*r,o=i+1,a=new Uint8Array(o*n),s=new Uint8Array(this.view.buffer),c=0;c<n;c++)a[t=c*o]=0,e=c*i,a.set(s.subarray(e,e+i),t+1);return this.createChunk("IDAT",Lt(a))},t.prototype.setPixel=function(t,e,r){this.view.setUint32(4*(e*this.width+t),r,!1)},t.prototype.write=function(t){for(var e,r,n=this.width,i=this.height,o=0;o<i;o++)for(var a=0;a<n;a++)r=(t[e=4*(o*n+a)]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0,this.setPixel(a,o,r);return this},t.prototype.flush=function(){var t=this.createIHDRChunk(),e=this.createIDATChunk(),r=this.createChunk("IEND",new Uint8Array(0)),n=new Uint8Array(8+t.length+e.length+r.length),i=0;return n.set(new Uint8Array([137,80,78,71,13,10,26,10]),i),i+=8,n.set(t,i),i+=t.length,n.set(e,i),i+=e.length,n.set(r,i),this.crc32.clear(),n},t}(),Wt=function(){function t(){this.buffer=[],this.lengthInBits=0}return t.prototype.getAt=function(t){var e=~~(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},t.prototype.put=function(t,e){for(var r=0;r<e;r++)this.putBit(1==(t>>>e-r-1&1))},t.prototype.putBit=function(t){var e=this.lengthInBits,r=this.buffer,n=~~(e/8);r.length<=n&&r.push(0),t&&(r[n]|=128>>>e%8),this.lengthInBits+=1},t}(),Yt=1,Vt=2,Xt=4,jt=8,Nt={L:1,M:0,Q:3,H:2},$t=0,qt=1,Kt=2,Gt=3,Jt=4,Qt=5,Zt=6,te=7,ee=function(){function t(t){for(var e=[],r=0;r<t.length;r++){var n=[],i=t.charCodeAt(r);i>65536?(n[0]=240|(1835008&i)>>>18,n[1]=128|(258048&i)>>>12,n[2]=128|(4032&i)>>>6,n[3]=128|63&i):i>2048?(n[0]=224|(61440&i)>>>12,n[1]=128|(4032&i)>>>6,n[2]=128|63&i):i>128?(n[0]=192|(1984&i)>>>6,n[1]=128|63&i):n[0]=i,e.push(n)}this.bytes=e.flat(1);var o=this.bytes;o.length!==t.length&&(o.unshift(191),o.unshift(187),o.unshift(239))}return Object.defineProperty(t.prototype,"mode",{get:function(){return Xt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.bytes.length},enumerable:!1,configurable:!0}),t.prototype.write=function(t){for(var e=this.bytes,r=0;r<e.length;r++)t.put(e[r],8)},t}(),re=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],ne=function(){function t(){}return t.prototype.getRSBlockTable=function(t,e){var r=4*(t-1);switch(e){case Nt.L:return re[r+0];case Nt.M:return re[r+1];case Nt.Q:return re[r+2];case Nt.H:return re[r+3];default:throw new Error("bad rs block @ typeNumber:".concat(t,"/errorCorrectLevel: ").concat(e))}},t.prototype.getRSBlocks=function(t,e){for(var r=this.getRSBlockTable(t,e),n=r.length/3,i=[],o=0;o<n;o++)for(var a=r[3*o],s=r[3*o+1],c=r[3*o+2],u=0;u<a;u++)i.push({totalCount:s,dataCount:c});return i},t}(),ie=new Array(256),oe=new Array(256),ae=0;ae<8;ae++)ie[ae]=1<<ae;for(ae=8;ae<256;ae++)ie[ae]=ie[ae-4]^ie[ae-5]^ie[ae-6]^ie[ae-8];for(ae=0;ae<255;ae++)oe[ie[ae]]=ae;var se=function(t){if(t<1)throw new Error("glog(".concat(t,")"));return oe[t]},ce=function(t){return t<0?t=255+t%255:t>255&&(t%=255),ie[t]},ue=function(){function t(t,e){var r=t.length;if(void 0===r)throw new Error("".concat(r,"/").concat(e));for(var n=0;n<r&&0===t[n];)n++;var i=r-n;this.num=new Array(i+e);for(var o=0;o<i;o++)this.num[o]=t[o+n]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.num.length},enumerable:!1,configurable:!0}),t.prototype.getAt=function(t){return this.num[t]},t.prototype.multiply=function(e){for(var r=se,n=ce,i=[],o=0;o<this.length;o++)for(var a=0;a<e.length;a++)i[o+a]^=n(r(this.getAt(o))+r(e.getAt(a)));return new t(i,0)},t.prototype.mod=function(e){if(this.length-e.length<0)return this;for(var r=se,n=ce,i=r(this.getAt(0))-r(e.getAt(0)),o=[],a=0;a<this.length;a++){var s=this.getAt(a);o[a]=a<e.length?s^n(r(e.getAt(a))+i):s}return new t(o,0).mod(e)},t}(),le=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],he=function(t){return 0===t?0:Math.log2(t)},fe=he(1335),pe=he(7973),de=function(t){for(var e=t<<10;he(e)-fe>=0;)e^=1335<<he(e)-fe;return 21522^(t<<10|e)},ye=function(t){for(var e=t<<12;he(e)-pe>=0;)e^=7973<<he(e)-pe;return t<<12|e},ve=function(t){return le[t-1]},me=function(t){switch(t){case $t:return function(t,e){return(t+e)%2==0};case qt:return function(t){return t%2==0};case Kt:return function(t,e){return e%3==0};case Gt:return function(t,e){return(t+e)%3==0};case Jt:return function(t,e){return(~~(t/2)+~~(e/3))%2==0};case Qt:return function(t,e){return t*e%2+t*e%3==0};case Zt:return function(t,e){return(t*e%2+t*e%3)%2==0};case te:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw new Error("bad maskPattern: ".concat(t))}},ge=function(t){for(var e=new ue([1],0),r=0;r<t;r++)e=e.multiply(new ue([1,ce(r)],0));return e},we=function(t,e){var r=Yt,n=Vt,i=Xt,o=jt;if(e<1||e>40)throw new Error("type: ".concat(e));if(e>=1&&e<10)switch(t){case r:return 10;case n:return 9;case i:case o:return 8}if(e<27)switch(t){case r:return 12;case n:return 11;case i:return 16;case o:return 10}if(e<=40)switch(t){case r:return 14;case n:return 13;case i:return 16;case o:return 12}throw new Error("mode: ".concat(t))},be=function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n++)for(var i=0;i<e;i++){for(var o=t.isDark(n,i),a=0,s=-1;s<=1;s++){var c=n+s;if(!(c<0||e<=c))for(var u=-1;u<=1;u++){var l=i+u;l<0||e<=l||(0===s&&0===u||o===t.isDark(c,l)&&a++)}}a>5&&(r+=a+3-5)}for(n=0;n<e-1;n++)for(i=0;i<e-1;i++){var h=0;t.isDark(n,i)&&h++,t.isDark(n+1,i)&&h++,t.isDark(n,i+1)&&h++,t.isDark(n+1,i+1)&&h++,0!==h&&4!==h||(r+=3)}for(n=0;n<e;n++)for(i=0;i<e-6;i++)t.isDark(n,i)&&!t.isDark(n,i+1)&&t.isDark(n,i+2)&&t.isDark(n,i+3)&&t.isDark(n,i+4)&&!t.isDark(n,i+5)&&t.isDark(n,i+6)&&(r+=40);for(i=0;i<e;i++)for(n=0;n<e-6;n++)t.isDark(n,i)&&!t.isDark(n+1,i)&&t.isDark(n+2,i)&&t.isDark(n+3,i)&&t.isDark(n+4,i)&&!t.isDark(n+5,i)&&t.isDark(n+6,i)&&(r+=40);var f=0;for(i=0;i<e;i++)for(n=0;n<e;n++)t.isDark(n,i)&&f++;return r+10*(Math.abs(100*f/Math.pow(e,2)-50)/5)},ke=function(){function t(t,e){this.typeNumber=t,this.modules=[],this.moduleCount=0,this.dataCache=null,this.dataList=[],this.errorCorrectLevel=Nt[e]}return t.prototype.makeImpl=function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=function(t){for(var e=[],r=0;r<t;r++){e[r]=[];for(var n=0;n<t;n++)e[r][n]=null}return e}(this.moduleCount);var r=this.moduleCount-7;this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(r,0),this.setupPositionProbePattern(0,r),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null===this.dataCache&&(this.dataCache=this.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},t.prototype.setupPositionProbePattern=function(t,e){for(var r=this.modules,n=this.moduleCount,i=-1;i<=7;i++){var o=t+i;if(!(o<=-1||n<=o))for(var a=-1;a<=7;a++){var s=e+a;s<=-1||n<=s||(r[o][s]=i>=0&&i<=6&&(0===a||6===a)||a>=0&&a<=6&&(0===i||6===i)||i>=2&&i<=4&&a>=2&&a<=4)}}},t.prototype.setupPositionAdjustPattern=function(){for(var t=this.typeNumber,e=this.modules,r=ve(t),n=r.length,i=0;i<n;i++)for(var o=0;o<n;o++){var a=r[i],s=r[o];if(null==e[a][s])for(var c=-2;c<=2;c++)for(var u=-2;u<=2;u++)e[a+c][s+u]=-2===c||2===c||-2===u||2===u||0===c&&0===u}},t.prototype.setupTimingPattern=function(){for(var t=this.moduleCount,e=this.modules,r=t-8,n=8;n<r;n++)null==e[n][6]&&(e[n][6]=n%2==0);for(var i=8;i<r;i++)null==e[6][i]&&(e[6][i]=i%2==0)},t.prototype.setupTypeInfo=function(t,e){for(var r=this,n=r.errorCorrectLevel,i=r.modules,o=r.moduleCount,a=de(n<<3|e),s=0;s<15;s++){var c=!t&&1==(a>>s&1);s<6?i[s][8]=c:s<8?i[s+1][8]=c:i[o-15+s][8]=c}for(s=0;s<15;s++){c=!t&&1==(a>>s&1);s<8?i[8][o-s-1]=c:s<9?i[8][15-s]=c:i[8][15-s-1]=c}i[o-8][8]=!t},t.prototype.getBestMaskPattern=function(){for(var t=0,e=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=be(this);(0===r||t>n)&&(t=n,e=r)}return e},t.prototype.setupTypeNumber=function(t){for(var e=this,r=e.typeNumber,n=e.modules,i=e.moduleCount,o=ye(r),a=0;a<18;a++){var s=!t&&1==(o>>a&1);n[~~(a/3)][a%3+i-8-3]=s,n[a%3+i-8-3][~~(a/3)]=s}},t.prototype.createData=function(t,e,r){for(var n=(new ne).getRSBlocks(t,e),i=new Wt,o=0;o<r.length;o++){var a=r[o];i.put(a.mode,4),i.put(a.length,we(a.mode,t)),a.write(i)}var s=0;for(o=0;o<n.length;o++)s+=n[o].dataCount;var c=8*s;if(i.lengthInBits>c)throw new Error("code length overflow. (".concat(i.lengthInBits," > ").concat(c,")"));for(i.lengthInBits+4<=c&&i.put(0,4);i.lengthInBits%8!=0;)i.putBit(!1);for(;!(i.lengthInBits>=c||(i.put(236,8),i.lengthInBits>=c));)i.put(17,8);return this.createBytes(i,n)},t.prototype.mapData=function(t,e){for(var r=this.modules,n=this.moduleCount,i=me(e),o=-1,a=n-1,s=7,c=0,u=a;u>0;u-=2)for(6===u&&(u-=1);;){for(var l=0;l<2;l++)if(null==r[a][u-l]){var h=!1;c<t.length&&(h=1==(t[c]>>>s&1)),i(a,u-l)&&(h=!h),r[a][u-l]=h,-1===--s&&(c++,s=7)}if((a+=o)<0||n<=a){a-=o,o=-o;break}}},t.prototype.createBytes=function(t,e){for(var r=[],n=[],i=0,o=0,a=0,s=0;s<e.length;s++){var c=e[s].dataCount,u=e[s].totalCount-c;o=Math.max(o,c),a=Math.max(a,u),r[s]=[];for(var l=0;l<c;l++)r[s][l]=255&t.buffer[l+i];i+=c;var h=ge(u),f=new ue(r[s],h.length-1).mod(h);n[s]=new Array(h.length-1);for(l=0;l<n[s].length;l++){var p=l+f.length-n[s].length;n[s][l]=p>=0?f.getAt(p):0}}var d=0;for(l=0;l<e.length;l++)d+=e[l].totalCount;var y=new Array(d),v=0;for(l=0;l<o;l++)for(s=0;s<e.length;s++)l<r[s].length&&(y[v++]=r[s][l]);for(l=0;l<a;l++)for(s=0;s<e.length;s++)l<n[s].length&&(y[v++]=n[s][l]);return y},t.prototype.isDark=function(t,e){var r=this.moduleCount;if(t<0||r<=t||e<0||r<=e)throw new Error("".concat(t,", ").concat(e));return this.modules[t][e]},t.prototype.addData=function(t){this.dataList.push(new ee(t)),this.dataCache=null},t.prototype.getModuleCount=function(){return this.moduleCount},t.prototype.make=function(){this.makeImpl(!1,this.getBestMaskPattern())},t}(),xe=function(){function t(t){this.painter=t,this.caches=[],this.dynamicMaterials=new Map,this.materials=new Map,this.point=0}return t.isBitmap=function(t){return"h5"===S.globals.env&&t instanceof ImageBitmap},t.releaseOne=function(e){t.isBitmap(e)?e.close():""!==e.src&&("weapp"===S.globals.env&&e.src.includes(S.path.USER_DATA_PATH)&&S.local.remove(e.src),S.image.release(e))},t.prototype.createImage=function(){var t=null;return this.point>0&&(this.point--,t=this.caches.shift()),t||(t=S.image.create(this.painter.X)),this.caches.push(t),t},t.prototype.inertBitmapIntoCaches=function(e){t.isBitmap(e)&&this.caches.push(e)},t.prototype.loadExtImage=function(t,e){var r=this;return S.image.load((function(){return r.createImage()}),t,S.path.resolve(e,"ext")).then((function(t){return r.inertBitmapIntoCaches(t),t}))},t.prototype.loadImagesWithRecord=function(t,e){return C(this,arguments,void 0,(function(t,e,r){var n,i=this;return void 0===r&&(r="normal"),T(this,(function(o){switch(o.label){case 0:return n=[],Object.entries(t).forEach((function(t){var o=t[0],a=t[1];if(!(a instanceof Uint8Array&&a.byteLength<70)){var s=S.image.load((function(){return i.createImage()}),a,S.path.resolve("".concat(e.replace(/\.svga$/g,""),".png"),"dynamic"===r?"dyn_".concat(o):o)).then((function(t){i.inertBitmapIntoCaches(t),"dynamic"===r?i.dynamicMaterials.set(o,t):i.materials.set(o,t)}));n.push(s)}})),[4,Promise.all(n)];case 1:return o.sent(),[2]}}))}))},t.prototype.release=function(){for(var e=0,r=this.caches;e<r.length;e++){var n=r[e];t.releaseOne(n)}this.materials.clear(),this.dynamicMaterials.clear(),"alipay"===S.globals.env?this.cleanup():this.tidyUp()},t.prototype.tidyUp=function(){this.caches=Array.from(new Set(this.caches)),this.point=this.caches.length},t.prototype.cleanup=function(){this.caches.length=0,this.point=0},t}(),Ce=function(){function t(){}return t.hash=function(t){var e=new Uint8Array(t);return R(e,0,e.byteLength,Math.max(1,Math.floor(e.byteLength/100)))},t.decompress=function(t){return _t(new Uint8Array(t)).buffer},t.parseVideo=function(t,e,r){return void 0===r&&(r=!0),function(t,e){if(t instanceof Uint8Array){var r=new E(t),n=V.decode(r);return b.log("preflight cache size",r.preflight.size),b.log("preflight hit count",r.preflight.hitCount),n.filename=e,r.preflight.clear(),n}throw new Error("Invalid data type")}(new Uint8Array(r?this.decompress(t):t),S.path.filename(e))},t.download=function(t){var e=S.remote,r=S.path,n=S.local;return r.is(t)?n.read(t):e.fetch(t)},t.load=function(e){return C(this,void 0,void 0,(function(){var r,n;return T(this,(function(i){switch(i.label){case 0:return n=(r=t).parseVideo,[4,t.download(e)];case 1:return[2,n.apply(r,[i.sent(),e])]}}))}))},t}(),Te=S.noop,Se=function(){function t(t,e,r){void 0===t&&(t="animation"),void 0===e&&(e=0),void 0===r&&(r=0),this.mode=t,this.X=null,this.XC=null,this.Y=null,this.YC=null,this.model={},this.clearContainer=Te,this.clearSecondary=Te;var n=S.globals.dpr;this.W=e*n,this.H=r*n}return t.prototype.setModel=function(t){var e=this.model,r=S.globals.env;e.type=t,"O"===t&&"h5"===r&&navigator.userAgent.includes("Firefox")?e.clear="CR":e.clear="O"===t&&"tt"===r||"alipay"===r?"CL":"RE"},t.prototype.register=function(t,e,r){return C(this,void 0,void 0,(function(){var n,i,o,a,s,c,u,l,h,f,p,d,y,v,m,g,w=this;return T(this,(function(b){switch(b.label){case 0:if(i=(n=this).model,o=n.mode,a=S.getCanvas,s=S.getOfsCanvas,c=S.globals.env,"poster"!==o||"h5"===c&&!("OffscreenCanvas"in globalThis))return[3,1];if(l=(u=this).W,h=u.H,!(l>0&&h>0))throw new Error("Poster mode must set width and height when create Brush instance");return f=s({width:l,height:h}),d=f.canvas,y=f.context,this.X=d,this.XC=y,this.setModel("O"),[3,3];case 1:return[4,a(t,r)];case 2:p=b.sent(),d=p.canvas,y=p.context,v=d.width,m=d.height,this.X=d,this.XC=y,"poster"===o?(d.width=v,d.height=m,this.setModel("C")):(this.W=v,this.H=m),b.label=3;case 3:return"poster"!==o?[3,4]:(this.Y=this.X,this.YC=this.XC,[3,8]);case 4:return g=void 0,"string"!=typeof e||""===e?[3,6]:[4,a(e,r)];case 5:return(g=b.sent()).canvas.width=this.W,g.canvas.height=this.H,this.setModel("C"),[3,7];case 6:g=s({width:this.W,height:this.H}),this.setModel("O"),b.label=7;case 7:this.Y=g.canvas,this.YC=g.context,b.label=8;case 8:if("CL"===i.clear?this.clearContainer=function(){var t=w,e=t.W,r=t.H;w.XC.clearRect(0,0,e,r)}:this.clearContainer=function(){var t=w,e=t.W,r=t.H;w.X.width=e,w.X.height=r},"poster"===o)this.clearSecondary=this.stick=Te;else switch(i.clear){case"CR":this.clearSecondary=function(){var t=w,e=t.W,r=t.H,n=s({width:e,height:r}),i=n.canvas,o=n.context;w.Y=i,w.YC=o};break;case"CL":this.clearSecondary=function(){var t=w,e=t.W,r=t.H;w.YC.clearRect(0,0,e,r)};break;default:this.clearSecondary=function(){var t=w,e=t.W,r=t.H,n=t.Y;n.width=e,n.height=r}}return[2]}}))}))},t.prototype.stick=function(){var t=this,e=t.W,r=t.H;"poster"!==t.mode&&this.XC.drawImage(this.YC.canvas,0,0,e,r)},t.prototype.destroy=function(){this.clearContainer(),this.clearSecondary(),this.X=this.XC=this.Y=this.YC=null,this.clearContainer=this.clearSecondary=this.stick=Te},t}(),Ae=function(){function t(){this.fillMode="backwards",this.playMode="forwards",this.contentMode="fill",this.startFrame=0,this.endFrame=0,this.loopStartFrame=0,this.loop=0}return t.prototype.register=function(t){"number"==typeof t.loop&&t.loop>=0&&(this.loop=t.loop),t.fillMode&&["forwards","backwards","none"].includes(t.fillMode)&&(this.fillMode=t.fillMode),t.playMode&&["forwards","fallbacks"].includes(t.playMode)&&(this.playMode=t.playMode),"number"==typeof t.startFrame&&t.startFrame>=0&&(this.startFrame=t.startFrame),"number"==typeof t.endFrame&&t.endFrame>=0&&(this.endFrame=t.endFrame),"number"==typeof t.loopStartFrame&&t.loopStartFrame>=0&&(this.loopStartFrame=t.loopStartFrame),"string"==typeof t.contentMode&&(this.contentMode=t.contentMode)},t.prototype.setItem=function(t,e){var r;this.register(((r={})[t]=e,r))},t.prototype.getConfig=function(t){var e=this,r=e.playMode,n=e.loopStartFrame,i=e.startFrame,o=e.endFrame,a=e.fillMode,s=e.loop,c=t.fps,u=t.sprites,l=t.frames,h=u.length,f=i>0?i:0,p=o>0&&o<l?o:l,d=1e3/c;if(f>p)throw new Error("StartFrame should greater than EndFrame");p<l?l=p-f:f>0&&(l-=f);var y,v=Math.floor(l*d*Math.pow(10,6))/Math.pow(10,6),m=0,g=0;return"forwards"===r?(m=Math.max(n,i),"forwards"===a&&(g=1),y=n>f?(n-f)*d:0):(m=Math.min(n,p-1),"backwards"===a&&(g=1),y=n<p?(p-n)*d:0),{currFrame:m,startFrame:f,endFrame:p,totalFrame:l,spriteCount:h,aniConfig:{duration:v,loopStart:y,loop:0===s?1/0:s,fillValue:g*d}}},t}(),Pe=function(){function t(){this.config=new Ae,this.resource=null,this.painter=new Se,this.animator=new N,this.renderer=null}return t.prototype.setConfig=function(t,e){return C(this,void 0,void 0,(function(){var r;return T(this,(function(n){switch(n.label){case 0:return r="string"==typeof t?{container:t}:t,this.config.register(r),[4,this.painter.register(r.container,r.secondary,e)];case 1:return n.sent(),this.renderer=new j(this.painter.YC),this.resource=new xe(this.painter),this.animator.onAnimate=S.rAF.bind(null,this.painter.X),[2]}}))}))},t.prototype.setItem=function(t,e){this.config.setItem(t,e)},t.prototype.mount=function(t){return C(this,void 0,void 0,(function(){var e,r;return T(this,(function(n){switch(n.label){case 0:if(!t)throw new Error("videoEntity undefined");return e=t.images,r=t.filename,this.animator.stop(),this.painter.clearSecondary(),this.resource.release(),this.entity=t,[4,this.resource.loadImagesWithRecord(e,r)];case 1:return n.sent(),[2]}}))}))},t.prototype.start=function(){var t;this.startAnimation(),null===(t=this.onStart)||void 0===t||t.call(this)},t.prototype.resume=function(){var t;this.animator.resume(),null===(t=this.onResume)||void 0===t||t.call(this)},t.prototype.pause=function(){var t;this.animator.pause(),null===(t=this.onPause)||void 0===t||t.call(this)},t.prototype.stop=function(){var t;this.animator.stop(),this.painter.clearContainer(),this.painter.clearSecondary(),null===(t=this.onStop)||void 0===t||t.call(this)},t.prototype.destroy=function(){var t,e,r;this.animator.stop(),this.painter.destroy(),null===(t=this.renderer)||void 0===t||t.destroy(),null===(e=this.resource)||void 0===e||e.release(),null===(r=this.resource)||void 0===r||r.cleanup(),this.entity=void 0},t.prototype.stepToFrame=function(t,e){void 0===e&&(e=!1),!this.entity||t<0||t>=this.entity.frames||(this.pause(),this.config.loopStartFrame=t,e&&this.start())},t.prototype.stepToPercentage=function(t,e){if(void 0===e&&(e=!1),this.entity){var r=this.entity.frames,n=t<0?0:Math.round(t*r);n>=r&&(n=r-1),this.stepToFrame(n,e)}},t.prototype.startAnimation=function(){var t,e,r,n,i,o,a=this,s=this,c=s.entity,u=s.config,l=s.animator,h=s.painter,f=s.renderer,p=s.resource,d=h.W,y=h.H,v=u.fillMode,m=u.playMode,g=u.contentMode,w=u.getConfig(c),b=w.currFrame,k=w.startFrame,x=w.endFrame,C=w.totalFrame,T=w.spriteCount,A=w.aniConfig,P=A.duration,M=A.loopStart,R=A.loop,I=A.fillValue,E="fallbacks"===m,D=b,F=0;l.setConfig(P,M,R,I),f.resize(g,c.size,{width:d,height:y});var O,U,B,L=4;l.onUpdate=function(s){var u;!function(e){for(O=S.now(),e();F<T;)if(U=Math.min(L,T-F),t=F+U|0,f.render(c,p.materials,p.dynamicMaterials,D,F,t),F=t,(B=S.now()-O)<3)L=Math.min(2*L,34);else if(B>8){L=Math.max(L/2,1);break}}((function(){n=(i=E?1-s:s)*C,E?(r=(0===s?x:Math.ceil(n))-1,i=D/C):r=1===s?k:Math.floor(n),o=D===r})),o||(h.clearContainer(),h.stick(),h.clearSecondary(),e=D,D=r,F=0,null===(u=a.onProcess)||void 0===u||u.call(a,~~(100*i)/100,e))},l.onStart=function(){c.locked=!0},l.onEnd=function(){var t;c.locked=!1,"none"===v&&h.clearContainer(),null===(t=a.onEnd)||void 0===t||t.call(a)},l.start()},t}(),Me=function(){function t(t,e){this.config={container:"",contentMode:"fill",frame:0},this.isConfigured=!1,this.resource=null,this.renderer=null,this.painter=new Se("poster",t,e)}return t.prototype.register=function(){return C(this,arguments,void 0,(function(t,e){return void 0===t&&(t=""),T(this,(function(r){switch(r.label){case 0:return[4,this.painter.register(t,"",e)];case 1:return r.sent(),this.renderer=new j(this.painter.YC),this.resource=new xe(this.painter),[2]}}))}))},t.prototype.setConfig=function(){return C(this,arguments,void 0,(function(t,e){return void 0===t&&(t={}),T(this,(function(r){switch(r.label){case 0:return"string"==typeof t?this.config.container=t:Object.assign(this.config,t),this.isConfigured=!0,[4,this.register(this.config.container,e)];case 1:return r.sent(),[2]}}))}))},t.prototype.setContentMode=function(t){this.config.contentMode=t},t.prototype.setFrame=function(t){this.config.frame=t},t.prototype.mount=function(t){return C(this,void 0,void 0,(function(){var e,r;return T(this,(function(n){switch(n.label){case 0:if(!t)throw new Error("videoEntity undefined");return this.isConfigured?[3,2]:[4,this.register()];case 1:n.sent(),this.isConfigured=!0,n.label=2;case 2:return e=t.images,r=t.filename,this.painter.clearContainer(),this.resource.release(),this.entity=t,[4,this.resource.loadImagesWithRecord(e,r)];case 3:return n.sent(),[2]}}))}))},t.prototype.draw=function(){if(this.entity){var t=this,e=t.painter,r=t.renderer,n=t.resource,i=t.entity,o=t.config;r.resize(o.contentMode,i.size,e.X),r.render(i,n.materials,n.dynamicMaterials,o.frame,0,i.sprites.length)}},t.prototype.toImageData=function(){var t=this.painter,e=t.XC,r=t.W,n=t.H;return e.getImageData(0,0,r,n)},t.prototype.destroy=function(){var t,e,r;this.painter.destroy(),null===(t=this.renderer)||void 0===t||t.destroy(),null===(e=this.resource)||void 0===e||e.release(),null===(r=this.resource)||void 0===r||r.cleanup(),this.entity=void 0},t}();function Re(t){var e,r=function(t){var e,r,n,i,o=null!==(e=t.typeNumber)&&void 0!==e?e:4,a=null!==(r=t.correctLevel)&&void 0!==r?r:"H",s=null!==(n=t.codeColor)&&void 0!==n?n:"#000000",c=null!==(i=t.backgroundColor)&&void 0!==i?i:"#FFFFFF";return{code:t.code,size:t.size,typeNumber:o,correctLevel:a,codeColor:s,backgroundColor:c}}(t),n=r.code,i=r.typeNumber,o=r.correctLevel,a=r.size,s=r.codeColor,c=r.backgroundColor;try{(e=new ke(i,o)).addData(n),e.make()}catch(t){if(i>=40)throw new Error("Text too long to encode");return arguments.callee({code:n,size:a,correctLevel:o,typeNumber:i+1,codeColor:s,backgroundColor:c})}for(var u=e.getModuleCount(),l=function(t,e){var r=~~(e/t);return{padding:~~((e-t*r)/2),cellSize:r||2}}(u,a),h=l.padding,f=l.cellSize,p=u*f+h,d=+"".concat(s.replace("#","0x"),"FF"),y=+"".concat(c.replace("#","0x"),"FF"),v=new Ht(a,a),m=0;m<a;m++)for(var g=0;g<a;g++)if(h<=g&&g<p&&h<=m&&m<p){var w=~~((g-h)/f),b=~~((m-h)/f);v.setPixel(g,m,e.isDark(b,w)?d:y)}else v.setPixel(g,m,y);return v.flush()}function Ie(t){var e=t.width,r=t.height,n=t.data;return new Ht(e,r).write(n).flush()}var Ee=function(){function t(t,e){var r=this;this.point=0,this.maxRemain=3,this.remainStart=0,this.remainEnd=0,this.loadMode="fast",this.buckets=[],this.options={preprocess:function(t){return C(r,void 0,void 0,(function(){var e,r,n;return T(this,(function(i){switch(i.label){case 0:return e=S.local,r=S.remote,(n=e)?[4,e.exists(t.local)]:[3,2];case 1:n=i.sent(),i.label=2;case 2:return n?[2,b.time("".concat(t.local," 读取时间"),(function(){return e.read(t.local)}))]:[2,b.time("".concat(t.origin," 下载时间"),(function(){return r.fetch(t.origin)}))]}}))}))},postprocess:function(t,e){return b.time("".concat(t.origin," 解析时间"),(function(){return Ce.parseVideo(e,t.origin,!0)}))}},"string"==typeof t&&(this.loadMode=t),Object.assign(this.options,e)}return t.writeFileToUserDirectory=function(t,e){return C(this,void 0,void 0,(function(){var r,n,i;return T(this,(function(o){switch(o.label){case 0:if(r=S.path,n=S.local,!r.is(t.local))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.write(e,t.local)];case 2:return o.sent(),[3,4];case 3:return i=o.sent(),console.error(i),[3,4];case 4:return[2]}}))}))},t.removeFileFromUserDirectory=function(t){return C(this,void 0,void 0,(function(){var e,r,n;return T(this,(function(i){switch(i.label){case 0:if(e=S.path,r=S.local,!e.is(t.local))return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.remove(t.local)];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),console.error(n),[3,4];case 4:return[2]}}))}))},Object.defineProperty(t.prototype,"size",{get:function(){return this.buckets.length},enumerable:!1,configurable:!0}),t.prototype.updateRemainRange=function(t,e,r){this.point=t<0?0:t>=r?r-1:t,"whole"===this.loadMode?(this.remainStart=0,this.remainEnd=r):(this.maxRemain=e<1?1:e>r?r:e,this.remainStart=this.point-Math.floor(this.maxRemain/2),this.remainStart<0&&(this.remainStart=r+this.remainStart),this.remainEnd=this.remainStart+this.maxRemain,this.remainEnd>r&&(this.remainEnd=this.remainEnd%r))},t.prototype.includeRemainRange=function(t){return this.remainStart<this.remainEnd?t>=this.remainStart&&t<this.remainEnd:!(this.remainStart>this.remainEnd)||(t>=this.remainStart||t<this.remainEnd)},t.prototype.downloadAndParseVideo=function(e){return C(this,arguments,void 0,(function(e,r){var n,i;return void 0===r&&(r=!1),T(this,(function(o){switch(o.label){case 0:return[4,(n=this.options).preprocess(e)];case 1:return i=o.sent(),t.writeFileToUserDirectory(e,i),r?[2,n.postprocess(e,i)]:[2,i]}}))}))},t.prototype.createBucket=function(t,e,r){return C(this,void 0,void 0,(function(){var n,i,o;return T(this,(function(a){switch(a.label){case 0:return n=S.path,i={origin:t,local:n.resolve(n.filename(t),"full"),entity:null,promise:null},this.buckets[e]=i,r?(o=i,[4,this.downloadAndParseVideo(i,!0)]):[3,2];case 1:return o.entity=a.sent(),[3,3];case 2:this.includeRemainRange(e)&&(i.promise=this.downloadAndParseVideo(i)),a.label=3;case 3:return[2,i]}}))}))},t.prototype.prepare=function(t){return C(this,arguments,void 0,(function(t,e,r){var n,i,o,a,s=this;return void 0===e&&(e=0),void 0===r&&(r=3),T(this,(function(c){switch(c.label){case 0:return this.updateRemainRange(e,r,t.length),i=(n=this).loadMode,o=n.point,[4,this.createBucket(t[o],o,!0)];case 1:return a=c.sent(),[4,b.time("资源加载时间",(function(){return Promise.all(t.map((function(t,e){return e===o?a:s.createBucket(t,e,"whole"===i)})))}))];case 2:return c.sent(),[2]}}))}))},t.prototype.get=function(){return C(this,void 0,void 0,(function(){var t,e,r,n=this;return T(this,(function(i){switch(i.label){case 0:return(t=this.buckets[this.point]).promise?(e=t,[4,t.promise.then((function(e){return n.options.postprocess(t,e)}))]):[3,2];case 1:return e.entity=i.sent(),t.promise=null,[3,4];case 2:return t.entity?[3,4]:(r=t,[4,this.downloadAndParseVideo(t,!0)]);case 3:r.entity=i.sent(),i.label=4;case 4:return[2,t]}}))}))},t.prototype.getPoint=function(){return this.point},t.prototype.go=function(t){return C(this,void 0,void 0,(function(){var e,r,n,i,o=this;return T(this,(function(a){return r=(e=this).size,n=e.buckets,i=e.loadMode,t<0||t>=r?[2,n[this.point]]:(this.updateRemainRange(t,this.maxRemain,n.length),"fast"===i&&this.maxRemain!==n.length&&n.forEach((function(t,e){o.includeRemainRange(e)?null===t.entity&&null===t.promise&&(t.promise=o.downloadAndParseVideo(t)):(t.entity=null,t.promise=null)})),[2,this.get()])}))}))},t.prototype.clear=function(){return C(this,arguments,void 0,(function(e){var r;return void 0===e&&(e=!0),T(this,(function(n){switch(n.label){case 0:return r=this.buckets,this.point=0,this.remainStart=0,this.remainEnd=0,this.maxRemain=3,this.buckets=[],e?[4,Promise.all(r.map(t.removeFileFromUserDirectory))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t}(),De=function(){function t(t,e,r){this.painter=t,this.resource=e,this.entity=r}return t.prototype.set=function(t,e){return C(this,arguments,void 0,(function(t,e,r){var n,i,o,a;return void 0===r&&(r="R"),T(this,(function(s){switch(s.label){case 0:return i=(n=this).entity,o=n.resource,"A"!==r?[3,2]:[4,o.loadImagesWithRecord((a={},a[t]=e,a),i.filename,"dynamic")];case 1:return s.sent(),[3,3];case 2:i.images[t]=e,s.label=3;case 3:return[2]}}))}))},t.prototype.getContext=function(){return this.painter.YC},t.prototype.hasValidKey=function(t){var e=this.entity.images;return"function"==typeof Object.hasOwn?Object.hasOwn(e,t):Object.prototype.hasOwnProperty.call(e,t)},t.prototype.loadImage=function(t,e){return this.resource.loadExtImage(t,S.path.filename(e))},t.prototype.setCanvas=function(t,e,r){return C(this,void 0,void 0,(function(){var n,i,o,a,s,c,u;return T(this,(function(l){switch(l.label){case 0:return this.entity.locked?[2]:(n=e.canvas,i=null!==(c=null==r?void 0:r.width)&&void 0!==c?c:n.width,o=null!==(u=null==r?void 0:r.height)&&void 0!==u?u:n.height,a=e.getImageData(0,0,i,o),s=Ie(a),[4,this.set(t,new Uint8Array(s),null==r?void 0:r.mode)]);case 1:return l.sent(),[2]}}))}))},t.prototype.setImage=function(t,e,r){return C(this,void 0,void 0,(function(){var n;return T(this,(function(i){switch(i.label){case 0:return this.entity.locked?[2]:e.startsWith("data:image")?[4,this.set(t,e,null==r?void 0:r.mode)]:[3,2];case 1:return i.sent(),[3,5];case 2:return[4,S.remote.fetch(e)];case 3:return n=i.sent(),[4,this.set(t,new Uint8Array(n),null==r?void 0:r.mode)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.setQRCode=function(t,e,r){return C(this,void 0,void 0,(function(){var n;return T(this,(function(i){switch(i.label){case 0:return this.entity.locked?[2]:(n=Re(x(x({},r),{code:e})),[4,this.set(t,new Uint8Array(n),null==r?void 0:r.mode)]);case 1:return i.sent(),[2]}}))}))},t}();t.Painter=Se,t.Parser=Ce,t.Player=Pe,t.Poster=Me,t.VideoEditor=De,t.VideoManager=Ee,t.benchmark=b,t.generateImageBufferFromCode=Re,t.generateImageFromCode=function(t){var e=Re(t);return S.decode.toDataURL(e)},t.getBufferFromImageData=Ie,t.getDataURLFromImageData=function(t){var e=Ie(t);return S.decode.toDataURL(e)},t.isZlibCompressed=function(t){if(t.length<6)return!1;var e=t[0],r=t[1];if(8!=(15&e))return!1;if((256*e+r)%31!=0)return!1;if(!!(32&r))return!1;var n=t.slice(-4);if(4!==n.length)return!1;var i=n[0]<<24|n[1]<<16|n[2]<<8|n[3];return!(t.length>2&&0===i)},t.platform=S,Object.defineProperty(t,"__esModule",{value:!0})}));//# sourceMappingURL=index.min.js.map
