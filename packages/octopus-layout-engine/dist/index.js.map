{"version":3,"file":"index.js","sources":["../../src/core/LayoutContext.ts","../../src/types/index.ts","../../src/core/LayoutNode.ts","../../src/layout/FlowLayout.ts","../../src/layout/FlexLayout.ts","../../src/core/LayoutEngine.ts","../../src/renderer/CanvasRenderer.ts"],"sourcesContent":[null,null,null,null,null,null,null],"names":["LayoutContext","width","height","devicePixelRatio","canvas","ctx","constructor","options","this","OffscreenCanvas","getContext","measureText","text","fontSize","fontFamily","maxWidth","lineHeight","lines","actualLineHeight","font","metrics","breakTextIntoLines","words","split","currentLine","maxLineWidth","i","length","word","testLine","push","Math","max","measureCJKText","breakCJKTextIntoLines","chars","Array","from","char","NodeType","TextAlign","VerticalAlign","FlexDirection","JustifyContent","AlignItems","FlexWrap","LayoutNode","id","type","content","style","children","parent","rect","textMetrics","random","toString","substring","x","y","map","childOptions","child","setParent","getId","getType","getContent","getStyle","getChildren","getParent","appendChild","getRect","setRect","getTextMetrics","setTextMetrics","measure","context","TEXT","IMAGE","FlowLayout","layout","rootNode","layoutNode","node","marginTop","marginLeft","paddingTop","paddingLeft","paddingRight","paddingBottom","childX","childY","currentLineWidth","childRect","childStyle","childMarginRight","marginRight","childMarginBottom","marginBottom","childLineHeight","textAlign","alignChildrenInLine","verticalAlign","alignChildrenVertically","align","availableWidth","line","lineWidth","offset","CENTER","RIGHT","JUSTIFY","spacing","currentOffset","availableHeight","totalHeight","MIDDLE","BOTTOM","FlexLayout","display","layoutFlexContainer","container","flexDirection","ROW","justifyContent","FLEX_START","alignItems","STRETCH","flexWrap","NOWRAP","isHorizontal","ROW_REVERSE","mainAxisSize","crossAxisSize","layoutFlexItemsNoWrap","layoutFlexItemsWrap","totalFlexGrow","totalFlexShrink","totalFixedMainSize","flexGrow","flexShrink","remainingSpace","extraSpace","shrinkSpace","mainAxisOffset","FLEX_END","SPACE_BETWEEN","SPACE_AROUND","spacePerItem","SPACE_EVENLY","spacePerGap","isReverse","COLUMN_REVERSE","currentMainAxisOffset","alignFlexItem","isMainAxisReverse","isCrossAxisReverse","WRAP_REVERSE","currentLineMainAxisSize","childMainAxisSize","lineMainAxisSizes","lineCrossAxisSizes","lineMainAxisSize","lineCrossAxisSize","totalCrossAxisSize","reduce","sum","size","crossAxisOffset","currentCrossAxisOffset","lineIndex","actualLineIndex","remainingMainAxisSpace","lineMainAxisOffset","currentItemMainAxisOffset","itemIndex","actualItemIndex","childCrossAxisSize","item","containerRect","containerStyle","itemRect","containerCrossAxisSize","itemCrossAxisSize","LayoutEngine","flowLayout","flexLayout","renderer","setRenderer","createLayoutTree","render","Error","layoutAndRender","useFlexLayout","CanvasRenderer","updateCanvasSize","HTMLCanvasElement","scale","clear","clearRect","renderNode","backgroundColor","fillStyle","fillRect","renderText","renderImage","color","textBaseline","fillText","image","Image","src","onload","drawImage","getCanvas"],"mappings":"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"}