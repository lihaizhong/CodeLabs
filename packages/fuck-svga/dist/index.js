var t=Uint8Array,e=Uint16Array,s=Int32Array,i=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),r=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),n=function(t,i){for(var r=new e(31),a=0;a<31;++a)r[a]=i+=1<<t[a-1];var n=new s(r[30]);for(a=1;a<30;++a)for(var o=r[a];o<r[a+1];++o)n[o]=o-r[a]<<5|a;return{b:r,r:n}},o=n(i,2),l=o.b,h=o.r;l[28]=258,h[258]=28;for(var c=n(r,0).b,u=new e(32768),f=0;f<32768;++f){var d=(43690&f)>>1|(21845&f)<<1;d=(61680&(d=(52428&d)>>2|(13107&d)<<2))>>4|(3855&d)<<4,u[f]=((65280&d)>>8|(255&d)<<8)>>1}var p=function(t,s,i){for(var r=t.length,a=0,n=new e(s);a<r;++a)t[a]&&++n[t[a]-1];var o,l=new e(s);for(a=1;a<s;++a)l[a]=l[a-1]+n[a-1]<<1;if(i){o=new e(1<<s);var h=15-s;for(a=0;a<r;++a)if(t[a])for(var c=a<<4|t[a],f=s-t[a],d=l[t[a]-1]++<<f,p=d|(1<<f)-1;d<=p;++d)o[u[d]>>h]=c}else for(o=new e(r),a=0;a<r;++a)t[a]&&(o[a]=u[l[t[a]-1]++]>>15-t[a]);return o},m=new t(288);for(f=0;f<144;++f)m[f]=8;for(f=144;f<256;++f)m[f]=9;for(f=256;f<280;++f)m[f]=7;for(f=280;f<288;++f)m[f]=8;var y=new t(32);for(f=0;f<32;++f)y[f]=5;var b=p(m,9,1),g=p(y,5,1),w=function(t){for(var e=t[0],s=1;s<t.length;++s)t[s]>e&&(e=t[s]);return e},k=function(t,e,s){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(7&e)&s},x=function(t,e){var s=e/8|0;return(t[s]|t[s+1]<<8|t[s+2]<<16)>>(7&e)},v=function(t){return(t+7)/8|0},F=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],T=function(t,e,s){var i=new Error(e||F[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,T),!s)throw i;return i},C=function(e,s,n,o){var h=e.length;if(!h||s.f&&!s.l)return n||new t(0);var u=!n,f=u||2!=s.i,d=s.i;u&&(n=new t(3*h));var m=function(e){var s=n.length;if(e>s){var i=new t(Math.max(2*s,e));i.set(n),n=i}},y=s.f||0,F=s.p||0,C=s.b||0,I=s.l,E=s.d,D=s.m,S=s.n,R=8*h;do{if(!I){y=k(e,F,1);var O=k(e,F+1,3);if(F+=3,!O){var P=e[(Y=v(F)+4)-4]|e[Y-3]<<8,B=Y+P;if(B>h){d&&T(0);break}f&&m(C+P),n.set(e.subarray(Y,B),C),s.b=C+=P,s.p=F=8*B,s.f=y;continue}if(1==O)I=b,E=g,D=9,S=5;else if(2==O){var A=k(e,F,31)+257,M=k(e,F+10,15)+4,L=A+k(e,F+5,31)+1;F+=14;for(var W=new t(L),$=new t(19),U=0;U<M;++U)$[a[U]]=k(e,F+3*U,7);F+=3*M;var X=w($),z=(1<<X)-1,H=p($,X,1);for(U=0;U<L;){var Y,N=H[k(e,F,z)];if(F+=15&N,(Y=N>>4)<16)W[U++]=Y;else{var K=0,V=0;for(16==Y?(V=3+k(e,F,3),F+=2,K=W[U-1]):17==Y?(V=3+k(e,F,7),F+=3):18==Y&&(V=11+k(e,F,127),F+=7);V--;)W[U++]=K}}var J=W.subarray(0,A),q=W.subarray(A);D=w(J),S=w(q),I=p(J,D,1),E=p(q,S,1)}else T(1);if(F>R){d&&T(0);break}}f&&m(C+131072);for(var j=(1<<D)-1,_=(1<<S)-1,G=F;;G=F){var Q=(K=I[x(e,F)&j])>>4;if((F+=15&K)>R){d&&T(0);break}if(K||T(2),Q<256)n[C++]=Q;else{if(256==Q){G=F,I=null;break}var Z=Q-254;if(Q>264){var tt=i[U=Q-257];Z=k(e,F,(1<<tt)-1)+l[U],F+=tt}var et=E[x(e,F)&_],st=et>>4;et||T(3),F+=15&et;q=c[st];if(st>3){tt=r[st];q+=x(e,F)&(1<<tt)-1,F+=tt}if(F>R){d&&T(0);break}f&&m(C+131072);var it=C+Z;if(C<q){var rt=0-q,at=Math.min(q,it);for(rt+C<0&&T(3);C<at;++C)n[C]=o[rt+C]}for(;C<it;++C)n[C]=n[C-q]}}s.l=I,s.p=G,s.b=C,s.f=y,I&&(y=1,s.m=D,s.d=E,s.n=S)}while(!y);return C!=n.length&&u?function(e,s,i){return(null==i||i>e.length)&&(i=e.length),new t(e.subarray(s,i))}(n,0,C):n.subarray(0,C)},I=new t(0);function E(t,e){return C(t.subarray(function(t){return(8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31)&&T(6,"invalid zlib data"),1==(t[1]>>5&1)&&T(6,"invalid zlib data: "+(32&t[1]?"need":"unexpected")+" dictionary"),2+(t[1]>>3&4)}(t),-4),{i:2},e,e)}var D,S,R="undefined"!=typeof TextDecoder&&new TextDecoder;try{R.decode(I,{stream:!0})}catch(D){}function O(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var P,B=O(function(){if(S)return D;function t(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),s=new Uint8Array(e.buffer),i=128===s[3];function r(t,i,r){e[0]=t,i[r]=s[0],i[r+1]=s[1],i[r+2]=s[2],i[r+3]=s[3]}function a(t,i,r){e[0]=t,i[r]=s[3],i[r+1]=s[2],i[r+2]=s[1],i[r+3]=s[0]}function n(t,i){return s[0]=t[i],s[1]=t[i+1],s[2]=t[i+2],s[3]=t[i+3],e[0]}function o(t,i){return s[3]=t[i],s[2]=t[i+1],s[1]=t[i+2],s[0]=t[i+3],e[0]}t.writeFloatLE=i?r:a,t.writeFloatBE=i?a:r,t.readFloatLE=i?n:o,t.readFloatBE=i?o:n}():function(){function a(t,e,s,i){var r=e<0?1:0;if(r&&(e=-e),0===e)t(1/e>0?0:2147483648,s,i);else if(isNaN(e))t(2143289344,s,i);else if(e>34028234663852886e22)t((r<<31|2139095040)>>>0,s,i);else if(e<11754943508222875e-54)t((r<<31|Math.round(e/1401298464324817e-60))>>>0,s,i);else{var a=Math.floor(Math.log(e)/Math.LN2);t((r<<31|a+127<<23|8388607&Math.round(e*Math.pow(2,-a)*8388608))>>>0,s,i)}}function n(t,e,s){var i=t(e,s),r=2*(i>>31)+1,a=i>>>23&255,n=8388607&i;return 255===a?n?NaN:r*(1/0):0===a?1401298464324817e-60*r*n:r*Math.pow(2,a-150)*(n+8388608)}t.writeFloatLE=a.bind(null,e),t.writeFloatBE=a.bind(null,s),t.readFloatLE=n.bind(null,i),t.readFloatBE=n.bind(null,r)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),s=new Uint8Array(e.buffer),i=128===s[7];function r(t,i,r){e[0]=t,i[r]=s[0],i[r+1]=s[1],i[r+2]=s[2],i[r+3]=s[3],i[r+4]=s[4],i[r+5]=s[5],i[r+6]=s[6],i[r+7]=s[7]}function a(t,i,r){e[0]=t,i[r]=s[7],i[r+1]=s[6],i[r+2]=s[5],i[r+3]=s[4],i[r+4]=s[3],i[r+5]=s[2],i[r+6]=s[1],i[r+7]=s[0]}function n(t,i){return s[0]=t[i],s[1]=t[i+1],s[2]=t[i+2],s[3]=t[i+3],s[4]=t[i+4],s[5]=t[i+5],s[6]=t[i+6],s[7]=t[i+7],e[0]}function o(t,i){return s[7]=t[i],s[6]=t[i+1],s[5]=t[i+2],s[4]=t[i+3],s[3]=t[i+4],s[2]=t[i+5],s[1]=t[i+6],s[0]=t[i+7],e[0]}t.writeDoubleLE=i?r:a,t.writeDoubleBE=i?a:r,t.readDoubleLE=i?n:o,t.readDoubleBE=i?o:n}():function(){function a(t,e,s,i,r,a){var n=i<0?1:0;if(n&&(i=-i),0===i)t(0,r,a+e),t(1/i>0?0:2147483648,r,a+s);else if(isNaN(i))t(0,r,a+e),t(2146959360,r,a+s);else if(i>17976931348623157e292)t(0,r,a+e),t((n<<31|2146435072)>>>0,r,a+s);else{var o;if(i<22250738585072014e-324)t((o=i/5e-324)>>>0,r,a+e),t((n<<31|o/4294967296)>>>0,r,a+s);else{var l=Math.floor(Math.log(i)/Math.LN2);1024===l&&(l=1023),t(4503599627370496*(o=i*Math.pow(2,-l))>>>0,r,a+e),t((n<<31|l+1023<<20|1048576*o&1048575)>>>0,r,a+s)}}}function n(t,e,s,i,r){var a=t(i,r+e),n=t(i,r+s),o=2*(n>>31)+1,l=n>>>20&2047,h=4294967296*(1048575&n)+a;return 2047===l?h?NaN:o*(1/0):0===l?5e-324*o*h:o*Math.pow(2,l-1075)*(h+4503599627370496)}t.writeDoubleLE=a.bind(null,e,0,4),t.writeDoubleBE=a.bind(null,s,4,0),t.readDoubleLE=n.bind(null,i,0,4),t.readDoubleBE=n.bind(null,r,4,0)}(),t}function e(t,e,s){e[s]=255&t,e[s+1]=t>>>8&255,e[s+2]=t>>>16&255,e[s+3]=t>>>24}function s(t,e,s){e[s]=t>>>24,e[s+1]=t>>>16&255,e[s+2]=t>>>8&255,e[s+3]=255&t}function i(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function r(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}return S=1,D=t(t)}()),A={},M=(P||(P=1,function(){var t=A;t.length=function(t){for(var e=0,s=0,i=0;i<t.length;++i)(s=t.charCodeAt(i))<128?e+=1:s<2048?e+=2:55296==(64512&s)&&56320==(64512&t.charCodeAt(i+1))?(++i,e+=4):e+=3;return e},t.read=function(t,e,s){if(s-e<1)return"";for(var i,r=null,a=[],n=0;e<s;)(i=t[e++])<128?a[n++]=i:i>191&&i<224?a[n++]=(31&i)<<6|63&t[e++]:i>239&&i<365?(i=((7&i)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,a[n++]=55296+(i>>10),a[n++]=56320+(1023&i)):a[n++]=(15&i)<<12|(63&t[e++])<<6|63&t[e++],n>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,a)),n=0);return r?(n&&r.push(String.fromCharCode.apply(String,a.slice(0,n))),r.join("")):String.fromCharCode.apply(String,a.slice(0,n))},t.write=function(t,e,s){for(var i,r,a=s,n=0;n<t.length;++n)(i=t.charCodeAt(n))<128?e[s++]=i:i<2048?(e[s++]=i>>6|192,e[s++]=63&i|128):55296==(64512&i)&&56320==(64512&(r=t.charCodeAt(n+1)))?(i=65536+((1023&i)<<10)+(1023&r),++n,e[s++]=i>>18|240,e[s++]=i>>12&63|128,e[s++]=i>>6&63|128,e[s++]=63&i|128):(e[s++]=i>>12|224,e[s++]=i>>6&63|128,e[s++]=63&i|128);return s-a}}()),A),L=O(M);class W{static create(t){if(t instanceof W)return t;if(t instanceof Uint8Array)return new W(t);throw Error("illegal buffer")}buf;pos;len;constructor(t){this.buf=t,this.pos=0,this.len=t.length}slice(t,e,s){return t.subarray(e,s)}indexOutOfRange(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}uint32(){let t=4294967295;if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,this.indexOutOfRange(this,10);return t}int32(){return 0|this.uint32()}float(){if(this.pos+4>this.len)throw this.indexOutOfRange(this,4);const t=B.readFloatLE(this.buf,this.pos);return this.pos+=4,t}bytes(){const t=this.uint32(),e=this.pos,s=this.pos+t;if(s>this.len)throw this.indexOutOfRange(this,t);return this.pos+=t,e==s?new Uint8Array(0):this.slice(this.buf,e,s)}string(){const t=this.bytes();return L.read(t,0,t.length)}skip(t){if("number"==typeof t){if(this.pos+t>this.len)throw this.indexOutOfRange(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw this.indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this}skipType(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this}}class ${static decode(t,e){t=W.create(t);const s=null==e?t.len:t.pos+e,i=new $;for(;t.pos<s;){const e=t.uint32();switch(e>>>3){case 1:i.x=t.float();break;case 2:i.y=t.float();break;case 3:i.width=t.float();break;case 4:i.height=t.float();break;default:t.skipType(7&e)}}return i}x=0;y=0;width=0;height=0;constructor(t){t&&(null!=t.x&&(this.x=t.x),null!=t.y&&(this.y=t.y),null!=t.width&&(this.width=t.width),null!=t.height&&(this.height=t.height))}}class U{static decode(t,e){t=W.create(t);let s=null==e?t.len:t.pos+e,i=new U;for(;t.pos<s;){let e=t.uint32();switch(e>>>3){case 1:i.a=t.float();break;case 2:i.b=t.float();break;case 3:i.c=t.float();break;case 4:i.d=t.float();break;case 5:i.tx=t.float();break;case 6:i.ty=t.float();break;default:t.skipType(7&e)}}return i}a=0;b=0;c=0;d=0;tx=0;ty=0;constructor(t){t&&(null!=t.a&&(this.a=t.a),null!=t.b&&(this.b=t.b),null!=t.c&&(this.c=t.c),null!=t.d&&(this.d=t.d),null!=t.tx&&(this.tx=t.tx),null!=t.ty&&(this.ty=t.ty))}}class X{static decode(t,e){t=W.create(t);const s=null==e?t.len:t.pos+e,i=new X;for(;t.pos<s;){const e=t.uint32();e>>>3==1?i.d=t.string():t.skipType(7&e)}return i}d="";constructor(t){t&&null!=t.d&&(this.d=t.d)}}class z{static decode(t,e){t=W.create(t);const s=null==e?t.len:t.pos+e,i=new z;for(;t.pos<s;){const e=t.uint32();switch(e>>>3){case 1:i.x=t.float();break;case 2:i.y=t.float();break;case 3:i.width=t.float();break;case 4:i.height=t.float();break;case 5:i.cornerRadius=t.float();break;default:t.skipType(7&e)}}return i}x=0;y=0;width=0;height=0;cornerRadius=0;constructor(t){t&&(null!=t.x&&(this.x=t.x),null!=t.y&&(this.y=t.y),null!=t.width&&(this.width=t.width),null!=t.height&&(this.height=t.height),null!=t.cornerRadius&&(this.cornerRadius=t.cornerRadius))}}class H{static decode(t,e){t=W.create(t);const s=null==e?t.len:t.pos+e,i=new H;for(;t.pos<s;){const e=t.uint32();switch(e>>>3){case 1:i.x=t.float();break;case 2:i.y=t.float();break;case 3:i.radiusX=t.float();break;case 4:i.radiusY=t.float();break;default:t.skipType(7&e)}}return i}x=0;y=0;radiusX=0;radiusY=0;constructor(t){t&&(null!=t.x&&(this.x=t.x),null!=t.y&&(this.y=t.y),null!=t.radiusX&&(this.radiusX=t.radiusX),null!=t.radiusY&&(this.radiusY=t.radiusY))}}let Y=class t{static decode(e,s){e=W.create(e);const i=null==s?e.len:e.pos+s,r=new t;for(;e.pos<i;){const t=e.uint32();switch(t>>>3){case 1:r.r=e.float();break;case 2:r.g=e.float();break;case 3:r.b=e.float();break;case 4:r.a=e.float();break;default:e.skipType(7&t)}}return r}r=0;g=0;b=0;a=0;constructor(t){t&&(null!=t.r&&(this.r=t.r),null!=t.g&&(this.g=t.g),null!=t.b&&(this.b=t.b),null!=t.a&&(this.a=t.a))}};class N{static decode(t,e){t=W.create(t);const s=null==e?t.len:t.pos+e,i=new N;for(;t.pos<s;){const e=t.uint32();switch(e>>>3){case 1:i.fill=Y.decode(t,t.uint32());break;case 2:i.stroke=Y.decode(t,t.uint32());break;case 3:i.strokeWidth=t.float();break;case 4:i.lineCap=t.int32();break;case 5:i.lineJoin=t.int32();break;case 6:i.miterLimit=t.float();break;case 7:i.lineDashI=t.float();break;case 8:i.lineDashII=t.float();break;case 9:i.lineDashIII=t.float();break;default:t.skipType(7&e)}}return i}fill=null;stroke=null;strokeWidth=0;lineCap=0;lineJoin=0;miterLimit=0;lineDashI=0;lineDashII=0;lineDashIII=0;constructor(t){t&&(null!=t.fill&&(this.fill=t.fill),null!=t.lineCap&&(this.lineCap=t.lineCap),null!=t.lineDashI&&(this.lineDashI=t.lineDashI),null!=t.lineDashII&&(this.lineDashII=t.lineDashII),null!=t.lineDashIII&&(this.lineDashIII=t.lineDashIII),null!=t.lineJoin&&(this.lineJoin=t.lineJoin),null!=t.miterLimit&&(this.miterLimit=t.miterLimit),null!=t.stroke&&(this.stroke=t.stroke),null!=t.strokeWidth&&(this.strokeWidth=t.strokeWidth))}}class K{static decode(t,e){t=W.create(t);const s=null==e?t.len:t.pos+e,i=new K;for(;t.pos<s;){let e=t.uint32();switch(e>>>3){case 1:i.type=t.int32();break;case 2:i.shape=X.decode(t,t.uint32());break;case 3:i.rect=z.decode(t,t.uint32());break;case 4:i.ellipse=H.decode(t,t.uint32());break;case 10:i.styles=N.decode(t,t.uint32());break;case 11:i.transform=U.decode(t,t.uint32());break;default:t.skipType(7&e)}}return i}type=0;shape=null;rect=null;ellipse=null;styles=null;transform=null;$oneOfFields=["shape","rect","ellipse"];$fieldMap={};get args(){const t=Object.keys(this);for(let e=t.length-1;e>-1;--e){const s=t[e],i=this[s];if(1==this.$fieldMap[s]&&null!=i)return s}return""}set args(t){for(var e=0;e<this.$oneOfFields.length;++e){const s=this.$oneOfFields[e];s!=t&&delete this[s]}}constructor(t){t&&(null!=t.type&&(this.type=t.type),null!=t.ellipse&&(this.ellipse=t.ellipse),null!=t.rect&&(this.rect=t.rect),null!=t.shape&&(this.shape=t.shape),null!=t.styles&&(this.styles=t.styles),null!=t.transform&&(this.transform=t.transform));for(var e=0;e<this.$oneOfFields.length;++e)this.$fieldMap[this.$oneOfFields[e]]=1}}class V{static decode(t,e){t=W.create(t);const s=null==e?t.len:t.pos+e,i=new V;for(;t.pos<s;){const e=t.uint32();switch(e>>>3){case 1:i.alpha=t.float();break;case 2:i.layout=$.decode(t,t.uint32());break;case 3:i.transform=U.decode(t,t.uint32());break;case 4:i.clipPath=t.string();break;case 5:i.shapes&&i.shapes.length||(i.shapes=[]),i.shapes.push(K.decode(t,t.uint32()));break;default:t.skipType(7&e)}}return i}shapes=[];alpha=0;layout=null;transform=null;clipPath="";constructor(t){t&&(null!=t.alpha&&(this.alpha=t.alpha),null!=t.clipPath&&(this.clipPath=t.clipPath),null!=t.layout&&(this.layout=t.layout),null!=t.shapes&&(this.shapes=t.shapes),null!=t.transform&&(this.transform=t.transform))}}class J{static decode(t,e){t=W.create(t);const s=null==e?t.len:t.pos+e,i=new J;for(;t.pos<s;){const e=t.uint32();switch(e>>>3){case 1:i.imageKey=t.string();break;case 2:i.frames&&i.frames.length||(i.frames=[]),i.frames.push(V.decode(t,t.uint32()));break;case 3:i.matteKey=t.string();break;default:t.skipType(7&e)}}return i}frames=[];imageKey="";matteKey="";constructor(t){t&&(null!=t.frames&&(this.frames=t.frames),null!=t.imageKey&&(this.imageKey=t.imageKey),null!=t.matteKey&&(this.matteKey=t.matteKey))}}class q{static decode(t,e){t=W.create(t);let s=null==e?t.len:t.pos+e,i=new q;for(;t.pos<s;){let e=t.uint32();switch(e>>>3){case 1:i.viewBoxWidth=t.float();break;case 2:i.viewBoxHeight=t.float();break;case 3:i.fps=t.int32();break;case 4:i.frames=t.int32();break;default:t.skipType(7&e)}}return i}viewBoxWidth=0;viewBoxHeight=0;fps=0;frames=0;constructor(t){t&&(null!=t.viewBoxWidth&&(this.viewBoxWidth=t.viewBoxWidth),null!=t.viewBoxHeight&&(this.viewBoxHeight=t.viewBoxHeight),null!=t.fps&&(this.fps=t.fps),null!=t.frames&&(this.frames=t.frames))}}const j=Object.freeze({});class _{static decode(t,e){t=W.create(t);const s=null==e?t.len:t.pos+e,i=new _;let r,a;for(;t.pos<s;){const e=t.uint32();switch(e>>>3){case 1:i.version=t.string();break;case 2:i.params=q.decode(t,t.uint32());break;case 3:{i.images==j&&(i.images={});const e=t.uint32()+t.pos;for(r="",a=[];t.pos<e;){let e=t.uint32();switch(e>>>3){case 1:r=t.string();break;case 2:a=t.bytes();break;default:t.skipType(7&e)}}i.images[r]=a;break}case 4:i.sprites&&i.sprites.length||(i.sprites=[]),i.sprites.push(J.decode(t,t.uint32()));break;default:t.skipType(7&e)}}return i}version="";params=null;images=j;sprites=[];constructor(t){t&&(null!=t.version&&(this.version=t.version),null!=t.images&&(this.images=t.images),null!=t.params&&(this.params=t.params),null!=t.sprites&&(this.sprites=t.sprites))}}const G=new Array(256),Q=new Array(256);for(let t=0;t<8;t++)G[t]=1<<t;for(let t=8;t<256;t++)G[t]=G[t-4]^G[t-5]^G[t-6]^G[t-8];for(let t=0;t<255;t++)Q[G[t]]=t;const Z=1,et=2,st=3,it=4;let rt;if("undefined"!=typeof window)rt=it;else if("undefined"!=typeof tt)rt=st;else if("undefined"!=typeof my)rt=et;else{if("undefined"==typeof wx)throw new Error("Unsupported app");rt=Z}let at=null;rt==it?at=window:rt==et?at=my:rt==st?at=tt:rt==Z&&(at=wx);const nt={l:{},t:{},increment(t){null==nt.t[t]&&(nt.t[t]=0),nt.t[t]++},getCount:t=>nt.t[t]||0,time(t){console.time?.(t)},timeEnd(t){console.timeEnd?.(t)},clearTime(t){delete nt.t[t]},isLock:t=>!!nt.l[t],lock(t){nt.l[t]=!0},unlock(t){delete nt.l[t]}};var ot={count:20,label(t){console.log(t)},time(t,e,s,i){nt.increment(t);const r=nt.getCount(t);nt.isLock(t)||0!=this.count&&r>this.count?e(r):(s?.(r),nt.time(t),e(r),nt.timeEnd(t),i?.(r))},clearTime(t){nt.clearTime(t)},lockTime(t){nt.lock(t)},unlockTime(t){nt.unlock(t)},line(t=40){console.log("-".repeat(t))},log(...t){console.log("【benchmark】",...t)}};const{USER_DATA_PATH:lt}=rt==it?{}:rt==st?tt.getEnvInfoSync().common:at.env;function ht(t){return/^http(s)?:\/\//.test(t)?function(t){return rt==it?fetch(t).then((t=>{if(t.ok)return t.arrayBuffer();throw new Error(`HTTP error, status=${t.status}, statusText=${t.statusText}`)})):new Promise(((e,s)=>{at.request({url:t,dataType:"arraybuffer",responseType:"arraybuffer",enableCache:!0,success:t=>e(t.data),fail:s})}))}(t):rt!=it?function(t){const e=at.getFileSystemManager();return new Promise(((s,i)=>{e.access({path:t,success(){e.readFile({filePath:t,success:t=>s(t.data),fail:i})},fail:i})}))}(t):Promise.resolve(null)}class ct{version;filename;size={width:0,height:0};fps=20;frames=0;images={};replaceElements={};dynamicElements={};sprites=[];constructor(t,e){const{viewBoxWidth:s,viewBoxHeight:i,fps:r,frames:a}=t.params;this.version=t.version,this.filename=e,this.size.width=s,this.size.height=i,this.fps=r,this.frames=a,this.images=t.images||{},this.sprites=this.formatSprites(t.sprites||[])}formatSprites(t){return t.map((t=>({imageKey:t.imageKey,frames:this.formatFrames(t.frames||[])})))}formatFrames(t){let e;return t.map((t=>{const{layout:s,transform:i,alpha:r}=t,a={x:s?.x+.5|0,y:s?.y+.5|0,width:s?.width+.5|0,height:s?.height+.5|0},n={a:i?.a??1,b:i?.b??0,c:i?.c??0,d:i?.d??1,tx:i?.tx??0,ty:i?.ty??0};let o=this.formatShapes(t.shapes||[]);3==t.shapes[0]?.type&&e?o=e:e=o;const l=n.a*a.x+n.c*a.y+n.tx,h=n.a*(a.x+a.width)+n.c*a.y+n.tx,c=n.a*a.x+n.c*(a.y+a.height)+n.tx,u=n.a*(a.x+a.width)+n.c*(a.y+a.height)+n.tx,f=n.b*a.x+n.d*a.y+n.ty,d=n.b*(a.x+a.width)+n.d*a.y+n.ty,p=n.b*a.x+n.d*(a.y+a.height)+n.ty,m=n.b*(a.x+a.width)+n.d*(a.y+a.height)+n.ty,y=Math.min(c,u,l,h)+.5|0,b=Math.min(p,m,f,d)+.5|0,g=t.clipPath??"";return{alpha:r??0,layout:a,transform:n,clipPath:g,shapes:o,nx:y,ny:b,maskPath:g.length>0?{d:g,transform:void 0,styles:{fill:"rgba(0, 0, 0, 0)",stroke:null,strokeWidth:null,lineCap:null,lineJoin:null,miterLimit:null,lineDash:null}}:null}}))}formatShapes(t){const e=[];for(let s of t){const t=s.styles;if(null==t)continue;const i=[],{lineDashI:r,lineDashII:a,lineDashIII:n}=t;r>0&&i.push(r),a>0&&(i.length<1&&i.push(0),i.push(a)),n>0&&(i.length<2&&(i.push(0),i.push(0)),i[2]=n);let o=null;switch(t.lineCap){case 0:o="butt";break;case 1:o="round";break;case 2:o="square"}let l=null;switch(t.lineJoin){case 2:l="bevel";break;case 1:l="round";break;case 0:l="miter"}const{fill:h,stroke:c}=t;let u=null;h&&(u=`rgba(${255*h.r|0}, ${255*h.g|0}, ${255*h.b|0}, ${1*h.a|0})`);let f=null;c&&(f=`rgba(${255*c.r|0}, ${255*c.g|0}, ${255*c.b|0}, ${1*c.a|0})`);const d={lineDash:i,fill:u,stroke:f,lineCap:o,lineJoin:l,strokeWidth:t.strokeWidth,miterLimit:t.miterLimit},{transform:p,shape:m,rect:y,ellipse:b}=s,g={a:p?.a??1,b:p?.b??0,c:p?.c??0,d:p?.d??1,tx:p?.tx??0,ty:p?.ty??0};0==s.type&&m?e.push({type:"shape",path:m,styles:d,transform:g}):1==s.type&&y?e.push({type:"rect",path:y,styles:d,transform:g}):2==s.type&&b&&e.push({type:"ellipse",path:b,styles:d,transform:g})}return e}}class ut{static parseVideoEntity(t,e){const s=new Uint8Array(t,0,4),i=new Uint8Array(t);if("80,75,3,4"==s.toString())throw new Error("this parser only support version@2 of SVGA.");let r;return ot.time("unzlibSync",(()=>{const t=E(i),s=_.decode(t);r=new ct(s,e.substring(e.lastIndexOf("/")+1))})),r}async load(t){const e=await ht(t);return ot.label(t),ot.line(),ut.parseVideoEntity(e,t)}}let ft=1;function dt(t,e){return new Promise(((s,i)=>{const r=(t,e=0,r=0)=>{if(!t)return void i(new Error("canvas not found."));const a=t.getContext("2d");t.width=e*ft,t.height=r*ft,a.scale(ft,ft),s({canvas:t,ctx:a})};if(rt==it){const e=document.querySelector(t),{width:s,height:i}=e.style;r(e,parseFloat(s),parseFloat(i))}else{let s=at.createSelectorQuery();e&&(s=s.in(e)),s.select(t).fields({node:!0,size:!0},(t=>{const{node:e,width:s,height:i}=t||{};r(e,s,i)})).exec()}}))}function pt(t){const e=function(t){if(rt==it)return new OffscreenCanvas(t.width,t.height);if(rt==et)return my.createOffscreenCanvas({width:t.width,height:t.height});if(rt==st){const e=tt.createOffscreenCanvas();return e.width=t.width,e.height=t.height,e}return wx.createOffscreenCanvas({...t,type:"2d"})}(t),s=e.getContext("2d");return{canvas:e,ctx:s}}function mt(t){const e=yt(t);let s;return s=rt==it?btoa(String.fromCharCode(...new Uint8Array(e))):at.arrayBufferToBase64(e),`data:image/png;base64,${s}`}function yt(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}async function bt(t,e,s){if("string"==typeof t)return t;if(rt==it||rt==et&&at.isIDE)return mt(t);try{return await function(t,e){const s=at.getFileSystemManager();return ot.log(`write file: ${e}`),new Promise(((i,r)=>{s.access({path:e,success(){i(e)},fail(){s.writeFile({filePath:e,data:t,success(){i(e)},fail(t){ot.log(`write fail: ${e}`,t),r(t)}})}})}))}(yt(t),function(t,e){return`${lt}/${e?`${e}.`:""}${t}`}(e,s))}catch(e){return console.warn(`图片缓存失败：${e.message}`),mt(t)}}function gt(t,e,s,i){if(rt==it){if(e instanceof Uint8Array&&"createImageBitmap"in window)return function(t){return createImageBitmap(new Blob([yt(t)]))}(e);if(e instanceof ImageBitmap)return Promise.resolve(e)}return new Promise(((r,a)=>{const n=t.createImage();n.onload=()=>{n.src.startsWith("data:")||"string"==typeof e?r(n):function(t){const e=at.getFileSystemManager();return new Promise((s=>{e.access({path:t,success(){ot.log(`remove file: ${t}`),e.unlink({filePath:t,success:()=>s(),fail(e){ot.log(`remove fail: ${t}`,e),s()}})},fail(e){ot.log(`access fail: ${t}`,e),s()}})}))}(n.src).then((()=>r(n)))},n.onerror=()=>a(new Error(`SVGA LOADING FAILURE: ${n.src}`)),bt(e,s,i).then((t=>n.src=t))}))}rt==it?ft=window.devicePixelRatio:"getWindowInfo"in at?ft=at.getWindowInfo().pixelRatio:"getSystemInfoSync"in at&&(ft=at.getSystemInfoSync().pixelRatio);const wt=()=>{};let kt;switch(rt){case it:{const t=navigator.userAgent;kt=/(Android)/i.test(t)?"Android":/(iPhone|iPad|iPod|iOS)/i.test(t)?"iOS":/(OpenHarmony|ArkWeb)/i.test(t)?"OpenHarmony":"UNKNOWN";break}case et:kt=at.getDeviceBaseInfo().platform;break;case st:kt=at.getDeviceInfoSync().platform;break;case Z:kt=at.getDeviceInfo().platform;break;default:kt="UNKNOWN"}const xt=kt.toLocaleUpperCase(),vt=()=>"undefined"!=typeof performance?performance.now():Date.now();function Ft(t,e,s,i,r,a){const n=e.frames[s];if(!(n.alpha<.05)){t.save(),t.globalAlpha=n.alpha,t.transform(n.transform?.a??1,n.transform?.b??0,n.transform?.c??0,n.transform?.d??1,n.transform?.tx??0,n.transform?.ty??0),i&&(n.maskPath&&(It(t,n.maskPath.d,n.maskPath.transform,n.maskPath.styles),t.clip()),t.drawImage(r||i,0,0,n.layout.width,n.layout.height)),a&&t.drawImage(a,(n.layout.width-a.width)/2,(n.layout.height-a.height)/2);for(let e=0;e<n.shapes.length;e++)Tt(t,n.shapes[e]);t.restore()}}function Tt(t,e){switch(e.type){case"shape":It(t,e.path.d,e.transform,e.styles);break;case"ellipse":!function(t,e,s,i,r,a,n){t.save(),Ct(t,n),a&&t.transform(a.a,a.b,a.c,a.d,a.tx,a.ty);e-=i,s-=r;const o=2*i,l=2*r,h=.5522848,c=o/2*h,u=l/2*h,f=e+o,d=s+l,p=e+o/2,m=s+l/2;t.beginPath(),t.moveTo(e,m),t.bezierCurveTo(e,m-u,p-c,s,p,s),t.bezierCurveTo(p+c,s,f,m-u,f,m),t.bezierCurveTo(f,m+u,p+c,d,p,d),t.bezierCurveTo(p-c,d,e,m+u,e,m),n.fill&&t.fill();n.stroke&&t.stroke();t.restore()}(t,e.path.x??0,e.path.y??0,e.path.radiusX??0,e.path.radiusY??0,e.transform,e.styles);break;case"rect":!function(t,e,s,i,r,a,n,o){t.save(),Ct(t,o),n&&t.transform(n.a,n.b,n.c,n.d,n.tx,n.ty);let l=a;i<2*l&&(l=i/2);r<2*l&&(l=r/2);t.beginPath(),t.moveTo(e+l,s),t.arcTo(e+i,s,e+i,s+r,l),t.arcTo(e+i,s+r,e,s+r,l),t.arcTo(e,s+r,e,s,l),t.arcTo(e,s,e+i,s,l),t.closePath(),o.fill&&t.fill();o.stroke&&t.stroke();t.restore()}(t,e.path.x??0,e.path.y??0,e.path.width??0,e.path.height??0,e.path.cornerRadius??0,e.transform,e.styles)}}function Ct(t,e){e&&(t.strokeStyle=e.stroke||"transparent",e.strokeWidth>0&&(t.lineWidth=e.strokeWidth),e.miterLimit>0&&(t.miterLimit=e.miterLimit),e.lineCap&&(t.lineCap=e.lineCap),e.lineJoin&&(t.lineJoin=e.lineJoin),t.fillStyle=e.fill||"transparent",e.lineDash&&t.setLineDash(e.lineDash))}function It(t,e,s,i){t.save(),Ct(t,i),s&&t.transform(s.a,s.b,s.c,s.d,s.tx,s.ty);const r={x:0,y:0,x1:0,y1:0,x2:0,y2:0};if(t.beginPath(),e){const s=e.replace(/([a-zA-Z])/g,"|||$1 ").replace(/,/g," ").split("|||");for(let e=0;e<s.length;e++){const i=s[e];if(0==i.length)continue;const a=i.substring(0,1);"MLHVCSQZmlhvcsqz".includes(a)&&Et(t,r,a,i.substring(1).trim().split(" "))}}i.fill&&t.fill(),i.stroke&&t.stroke(),t.restore()}function Et(t,e,s,i){switch(s){case"M":e.x=+i[0],e.y=+i[1],t.moveTo(e.x,e.y);break;case"m":e.x+=+i[0],e.y+=+i[1],t.moveTo(e.x,e.y);break;case"L":e.x=+i[0],e.y=+i[1],t.lineTo(e.x,e.y);break;case"l":e.x+=+i[0],e.y+=+i[1],t.lineTo(e.x,e.y);break;case"H":e.x=+i[0],t.lineTo(e.x,e.y);break;case"h":e.x+=+i[0],t.lineTo(e.x,e.y);break;case"V":e.y=+i[0],t.lineTo(e.x,e.y);break;case"v":e.y+=+i[0],t.lineTo(e.x,e.y);break;case"C":e.x1=+i[0],e.y1=+i[1],e.x2=+i[2],e.y2=+i[3],e.x=+i[4],e.y=+i[5],t.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y);break;case"c":e.x1=e.x+ +i[0],e.y1=e.y+ +i[1],e.x2=e.x+ +i[2],e.y2=e.y+ +i[3],e.x+=+i[4],e.y+=+i[5],t.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y);break;case"S":null!=e.x1&&null!=e.y1&&null!=e.x2&&null!=e.y2?(e.x1=e.x-e.x2+e.x,e.y1=e.y-e.y2+e.y,e.x2=+i[0],e.y2=+i[1],e.x=+i[2],e.y=+i[3],t.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y)):(e.x1=+i[0],e.y1=+i[1],e.x=+i[2],e.y=+i[3],t.quadraticCurveTo(e.x1,e.y1,e.x,e.y));break;case"s":null!=e.x1&&null!=e.y1&&null!=e.x2&&null!=e.y2?(e.x1=e.x-e.x2+e.x,e.y1=e.y-e.y2+e.y,e.x2=e.x+ +i[0],e.y2=e.y+ +i[1],e.x+=+i[2],e.y+=+i[3],t.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y)):(e.x1=e.x+ +i[0],e.y1=e.y+ +i[1],e.x+=+i[2],e.y+=+i[3],t.quadraticCurveTo(e.x1,e.y1,e.x,e.y));break;case"Q":e.x1=+i[0],e.y1=+i[1],e.x=+i[2],e.y=+i[3],t.quadraticCurveTo(e.x1,e.y1,e.x,e.y);break;case"q":e.x1=e.x+ +i[0],e.y1=e.y+ +i[1],e.x+=+i[2],e.y+=+i[3],t.quadraticCurveTo(e.x1,e.y1,e.x,e.y);break;case"Z":case"z":t.closePath()}}class Dt{mode;X=null;XC=null;Y=null;YC=null;W=0;H=0;model={};materials=new Map;constructor(t="normal"){this.mode=t}setModel(t){const{model:e}=this;e.type=t,"O"==t&&rt==it&&navigator.userAgent.includes("Firefox")?e.clear="CR":e.clear="O"==t&&rt==st||rt==et?"CL":"RE",e.render="C"==t&&(rt==st||"IOS"==xt&&rt==et)||"O"==t&&rt==Z?"PU":"DR",ot.line(4),ot.log("brush type",e.type),ot.log("brush clear",e.clear),ot.log("brush render",e.render),ot.line(4)}async register(t,e,s){const{model:i,mode:r}=this,{canvas:a,ctx:n}=await dt(t,s),{width:o,height:l}=a;if(this.X=a,this.XC=n,this.W=o,this.H=l,"simple"==r)this.Y=this.X,this.YC=this.XC,this.setModel("C");else{let t;"string"==typeof e&&""!=e?(t=await dt(e,s),t.canvas.width=o,t.canvas.height=l,this.setModel("C")):(t=pt({width:o,height:l}),this.setModel("O")),this.Y=t.canvas,this.YC=t.ctx}if("CL"==i.clear?this.clearFront=()=>{const{W:t,H:e}=this;this.XC.clearRect(0,0,t,e)}:this.clearFront=()=>{const{W:t,H:e}=this;this.X.width=t,this.X.height=e},"simple"==r)this.clearBack=this.stick=wt;else{switch(i.clear){case"CR":this.clearBack=()=>{const{W:t,H:e}=this,{canvas:s,ctx:i}=pt({width:t,height:e});this.Y=s,this.YC=i};break;case"CL":this.clearBack=()=>{const{W:t,H:e}=this;this.YC.clearRect(0,0,t,e)};break;default:this.clearBack=()=>{const{W:t,H:e,Y:s}=this;s.width=t,s.height=e}}switch(i.render){case"DR":this.stick=()=>{const{W:t,H:e}=this;this.XC.drawImage(this.Y,0,0,t,e)};break;case"PU":this.stick=()=>{const{W:t,H:e}=this,s=this.YC.getImageData(0,0,t,e);this.XC.putImageData(s,0,0,0,0,t,e)}}}}setRect(t,e){const{X:s,Y:i}=this;s.width=i.width=this.W=t,s.height=i.height=this.H=e}loadImage(t,e){let s=[];return ot.clearTime("load image"),ot.time("load image",(()=>{this.materials.clear();for(let i in t){const r=gt(this,t[i],i,e).then((t=>{this.materials.set(i,t)}));s.push(r)}})),Promise.all(s)}createImage(){return rt==it?new Image:this.X.createImage()}getImage(t="image/png",e=.92){return this.X.toDataURL(t,e)}flush(t){(rt==it?at:this.X).requestAnimationFrame(t)}clearFront=wt;clearBack=wt;draw(t,e,s,i){!function(t,e,s,i,r,a){const{sprites:n,replaceElements:o,dynamicElements:l}=s;for(let s=r;s<a;s++){const r=n[s],{imageKey:a}=r;Ft(t,r,i,e.get(a),o[a],l[a])}}(this.YC,this.materials,t,e,s,i)}stick=wt;destroy(){this.clearFront(),this.clearBack(),this.materials.clear(),this.X=this.XC=this.Y=this.YC=null,this.clearFront=this.clearBack=this.stick=wt}}class St{brush;isRunning=!1;startTime=0;startValue=0;endValue=0;duration=0;loopStart=0;loopDuration=0;fillRule=0;onStart=wt;onUpdate=wt;onEnd=wt;constructor(t){this.brush=t}setRange(t,e){this.startValue=t,this.endValue=e}setConfig(t,e,s,i){this.duration=t,this.loopStart=e,this.fillRule=i,this.loopDuration=e+(t-e)*s}start(){this.isRunning=!0,this.startTime=vt(),this.onStart(),this.doFrame()}stop(){this.isRunning=!1}doFrame(){this.isRunning&&(this.doDeltaTime(vt()-this.startTime),this.isRunning&&this.brush.flush((()=>this.doFrame())))}doDeltaTime(t){const{duration:e,loopStart:s,loopDuration:i,startValue:r,endValue:a,fillRule:n}=this;let o;t>=i?(o=n?0:1,this.isRunning=!1):o=t<=e?t/e:((t-s)%(e-s)+s)/e,this.onUpdate((a-r)*o+r|0,o),this.isRunning||this.onEnd()}}class Rt{currFrame=0;entity=void 0;config=Object.create({loop:0,fillMode:"forwards",playMode:"forwards",startFrame:0,endFrame:0,loopStartFrame:0});brush=new Dt;animator=null;head=0;tail=0;async setConfig(t,e){let s;s="string"==typeof t?{container:t}:t;const{startFrame:i,endFrame:r}=s;if(null!=i&&null!=r&&i>r)throw new Error("StartFrame should greater than EndFrame");Object.assign(this.config,{loop:s.loop??0,fillMode:s.fillMode??"forwards",playMode:s.playMode??"forwards",startFrame:i??0,endFrame:r??0,loopStartFrame:s.loopStartFrame??0}),await this.brush.register(s.container,s.secondary,e),this.animator=new St(this.brush),this.animator.onEnd=()=>this.onEnd?.(this.currFrame)}mount(t){if(!t)throw new Error("videoEntity undefined");this.animator.stop(),this.currFrame=0,this.entity=t,ot.clearTime("render"),ot.clearTime("draw"),ot.unlockTime("draw");const{images:e,filename:s,size:i}=t;return this.brush.setRect(i.width,i.height),this.brush.clearBack(),this.brush.loadImage(e,s)}onStart;onResume;onPause;onStop;onProcess;onEnd;start(){this.brush.clearFront(),this.startAnimation(),this.onStart?.(this.currFrame)}resume(){this.startAnimation(),this.onResume?.(this.currFrame)}pause(){this.animator.stop(),this.onPause?.(this.currFrame)}stop(){this.animator.stop(),this.currFrame=0,this.brush.clearFront(),this.onStop?.(this.currFrame)}clear(){this.brush.clearFront()}destroy(){this.animator.stop(),this.brush.destroy(),this.animator=null,this.entity=void 0}stepToFrame(t,e=!1){this.entity&&(t>=this.entity.frames||t<0||(this.pause(),this.currFrame=t,e&&this.startAnimation()))}stepToPercentage(t,e=!1){if(!this.entity)return;const{frames:s}=this.entity;let i=t*s;i>=s&&i>0&&(i=s-1),this.stepToFrame(i,e)}startAnimation(){const{playMode:t,loopStartFrame:e,startFrame:s,endFrame:i,fillMode:r,loop:a}=this.config;let{frames:n,fps:o,sprites:l}=this.entity;const h=l.length,c=n-1,u=s>0?s:0,f=i>0?i:c;this.currFrame==c&&(this.currFrame=u),"forwards"==t?this.animator.setRange(u,f):this.animator.setRange(f,u),i>0&&i>s?n=i-s:i<=0&&s>0&&(n-=s);const d=1e3/o;this.animator.setConfig(n*d,e>s?(e-s)*d:0,a<=0?1/0:a,+("backwards"==r)),this.animator.onUpdate=(t,e)=>{const s=this.currFrame==t;if(this.tail!=h){const t=s?Math.min(h*e*1.2+3,h)|0:h;t>this.tail&&(this.head=this.tail,this.tail=t,ot.time("draw",(()=>{this.brush.draw(this.entity,this.currFrame,this.head,this.tail)})))}s||(this.brush.clearFront(),ot.time("render",(()=>this.brush.stick()),null,(t=>{ot.log("render count",t),ot.line(20),t<ot.count?ot.clearTime("draw"):ot.lockTime("draw")})),this.brush.clearBack(),this.onProcess?.(this.currFrame),this.currFrame=t,this.tail=0)},this.animator.start()}}class Ot{entity=void 0;currFrame=0;brush=new Dt("simple");setConfig(t,e){return this.brush.register(t,"",e)}mount(t,e){if(!t)throw new Error("videoEntity undefined");const{images:s,filename:i,size:r}=t;return this.entity=t,this.currFrame=e||0,this.brush.setRect(r.width,r.height),this.brush.clearBack(),ot.clearTime("render"),this.brush.loadImage(s,i)}onStart;onEnd;setReplaceElement(t,e){this.entity&&(this.entity.replaceElements[t]=e)}async setReplaceElementByUrl(t,e){this.entity&&(this.entity.replaceElements[t]=await gt(this.brush,e,e))}setDynamicElement(t,e){this.entity&&(this.entity.dynamicElements[t]=e)}async setDynamicElementByUrl(t,e){this.entity&&(this.entity.dynamicElements[t]=await gt(this.brush,e,e))}draw(){ot.time("render",(()=>{this.brush.clearBack(),this.brush.draw(this.entity,this.currFrame,0,this.entity.sprites.length),this.brush.stick()}))}clear(){this.brush.clearFront()}destroy(){this.brush.destroy(),this.entity=void 0}toDataURL(t,e){return this.brush.getImage(t,e)}}export{Dt as Brush,ut as Parser,Rt as Player,Ot as Poster,ht as download,dt as getCanvas,pt as getOffscreenCanvas,gt as loadImage};
//# sourceMappingURL=index.js.map
