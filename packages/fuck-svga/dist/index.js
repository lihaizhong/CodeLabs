var e=Uint8Array,t=Uint16Array,s=Int32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),r=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),n=function(e,i){for(var r=new t(31),a=0;a<31;++a)r[a]=i+=1<<e[a-1];var n=new s(r[30]);for(a=1;a<30;++a)for(var o=r[a];o<r[a+1];++o)n[o]=o-r[a]<<5|a;return{b:r,r:n}},o=n(i,2),l=o.b,c=o.r;l[28]=258,c[258]=28;for(var h=n(r,0).b,u=new t(32768),f=0;f<32768;++f){var d=(43690&f)>>1|(21845&f)<<1;d=(61680&(d=(52428&d)>>2|(13107&d)<<2))>>4|(3855&d)<<4,u[f]=((65280&d)>>8|(255&d)<<8)>>1}var p=function(e,s,i){for(var r=e.length,a=0,n=new t(s);a<r;++a)e[a]&&++n[e[a]-1];var o,l=new t(s);for(a=1;a<s;++a)l[a]=l[a-1]+n[a-1]<<1;if(i){o=new t(1<<s);var c=15-s;for(a=0;a<r;++a)if(e[a])for(var h=a<<4|e[a],f=s-e[a],d=l[e[a]-1]++<<f,p=d|(1<<f)-1;d<=p;++d)o[u[d]>>c]=h}else for(o=new t(r),a=0;a<r;++a)e[a]&&(o[a]=u[l[e[a]-1]++]>>15-e[a]);return o},m=new e(288);for(f=0;f<144;++f)m[f]=8;for(f=144;f<256;++f)m[f]=9;for(f=256;f<280;++f)m[f]=7;for(f=280;f<288;++f)m[f]=8;var y=new e(32);for(f=0;f<32;++f)y[f]=5;var b=p(m,9,1),w=p(y,5,1),g=function(e){for(var t=e[0],s=1;s<e.length;++s)e[s]>t&&(t=e[s]);return t},k=function(e,t,s){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(7&t)&s},x=function(e,t){var s=t/8|0;return(e[s]|e[s+1]<<8|e[s+2]<<16)>>(7&t)},v=function(e){return(e+7)/8|0},T=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],C=function(e,t,s){var i=new Error(t||T[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,C),!s)throw i;return i},F=function(t,s,n,o){var c=t.length;if(!c||s.f&&!s.l)return n||new e(0);var u=!n,f=u||2!=s.i,d=s.i;u&&(n=new e(3*c));var m=function(t){var s=n.length;if(t>s){var i=new e(Math.max(2*s,t));i.set(n),n=i}},y=s.f||0,T=s.p||0,F=s.b||0,I=s.l,D=s.d,E=s.m,S=s.n,O=8*c;do{if(!I){y=k(t,T,1);var P=k(t,T+1,3);if(T+=3,!P){var R=t[(Y=v(T)+4)-4]|t[Y-3]<<8,M=Y+R;if(M>c){d&&C(0);break}f&&m(F+R),n.set(t.subarray(Y,M),F),s.b=F+=R,s.p=T=8*M,s.f=y;continue}if(1==P)I=b,D=w,E=9,S=5;else if(2==P){var A=k(t,T,31)+257,B=k(t,T+10,15)+4,L=A+k(t,T+5,31)+1;T+=14;for(var W=new e(L),$=new e(19),H=0;H<B;++H)$[a[H]]=k(t,T+3*H,7);T+=3*B;var U=g($),z=(1<<U)-1,X=p($,U,1);for(H=0;H<L;){var Y,N=X[k(t,T,z)];if(T+=15&N,(Y=N>>4)<16)W[H++]=Y;else{var K=0,V=0;for(16==Y?(V=3+k(t,T,3),T+=2,K=W[H-1]):17==Y?(V=3+k(t,T,7),T+=3):18==Y&&(V=11+k(t,T,127),T+=7);V--;)W[H++]=K}}var J=W.subarray(0,A),q=W.subarray(A);E=g(J),S=g(q),I=p(J,E,1),D=p(q,S,1)}else C(1);if(T>O){d&&C(0);break}}f&&m(F+131072);for(var j=(1<<E)-1,_=(1<<S)-1,G=T;;G=T){var Q=(K=I[x(t,T)&j])>>4;if((T+=15&K)>O){d&&C(0);break}if(K||C(2),Q<256)n[F++]=Q;else{if(256==Q){G=T,I=null;break}var Z=Q-254;if(Q>264){var ee=i[H=Q-257];Z=k(t,T,(1<<ee)-1)+l[H],T+=ee}var te=D[x(t,T)&_],se=te>>4;te||C(3),T+=15&te;q=h[se];if(se>3){ee=r[se];q+=x(t,T)&(1<<ee)-1,T+=ee}if(T>O){d&&C(0);break}f&&m(F+131072);var ie=F+Z;if(F<q){var re=0-q,ae=Math.min(q,ie);for(re+F<0&&C(3);F<ae;++F)n[F]=o[re+F]}for(;F<ie;++F)n[F]=n[F-q]}}s.l=I,s.p=G,s.b=F,s.f=y,I&&(y=1,s.m=E,s.d=D,s.n=S)}while(!y);return F!=n.length&&u?function(t,s,i){return(null==i||i>t.length)&&(i=t.length),new e(t.subarray(s,i))}(n,0,F):n.subarray(0,F)},I=new e(0);function D(e,t){return F(e.subarray(function(e){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&C(6,"invalid zlib data"),1==(e[1]>>5&1)&&C(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)}(e),-4),{i:2},t,t)}var E,S,O="undefined"!=typeof TextDecoder&&new TextDecoder;try{O.decode(I,{stream:!0})}catch(P){}function P(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var R,M=P(function(){if(S)return E;function e(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),s=new Uint8Array(t.buffer),i=128===s[3];function r(e,i,r){t[0]=e,i[r]=s[0],i[r+1]=s[1],i[r+2]=s[2],i[r+3]=s[3]}function a(e,i,r){t[0]=e,i[r]=s[3],i[r+1]=s[2],i[r+2]=s[1],i[r+3]=s[0]}function n(e,i){return s[0]=e[i],s[1]=e[i+1],s[2]=e[i+2],s[3]=e[i+3],t[0]}function o(e,i){return s[3]=e[i],s[2]=e[i+1],s[1]=e[i+2],s[0]=e[i+3],t[0]}e.writeFloatLE=i?r:a,e.writeFloatBE=i?a:r,e.readFloatLE=i?n:o,e.readFloatBE=i?o:n}():function(){function a(e,t,s,i){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,s,i);else if(isNaN(t))e(2143289344,s,i);else if(t>34028234663852886e22)e((r<<31|2139095040)>>>0,s,i);else if(t<11754943508222875e-54)e((r<<31|Math.round(t/1401298464324817e-60))>>>0,s,i);else{var a=Math.floor(Math.log(t)/Math.LN2);e((r<<31|a+127<<23|8388607&Math.round(t*Math.pow(2,-a)*8388608))>>>0,s,i)}}function n(e,t,s){var i=e(t,s),r=2*(i>>31)+1,a=i>>>23&255,n=8388607&i;return 255===a?n?NaN:r*(1/0):0===a?1401298464324817e-60*r*n:r*Math.pow(2,a-150)*(n+8388608)}e.writeFloatLE=a.bind(null,t),e.writeFloatBE=a.bind(null,s),e.readFloatLE=n.bind(null,i),e.readFloatBE=n.bind(null,r)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),s=new Uint8Array(t.buffer),i=128===s[7];function r(e,i,r){t[0]=e,i[r]=s[0],i[r+1]=s[1],i[r+2]=s[2],i[r+3]=s[3],i[r+4]=s[4],i[r+5]=s[5],i[r+6]=s[6],i[r+7]=s[7]}function a(e,i,r){t[0]=e,i[r]=s[7],i[r+1]=s[6],i[r+2]=s[5],i[r+3]=s[4],i[r+4]=s[3],i[r+5]=s[2],i[r+6]=s[1],i[r+7]=s[0]}function n(e,i){return s[0]=e[i],s[1]=e[i+1],s[2]=e[i+2],s[3]=e[i+3],s[4]=e[i+4],s[5]=e[i+5],s[6]=e[i+6],s[7]=e[i+7],t[0]}function o(e,i){return s[7]=e[i],s[6]=e[i+1],s[5]=e[i+2],s[4]=e[i+3],s[3]=e[i+4],s[2]=e[i+5],s[1]=e[i+6],s[0]=e[i+7],t[0]}e.writeDoubleLE=i?r:a,e.writeDoubleBE=i?a:r,e.readDoubleLE=i?n:o,e.readDoubleBE=i?o:n}():function(){function a(e,t,s,i,r,a){var n=i<0?1:0;if(n&&(i=-i),0===i)e(0,r,a+t),e(1/i>0?0:2147483648,r,a+s);else if(isNaN(i))e(0,r,a+t),e(2146959360,r,a+s);else if(i>17976931348623157e292)e(0,r,a+t),e((n<<31|2146435072)>>>0,r,a+s);else{var o;if(i<22250738585072014e-324)e((o=i/5e-324)>>>0,r,a+t),e((n<<31|o/4294967296)>>>0,r,a+s);else{var l=Math.floor(Math.log(i)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(o=i*Math.pow(2,-l))>>>0,r,a+t),e((n<<31|l+1023<<20|1048576*o&1048575)>>>0,r,a+s)}}}function n(e,t,s,i,r){var a=e(i,r+t),n=e(i,r+s),o=2*(n>>31)+1,l=n>>>20&2047,c=4294967296*(1048575&n)+a;return 2047===l?c?NaN:o*(1/0):0===l?5e-324*o*c:o*Math.pow(2,l-1075)*(c+4503599627370496)}e.writeDoubleLE=a.bind(null,t,0,4),e.writeDoubleBE=a.bind(null,s,4,0),e.readDoubleLE=n.bind(null,i,0,4),e.readDoubleBE=n.bind(null,r,4,0)}(),e}function t(e,t,s){t[s]=255&e,t[s+1]=e>>>8&255,t[s+2]=e>>>16&255,t[s+3]=e>>>24}function s(e,t,s){t[s]=e>>>24,t[s+1]=e>>>16&255,t[s+2]=e>>>8&255,t[s+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function r(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}return S=1,E=e(e)}()),A={},B=(R||(R=1,function(){var e=A;e.length=function(e){for(var t=0,s=0,i=0;i<e.length;++i)(s=e.charCodeAt(i))<128?t+=1:s<2048?t+=2:55296==(64512&s)&&56320==(64512&e.charCodeAt(i+1))?(++i,t+=4):t+=3;return t},e.read=function(e,t,s){if(s-t<1)return"";for(var i,r=null,a=[],n=0;t<s;)(i=e[t++])<128?a[n++]=i:i>191&&i<224?a[n++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,a[n++]=55296+(i>>10),a[n++]=56320+(1023&i)):a[n++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],n>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,a)),n=0);return r?(n&&r.push(String.fromCharCode.apply(String,a.slice(0,n))),r.join("")):String.fromCharCode.apply(String,a.slice(0,n))},e.write=function(e,t,s){for(var i,r,a=s,n=0;n<e.length;++n)(i=e.charCodeAt(n))<128?t[s++]=i:i<2048?(t[s++]=i>>6|192,t[s++]=63&i|128):55296==(64512&i)&&56320==(64512&(r=e.charCodeAt(n+1)))?(i=65536+((1023&i)<<10)+(1023&r),++n,t[s++]=i>>18|240,t[s++]=i>>12&63|128,t[s++]=i>>6&63|128,t[s++]=63&i|128):(t[s++]=i>>12|224,t[s++]=i>>6&63|128,t[s++]=63&i|128);return s-a}}()),A),L=P(B);class W{static create(e){if(e instanceof Uint8Array)return new W(e);throw Error("illegal buffer")}buf;pos;len;constructor(e){this.buf=e,this.pos=0,this.len=e.length}slice(e,t,s){return e.subarray(t,s)}indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}uint32(){let e=4294967295;if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,this.indexOutOfRange(this,10);return e}int32(){return 0|this.uint32()}float(){if(this.pos+4>this.len)throw this.indexOutOfRange(this,4);const e=M.readFloatLE(this.buf,this.pos);return this.pos+=4,e}bytes(){const e=this.uint32(),t=this.pos,s=this.pos+e;if(s>this.len)throw this.indexOutOfRange(this,e);return this.pos+=e,t===s?new Uint8Array(0):this.slice(this.buf,t,s)}string(){const e=this.bytes();return L.read(e,0,e.length)}skip(e){if("number"==typeof e){if(this.pos+e>this.len)throw this.indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw this.indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this}}class ${static decode(e,t){e instanceof W||(e=W.create(e));const s=void 0===t?e.len:e.pos+t,i=new H;for(;e.pos<s;){const t=e.uint32();switch(t>>>3){case 1:i.x=e.float();break;case 2:i.y=e.float();break;case 3:i.width=e.float();break;case 4:i.height=e.float();break;default:e.skipType(7&t)}}return i}static decodeDelimited(e){return e instanceof W||(e=new W(e)),this.decode(e,e.uint32())}}class H{static create(e){return new H(e)}x=0;y=0;width=0;height=0;constructor(e){e&&(null!=e.x&&(this.x=e.x),null!=e.y&&(this.y=e.y),null!=e.width&&(this.width=e.width),null!=e.height&&(this.height=e.height))}}class U{static decode(e,t){e instanceof W||(e=W.create(e));let s=void 0===t?e.len:e.pos+t,i=new z;for(;e.pos<s;){let t=e.uint32();switch(t>>>3){case 1:i.a=e.float();break;case 2:i.b=e.float();break;case 3:i.c=e.float();break;case 4:i.d=e.float();break;case 5:i.tx=e.float();break;case 6:i.ty=e.float();break;default:e.skipType(7&t)}}return i}static decodeDelimited(e){return e instanceof W||(e=new W(e)),this.decode(e,e.uint32())}}class z{static create(e){return new z(e)}a=0;b=0;c=0;d=0;tx=0;ty=0;constructor(e){e&&(null!=e.a&&(this.a=e.a),null!=e.b&&(this.b=e.b),null!=e.c&&(this.c=e.c),null!=e.d&&(this.d=e.d),null!=e.tx&&(this.tx=e.tx),null!=e.ty&&(this.ty=e.ty))}}class X{static decode(e,t){e instanceof W||(e=W.create(e));const s=void 0===t?e.len:e.pos+t,i=new Y;for(;e.pos<s;){const t=e.uint32();t>>>3==1?i.d=e.string():e.skipType(7&t)}return i}static decodeDelimited(e){return e instanceof W||(e=new W(e)),this.decode(e,e.uint32())}}let Y=class e{static create(t){return new e(t)}d="";constructor(e){e&&null!=e.d&&(this.d=e.d)}};class N{static decode(e,t){e instanceof W||(e=W.create(e));const s=void 0===t?e.len:e.pos+t,i=new K;for(;e.pos<s;){const t=e.uint32();switch(t>>>3){case 1:i.x=e.float();break;case 2:i.y=e.float();break;case 3:i.width=e.float();break;case 4:i.height=e.float();break;case 5:i.cornerRadius=e.float();break;default:e.skipType(7&t)}}return i}static decodeDelimited(e){return e instanceof W||(e=new W(e)),this.decode(e,e.uint32())}}class K{static create(e){return new K(e)}x=0;y=0;width=0;height=0;cornerRadius=0;constructor(e){e&&(null!=e.x&&(this.x=e.x),null!=e.y&&(this.y=e.y),null!=e.width&&(this.width=e.width),null!=e.height&&(this.height=e.height),null!=e.cornerRadius&&(this.cornerRadius=e.cornerRadius))}}class V{static decode(e,t){e instanceof W||(e=W.create(e));const s=void 0===t?e.len:e.pos+t,i=new J;for(;e.pos<s;){const t=e.uint32();switch(t>>>3){case 1:i.x=e.float();break;case 2:i.y=e.float();break;case 3:i.radiusX=e.float();break;case 4:i.radiusY=e.float();break;default:e.skipType(7&t)}}return i}static decodeDelimited(e){return e instanceof W||(e=new W(e)),this.decode(e,e.uint32())}}class J{static create(e){return new J(e)}x=0;y=0;radiusX=0;radiusY=0;constructor(e){e&&(null!=e.x&&(this.x=e.x),null!=e.y&&(this.y=e.y),null!=e.radiusX&&(this.radiusX=e.radiusX),null!=e.radiusY&&(this.radiusY=e.radiusY))}}class q{static decode(e,t){e instanceof W||(e=W.create(e));const s=void 0===t?e.len:e.pos+t,i=new j;for(;e.pos<s;){const t=e.uint32();switch(t>>>3){case 1:i.r=e.float();break;case 2:i.g=e.float();break;case 3:i.b=e.float();break;case 4:i.a=e.float();break;default:e.skipType(7&t)}}return i}static decodeDelimited(e){return e instanceof W||(e=new W(e)),this.decode(e,e.uint32())}}class j{static create(e){return new j(e)}r=0;g=0;b=0;a=0;constructor(e){e&&(null!=e.r&&(this.r=e.r),null!=e.g&&(this.g=e.g),null!=e.b&&(this.b=e.b),null!=e.a&&(this.a=e.a))}}class _{static decode(e,t){e instanceof W||(e=W.create(e));const s=void 0===t?e.len:e.pos+t,i=new G;for(;e.pos<s;){const t=e.uint32();switch(t>>>3){case 1:i.fill=q.decode(e,e.uint32());break;case 2:i.stroke=q.decode(e,e.uint32());break;case 3:i.strokeWidth=e.float();break;case 4:i.lineCap=e.int32();break;case 5:i.lineJoin=e.int32();break;case 6:i.miterLimit=e.float();break;case 7:i.lineDashI=e.float();break;case 8:i.lineDashII=e.float();break;case 9:i.lineDashIII=e.float();break;default:e.skipType(7&t)}}return i}static decodeDelimited(e){return e instanceof W||(e=new W(e)),this.decode(e,e.uint32())}}class G{static create(e){return new G(e)}fill=null;stroke=null;strokeWidth=0;lineCap=0;lineJoin=0;miterLimit=0;lineDashI=0;lineDashII=0;lineDashIII=0;constructor(e){e&&(null!=e.fill&&(this.fill=e.fill),null!=e.lineCap&&(this.lineCap=e.lineCap),null!=e.lineDashI&&(this.lineDashI=e.lineDashI),null!=e.lineDashII&&(this.lineDashII=e.lineDashII),null!=e.lineDashIII&&(this.lineDashIII=e.lineDashIII),null!=e.lineJoin&&(this.lineJoin=e.lineJoin),null!=e.miterLimit&&(this.miterLimit=e.miterLimit),null!=e.stroke&&(this.stroke=e.stroke),null!=e.strokeWidth&&(this.strokeWidth=e.strokeWidth))}}class Q{static decode(e,t){e instanceof W||(e=W.create(e));const s=void 0===t?e.len:e.pos+t,i=new Z;for(;e.pos<s;){let t=e.uint32();switch(t>>>3){case 1:i.type=e.int32();break;case 2:i.shape=X.decode(e,e.uint32());break;case 3:i.rect=N.decode(e,e.uint32());break;case 4:i.ellipse=V.decode(e,e.uint32());break;case 10:i.styles=_.decode(e,e.uint32());break;case 11:i.transform=U.decode(e,e.uint32());break;default:e.skipType(7&t)}}return i}static decodeDelimited(e){return e instanceof W||(e=new W(e)),this.decode(e,e.uint32())}}class Z{static create(e){return new Z(e)}type=0;shape=null;rect=null;ellipse=null;styles=null;transform=null;$oneOfFields=["shape","rect","ellipse"];$fieldMap={};get args(){const e=Object.keys(this);for(let t=e.length-1;t>-1;--t){const s=e[t],i=this[s];if(1===this.$fieldMap[s]&&null!=i)return s}return""}set args(e){for(var t=0;t<this.$oneOfFields.length;++t){const s=this.$oneOfFields[t];s!==e&&delete this[s]}}constructor(e){e&&(null!=e.type&&(this.type=e.type),null!=e.ellipse&&(this.ellipse=e.ellipse),null!=e.rect&&(this.rect=e.rect),null!=e.shape&&(this.shape=e.shape),null!=e.styles&&(this.styles=e.styles),null!=e.transform&&(this.transform=e.transform));for(var t=0;t<this.$oneOfFields.length;++t)this.$fieldMap[this.$oneOfFields[t]]=1}}class ee{static decode(e,t){e instanceof W||(e=W.create(e));const s=void 0===t?e.len:e.pos+t,i=new te;for(;e.pos<s;){const t=e.uint32();switch(t>>>3){case 1:i.alpha=e.float();break;case 2:i.layout=$.decode(e,e.uint32());break;case 3:i.transform=U.decode(e,e.uint32());break;case 4:i.clipPath=e.string();break;case 5:i.shapes&&i.shapes.length||(i.shapes=[]),i.shapes.push(Q.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return i}static decodeDelimited(e){return e instanceof W||(e=new W(e)),this.decode(e,e.uint32())}}class te{static create(e){return new te(e)}shapes=[];alpha=0;layout=null;transform=null;clipPath="";constructor(e){e&&(null!=e.alpha&&(this.alpha=e.alpha),null!=e.clipPath&&(this.clipPath=e.clipPath),null!=e.layout&&(this.layout=e.layout),null!=e.shapes&&(this.shapes=e.shapes),null!=e.transform&&(this.transform=e.transform))}}class se{static decode(e,t){e instanceof W||(e=W.create(e));const s=void 0===t?e.len:e.pos+t,i=new ie;for(;e.pos<s;){const t=e.uint32();switch(t>>>3){case 1:i.imageKey=e.string();break;case 2:i.frames&&i.frames.length||(i.frames=[]),i.frames.push(ee.decode(e,e.uint32()));break;case 3:i.matteKey=e.string();break;default:e.skipType(7&t)}}return i}static decodeDelimited(e){return e instanceof W||(e=new W(e)),this.decode(e,e.uint32())}}class ie{static create(e){return new ie(e)}frames=[];imageKey="";matteKey="";constructor(e){e&&(null!=e.frames&&(this.frames=e.frames),null!=e.imageKey&&(this.imageKey=e.imageKey),null!=e.matteKey&&(this.matteKey=e.matteKey))}}class re{static decode(e,t){e instanceof W||(e=W.create(e));let s=void 0===t?e.len:e.pos+t,i=new ae;for(;e.pos<s;){let t=e.uint32();switch(t>>>3){case 1:i.viewBoxWidth=e.float();break;case 2:i.viewBoxHeight=e.float();break;case 3:i.fps=e.int32();break;case 4:i.frames=e.int32();break;default:e.skipType(7&t)}}return i}static decodeDelimited(e){return e instanceof W||(e=new W(e)),this.decode(e,e.uint32())}}class ae{static create(e){return new ae(e)}viewBoxWidth=0;viewBoxHeight=0;fps=0;frames=0;constructor(e){e&&(null!=e.viewBoxWidth&&(this.viewBoxWidth=e.viewBoxWidth),null!=e.viewBoxHeight&&(this.viewBoxHeight=e.viewBoxHeight),null!=e.fps&&(this.fps=e.fps),null!=e.frames&&(this.frames=e.frames))}}const ne=Object.freeze({});class oe{static decode(e,t){e instanceof W||(e=W.create(e));const s=void 0===t?e.len:e.pos+t,i=new le;let r,a;for(;e.pos<s;){const t=e.uint32();switch(t>>>3){case 1:i.version=e.string();break;case 2:i.params=re.decode(e,e.uint32());break;case 3:{i.images===ne&&(i.images={});const t=e.uint32()+e.pos;for(r="",a=[];e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:r=e.string();break;case 2:a=e.bytes();break;default:e.skipType(7&t)}}i.images[r]=a;break}case 4:i.sprites&&i.sprites.length||(i.sprites=[]),i.sprites.push(se.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return i}static decodeDelimited(e){return e instanceof W||(e=new W(e)),this.decode(e,e.uint32())}}class le{static create(e){return new le(e)}version="";params=null;images=ne;sprites=[];constructor(e){e&&(null!=e.version&&(this.version=e.version),null!=e.images&&(this.images=e.images),null!=e.params&&(this.params=e.params),null!=e.sprites&&(this.sprites=e.sprites))}}const ce=1,he=2,ue=3,fe=4;let de;if("undefined"!=typeof window)de=fe;else if("undefined"!=typeof tt)de=ue;else if("undefined"!=typeof my)de=he;else{if("undefined"==typeof wx)throw new Error("Unsupported app");de=ce}let pe=null;de===fe?pe=window:de===he?pe=my:de===ue?pe=tt:de===ce&&(pe=wx);const me={l:{},t:{},increment(e){void 0===me.t[e]&&(me.t[e]=0),me.t[e]++},getCount:e=>me.t[e]||0,time(e){console.time?.(e)},timeEnd(e){console.timeEnd?.(e)},clearTime(e){delete me.t[e]},isLock:e=>!!me.l[e],lock(e){me.l[e]=!0},unlock(e){delete me.l[e]}};var ye={count:20,label(e){console.log(e)},time(e,t,s,i){me.increment(e);const r=me.getCount(e);me.isLock(e)||0!==this.count&&r>this.count?t(r):(s?.(r),me.time(e),t(r),me.timeEnd(e),i?.(r))},clearTime(e){me.clearTime(e)},lockTime(e){me.lock(e)},unlockTime(e){me.unlock(e)},line(e=40){console.log("-".repeat(e))},log(...e){console.log("【benchmark】",...e)}};const{USER_DATA_PATH:be}=de===fe?{}:de===ue?tt.getEnvInfoSync().common:pe.env;function we(e){return/^http(s):\/\//.test(e)?function(e){return de===fe?fetch(e).then((e=>{if(e.ok)return e.arrayBuffer();throw new Error(`HTTP error, status=${e.status}, statusText=${e.statusText}`)})):new Promise(((t,s)=>{pe.request({url:e,dataType:"arraybuffer",responseType:"arraybuffer",enableCache:!0,success:e=>t(e.data),fail:s})}))}(e):de!==fe?function(e){const t=pe.getFileSystemManager();return new Promise(((s,i)=>{t.access({path:e,success(){t.readFile({filePath:e,success:e=>s(e.data),fail:i})},fail:i})}))}(e):Promise.resolve(null)}class ge{version;filename;size={width:0,height:0};fps=20;frames=0;images={};replaceElements={};dynamicElements={};sprites=[];constructor(e,t){const{viewBoxWidth:s,viewBoxHeight:i,fps:r,frames:a}=e.params;this.version=e.version,this.filename=t,this.size.width=s,this.size.height=i,this.fps=r,this.frames=a,this.images=e.images||{},this.sprites=this.formatSprites(e.sprites||[])}formatSprites(e){return e.map((e=>({imageKey:e.imageKey,frames:this.formatFrames(e.frames||[])})))}formatFrames(e){let t;return e.map((e=>{const{layout:s,transform:i,alpha:r}=e,a={x:s?.x+.5|0,y:s?.y+.5|0,width:s?.width+.5|0,height:s?.height+.5|0},n={a:i?.a??1,b:i?.b??0,c:i?.c??0,d:i?.d??1,tx:i?.tx??0,ty:i?.ty??0};let o=this.formatShapes(e.shapes||[]);3===e.shapes[0]?.type&&t?o=t:t=o;const l=n.a*a.x+n.c*a.y+n.tx,c=n.a*(a.x+a.width)+n.c*a.y+n.tx,h=n.a*a.x+n.c*(a.y+a.height)+n.tx,u=n.a*(a.x+a.width)+n.c*(a.y+a.height)+n.tx,f=n.b*a.x+n.d*a.y+n.ty,d=n.b*(a.x+a.width)+n.d*a.y+n.ty,p=n.b*a.x+n.d*(a.y+a.height)+n.ty,m=n.b*(a.x+a.width)+n.d*(a.y+a.height)+n.ty,y=Math.min(h,u,l,c)+.5|0,b=Math.min(p,m,f,d)+.5|0,w=e.clipPath??"";return{alpha:r??0,layout:a,transform:n,clipPath:w,shapes:o,nx:y,ny:b,maskPath:w.length>0?{d:w,transform:void 0,styles:{fill:"rgba(0, 0, 0, 0)",stroke:null,strokeWidth:null,lineCap:null,lineJoin:null,miterLimit:null,lineDash:null}}:null}}))}formatShapes(e){const t=[];for(let s of e){const e=s.styles;if(null===e)continue;const i=[],{lineDashI:r,lineDashII:a,lineDashIII:n}=e;r>0&&i.push(r),a>0&&(i.length<1&&i.push(0),i.push(a)),n>0&&(i.length<2&&(i.push(0),i.push(0)),i[2]=n);let o=null;switch(e.lineCap){case 0:o="butt";break;case 1:o="round";break;case 2:o="square"}let l=null;switch(e.lineJoin){case 2:l="bevel";break;case 1:l="round";break;case 0:l="miter"}const{fill:c,stroke:h}=e;let u=null;c&&(u=`rgba(${255*c.r|0}, ${255*c.g|0}, ${255*c.b|0}, ${1*c.a|0})`);let f=null;h&&(f=`rgba(${255*h.r|0}, ${255*h.g|0}, ${255*h.b|0}, ${1*h.a|0})`);const d={lineDash:i,fill:u,stroke:f,lineCap:o,lineJoin:l,strokeWidth:e.strokeWidth,miterLimit:e.miterLimit},{transform:p,shape:m,rect:y,ellipse:b}=s,w={a:p?.a??1,b:p?.b??0,c:p?.c??0,d:p?.d??1,tx:p?.tx??0,ty:p?.ty??0};0===s.type&&m?t.push({type:"shape",path:m,styles:d,transform:w}):1===s.type&&y?t.push({type:"rect",path:y,styles:d,transform:w}):2===s.type&&b&&t.push({type:"ellipse",path:b,styles:d,transform:w})}return t}}class ke{static parseVideoEntity(e,t){const s=new Uint8Array(e,0,4),i=new Uint8Array(e);if("80,75,3,4"===s.toString())throw new Error("this parser only support version@2 of SVGA.");let r;return ye.time("unzlibSync",(()=>{const e=D(i),s=oe.decode(e);r=new ge(s,t.substring(t.lastIndexOf("/")+1))})),r}async load(e){const t=await we(e);return ye.label(e),ye.line(),ke.parseVideoEntity(t,e)}}let xe=1;function ve(e,t){return new Promise(((s,i)=>{const r=(e,t=0,r=0)=>{if(!e)return void i(new Error("canvas not found."));const a=e.getContext("2d");e.width=t*xe,e.height=r*xe,a.scale(xe,xe),s({canvas:e,ctx:a})};if(de===fe){const t=document.querySelector(e),{width:s,height:i}=t.style;r(t,parseFloat(s),parseFloat(i))}else{let s=pe.createSelectorQuery();t&&(s=s.in(t)),s.select(e).fields({node:!0,size:!0},(e=>{const{node:t,width:s,height:i}=e||{};r(t,s,i)})).exec()}}))}function Te(e){const t=function(e){if(de===fe)return new OffscreenCanvas(e.width,e.height);if(de===he)return my.createOffscreenCanvas({width:e.width,height:e.height});if(de===ue){const t=tt.createOffscreenCanvas();return t.width=e.width,t.height=e.height,t}return wx.createOffscreenCanvas({...e,type:"2d"})}(e),s=t.getContext("2d");return{canvas:t,ctx:s}}function Ce(e){const t=Fe(e);let s;return s=de===fe?btoa(String.fromCharCode(...new Uint8Array(t))):pe.arrayBufferToBase64(t),`data:image/png;base64,${s}`}function Fe(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}async function Ie(e,t,s){if("string"==typeof e)return e;if(de===fe||de===he&&pe.isIDE)return Ce(e);try{return await function(e,t){const s=pe.getFileSystemManager();return ye.log(`write file: ${t}`),new Promise(((i,r)=>{s.access({path:t,success(){i(t)},fail(){s.writeFile({filePath:t,data:e,success(){i(t)},fail(e){ye.log(`write fail: ${t}`,e),r(e)}})}})}))}(Fe(e),function(e,t){return`${be}/${t?`${t}.`:""}${e}`}(t,s))}catch(t){return console.error(t),Ce(e)}}function De(e,t,s,i){if(de===fe){if(t instanceof Uint8Array&&"createImageBitmap"in window)return function(e){return createImageBitmap(new Blob([Fe(e)]))}(t);if(t instanceof ImageBitmap)return Promise.resolve(t)}return new Promise(((r,a)=>{const n=e.createImage();n.onload=()=>{n.src.startsWith("data:")||"string"==typeof t?r(n):function(e){const t=pe.getFileSystemManager();return new Promise((s=>{t.access({path:e,success(){ye.log(`remove file: ${e}`),t.unlink({filePath:e,success:s,fail(t){ye.log(`remove fail: ${e}`,t),s()}})},fail(t){ye.log(`access fail: ${e}`,t),s()}})}))}(n.src).then((()=>r(n)))},n.onerror=()=>a(new Error(`SVGA LOADING FAILURE: ${n.src}`)),Ie(t,s,i).then((e=>n.src=e))}))}de===fe?xe=window.devicePixelRatio:"getWindowInfo"in pe?xe=pe.getWindowInfo().pixelRatio:"getSystemInfoSync"in pe&&(xe=pe.getSystemInfoSync().pixelRatio);const Ee=()=>{};let Se;switch(de){case fe:{const e=navigator.userAgent;Se=/(Android)/i.test(e)?"Android":/(iPhone|iPad|iPod|iOS)/i.test(e)?"iOS":/(OpenHarmony|ArkWeb)/i.test(e)?"OpenHarmony":"UNKNOWN";break}case he:Se=pe.getDeviceBaseInfo().platform;break;case ue:Se=pe.getDeviceInfoSync().platform;break;case ce:Se=pe.getDeviceInfo().platform;break;default:Se="UNKNOWN"}const Oe=Se.toLocaleUpperCase(),Pe=()=>"undefined"!=typeof performance?performance.now():Date.now();function Re(e,t,s,i,r,a){const n=t.frames[s];if(!(n.alpha<.05)){e.save(),e.globalAlpha=n.alpha,e.transform(n.transform?.a??1,n.transform?.b??0,n.transform?.c??0,n.transform?.d??1,n.transform?.tx??0,n.transform?.ty??0),i&&(n.maskPath&&(Be(e,n.maskPath.d,n.maskPath.transform,n.maskPath.styles),e.clip()),e.drawImage(r||i,0,0,n.layout.width,n.layout.height)),a&&e.drawImage(a,(n.layout.width-a.width)/2,(n.layout.height-a.height)/2);for(let t=0;t<n.shapes.length;t++)Me(e,n.shapes[t]);e.restore()}}function Me(e,t){switch(t.type){case"shape":Be(e,t.path.d,t.transform,t.styles);break;case"ellipse":!function(e,t,s,i,r,a,n){e.save(),Ae(e,n),a&&e.transform(a.a,a.b,a.c,a.d,a.tx,a.ty);t-=i,s-=r;const o=2*i,l=2*r,c=.5522848,h=o/2*c,u=l/2*c,f=t+o,d=s+l,p=t+o/2,m=s+l/2;e.beginPath(),e.moveTo(t,m),e.bezierCurveTo(t,m-u,p-h,s,p,s),e.bezierCurveTo(p+h,s,f,m-u,f,m),e.bezierCurveTo(f,m+u,p+h,d,p,d),e.bezierCurveTo(p-h,d,t,m+u,t,m),n.fill&&e.fill();n.stroke&&e.stroke();e.restore()}(e,t.path.x??0,t.path.y??0,t.path.radiusX??0,t.path.radiusY??0,t.transform,t.styles);break;case"rect":!function(e,t,s,i,r,a,n,o){e.save(),Ae(e,o),n&&e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty);let l=a;i<2*l&&(l=i/2);r<2*l&&(l=r/2);e.beginPath(),e.moveTo(t+l,s),e.arcTo(t+i,s,t+i,s+r,l),e.arcTo(t+i,s+r,t,s+r,l),e.arcTo(t,s+r,t,s,l),e.arcTo(t,s,t+i,s,l),e.closePath(),o.fill&&e.fill();o.stroke&&e.stroke();e.restore()}(e,t.path.x??0,t.path.y??0,t.path.width??0,t.path.height??0,t.path.cornerRadius??0,t.transform,t.styles)}}function Ae(e,t){t&&(e.strokeStyle=t.stroke||"transparent",t.strokeWidth>0&&(e.lineWidth=t.strokeWidth),t.miterLimit>0&&(e.miterLimit=t.miterLimit),t.lineCap&&(e.lineCap=t.lineCap),t.lineJoin&&(e.lineJoin=t.lineJoin),e.fillStyle=t.fill||"transparent",t.lineDash&&e.setLineDash(t.lineDash))}function Be(e,t,s,i){e.save(),Ae(e,i),s&&e.transform(s.a,s.b,s.c,s.d,s.tx,s.ty);const r={x:0,y:0,x1:0,y1:0,x2:0,y2:0};if(e.beginPath(),t){const s=t.replace(/([a-zA-Z])/g,"|||$1 ").replace(/,/g," ").split("|||");for(let t=0;t<s.length;t++){const i=s[t];if(0===i.length)continue;const a=i.substring(0,1);"MLHVCSQZmlhvcsqz".includes(a)&&Le(e,r,a,i.substring(1).trim().split(" "))}}i.fill&&e.fill(),i.stroke&&e.stroke(),e.restore()}function Le(e,t,s,i){switch(s){case"M":t.x=+i[0],t.y=+i[1],e.moveTo(t.x,t.y);break;case"m":t.x+=+i[0],t.y+=+i[1],e.moveTo(t.x,t.y);break;case"L":t.x=+i[0],t.y=+i[1],e.lineTo(t.x,t.y);break;case"l":t.x+=+i[0],t.y+=+i[1],e.lineTo(t.x,t.y);break;case"H":t.x=+i[0],e.lineTo(t.x,t.y);break;case"h":t.x+=+i[0],e.lineTo(t.x,t.y);break;case"V":t.y=+i[0],e.lineTo(t.x,t.y);break;case"v":t.y+=+i[0],e.lineTo(t.x,t.y);break;case"C":t.x1=+i[0],t.y1=+i[1],t.x2=+i[2],t.y2=+i[3],t.x=+i[4],t.y=+i[5],e.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y);break;case"c":t.x1=t.x+ +i[0],t.y1=t.y+ +i[1],t.x2=t.x+ +i[2],t.y2=t.y+ +i[3],t.x+=+i[4],t.y+=+i[5],e.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y);break;case"S":void 0!==t.x1&&void 0!==t.y1&&void 0!==t.x2&&void 0!==t.y2?(t.x1=t.x-t.x2+t.x,t.y1=t.y-t.y2+t.y,t.x2=+i[0],t.y2=+i[1],t.x=+i[2],t.y=+i[3],e.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y)):(t.x1=+i[0],t.y1=+i[1],t.x=+i[2],t.y=+i[3],e.quadraticCurveTo(t.x1,t.y1,t.x,t.y));break;case"s":void 0!==t.x1&&void 0!==t.y1&&void 0!==t.x2&&void 0!==t.y2?(t.x1=t.x-t.x2+t.x,t.y1=t.y-t.y2+t.y,t.x2=t.x+ +i[0],t.y2=t.y+ +i[1],t.x+=+i[2],t.y+=+i[3],e.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y)):(t.x1=t.x+ +i[0],t.y1=t.y+ +i[1],t.x+=+i[2],t.y+=+i[3],e.quadraticCurveTo(t.x1,t.y1,t.x,t.y));break;case"Q":t.x1=+i[0],t.y1=+i[1],t.x=+i[2],t.y=+i[3],e.quadraticCurveTo(t.x1,t.y1,t.x,t.y);break;case"q":t.x1=t.x+ +i[0],t.y1=t.y+ +i[1],t.x+=+i[2],t.y+=+i[3],e.quadraticCurveTo(t.x1,t.y1,t.x,t.y);break;case"Z":case"z":e.closePath()}}class We{X=null;XC=null;Y=null;YC=null;W=0;H=0;mode={};materials=new Map;setMode(e){const{mode:t}=this;t.type=e,"O"===e&&de===fe&&navigator.userAgent.includes("Firefox")?t.clear="CR":t.clear="O"===e&&de===ue||de===he?"CL":"RE",t.render="C"===e&&(de===ue||"IOS"===Oe&&de===he)||"O"===e&&de===ce?"PU":"DR",ye.line(4),ye.log("brush type",t.type),ye.log("brush clear",t.clear),ye.log("brush render",t.render),ye.line(4)}async register(e,t,s){const{canvas:i,ctx:r}=await ve(e,s),{width:a,height:n}=i;let o;this.X=i,this.XC=r,this.W=a,this.H=n,"string"==typeof t&&""!==t?(o=await ve(t,s),o.canvas.width=a,o.canvas.height=n,this.setMode("C")):(o=Te({width:a,height:n}),this.setMode("O")),this.Y=o.canvas,this.YC=o.ctx;const{mode:l}=this;switch("CL"===l.clear?this.clearFront=()=>{const{W:e,H:t}=this;this.XC.clearRect(0,0,e,t)}:this.clearFront=()=>{const{W:e,H:t}=this;this.X.width=e,this.X.height=t},l.clear){case"CR":this.clearBack=()=>{const{W:e,H:t}=this,{canvas:s,ctx:i}=Te({width:e,height:t});this.Y=s,this.YC=i};break;case"CL":this.clearBack=()=>{const{W:e,H:t}=this;this.YC.clearRect(0,0,e,t)};break;default:this.clearBack=()=>{const{W:e,H:t,Y:s}=this;s.width=e,s.height=t}}switch(l.render){case"DR":this.stick=()=>{const{W:e,H:t}=this;this.XC.drawImage(this.Y,0,0,e,t)};break;case"PU":this.stick=()=>{const{W:e,H:t}=this,s=this.YC.getImageData(0,0,e,t);this.XC.putImageData(s,0,0,0,0,e,t)}}}setRect(e,t){const{X:s,Y:i}=this;s.width=i.width=this.W=e,s.height=i.height=this.H=t}loadImage(e,t){let s=[];return ye.clearTime("load image"),ye.time("load image",(()=>{this.materials.clear();for(let i in e){const r=De(this,e[i],i,t).then((e=>{this.materials.set(i,e)}));s.push(r)}})),Promise.all(s)}createImage(){return de===fe?new Image:this.X.createImage()}flush(e){(de===fe?pe:this.X).requestAnimationFrame(e)}clearFront=Ee;clearBack=Ee;draw(e,t,s,i){!function(e,t,s,i,r,a){const{sprites:n,replaceElements:o,dynamicElements:l}=s;for(let s=r;s<a;s++){const r=n[s],{imageKey:a}=r;Re(e,r,i,t.get(a),o[a],l[a])}}(this.YC,this.materials,e,t,s,i)}stick=Ee;destroy(){this.clearFront(),this.clearBack(),this.materials.clear(),this.X=this.XC=this.Y=this.YC=null}}class $e{brush;isRunning=!1;startTime=0;startValue=0;endValue=0;duration=0;loopStart=0;loopDuration=0;fillRule=0;onStart=Ee;onUpdate=Ee;onEnd=Ee;constructor(e){this.brush=e}setRange(e,t){this.startValue=e,this.endValue=t}setConfig(e,t,s,i){this.duration=e,this.loopStart=t,this.fillRule=i,this.loopDuration=t+(e-t)*s}start(){this.isRunning=!0,this.startTime=Pe(),this.onStart(),this.doFrame()}stop(){this.isRunning=!1}doFrame(){this.isRunning&&(this.doDeltaTime(Pe()-this.startTime),this.isRunning&&this.brush.flush((()=>this.doFrame())))}doDeltaTime(e){const{duration:t,loopStart:s,loopDuration:i,startValue:r,endValue:a,fillRule:n}=this;let o;e>=i?(o=n?0:1,this.isRunning=!1):o=e<=t?e/t:((e-s)%(t-s)+s)/t,this.onUpdate((a-r)*o+r|0,o),this.isRunning||this.onEnd()}}class He{currFrame=0;entity=void 0;config=Object.create({loop:0,fillMode:"forwards",playMode:"forwards",startFrame:0,endFrame:0,loopStartFrame:0});brush=new We;animator=null;head=0;tail=0;async setConfig(e,t){let s;s="string"==typeof e?{container:e}:e;const{startFrame:i,endFrame:r}=s;if(void 0!==i&&void 0!==r&&i>r)throw new Error("StartFrame should greater than EndFrame");Object.assign(this.config,{loop:s.loop??0,fillMode:s.fillMode??"forwards",playMode:s.playMode??"forwards",startFrame:i??0,endFrame:r??0,loopStartFrame:s.loopStartFrame??0}),await this.brush.register(s.container,s.secondary,t),this.animator=new $e(this.brush),this.animator.onEnd=()=>this.onEnd?.()}mount(e){if(!e)throw new Error("videoEntity undefined");this.animator.stop(),this.currFrame=0,this.entity=e,ye.clearTime("render"),ye.clearTime("draw"),ye.unlockTime("draw");const{images:t,filename:s,size:i}=e;return this.brush.setRect(i.width,i.height),this.brush.clearBack(),this.brush.loadImage(t,s)}onStart;onResume;onPause;onStop;onProcess;onEnd;start(){this.brush.clearFront(),this.startAnimation(),this.onStart?.()}resume(){this.startAnimation(),this.onResume?.()}pause(){this.animator.stop(),this.onPause?.()}stop(){this.animator.stop(),this.currFrame=0,this.brush.clearFront(),this.onStop?.()}clear(){this.brush.clearFront()}destroy(){this.animator.stop(),this.brush.destroy(),this.animator=null,this.entity=void 0}startAnimation(){const{playMode:e,loopStartFrame:t,startFrame:s,endFrame:i,fillMode:r,loop:a}=this.config;let{frames:n,fps:o,sprites:l}=this.entity;const c=l.length,h=n-1,u=s>0?s:0,f=i>0?i:h;this.currFrame===h&&(this.currFrame=u),"forwards"===e?this.animator.setRange(u,f):this.animator.setRange(f,u),i>0&&i>s?n=i-s:i<=0&&s>0&&(n-=s);const d=1e3/o;this.animator.setConfig(n*d,t>s?(t-s)*d:0,a<=0?1/0:a,+("backwards"===r)),this.animator.onUpdate=(e,t)=>{const s=this.currFrame===e;if(this.tail!==c){const e=s?Math.min(c*t*1.2+3,c)|0:c;e>this.tail&&(this.head=this.tail,this.tail=e,ye.time("draw",(()=>{this.brush.draw(this.entity,this.currFrame,this.head,this.tail)})))}s||(this.brush.clearFront(),ye.time("render",(()=>this.brush.stick()),null,(e=>{ye.log("render count",e),ye.line(20),e<ye.count?ye.clearTime("draw"):ye.lockTime("draw")})),this.brush.clearBack(),this.onProcess?.(),this.currFrame=e,this.tail=0)},this.animator.start()}}export{We as Brush,ke as Parser,He as Player,De as loadImage};
//# sourceMappingURL=index.js.map
