function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e,r;var s,n=t(function(){if(r)return e;function t(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),s=128===r[3];function n(t,s,n){e[0]=t,s[n]=r[0],s[n+1]=r[1],s[n+2]=r[2],s[n+3]=r[3]}function i(t,s,n){e[0]=t,s[n]=r[3],s[n+1]=r[2],s[n+2]=r[1],s[n+3]=r[0]}function o(t,s){return r[0]=t[s],r[1]=t[s+1],r[2]=t[s+2],r[3]=t[s+3],e[0]}function l(t,s){return r[3]=t[s],r[2]=t[s+1],r[1]=t[s+2],r[0]=t[s+3],e[0]}t.writeFloatLE=s?n:i,t.writeFloatBE=s?i:n,t.readFloatLE=s?o:l,t.readFloatBE=s?l:o}():function(){function e(t,e,r,s){var n=e<0?1:0;if(n&&(e=-e),0===e)t(1/e>0?0:2147483648,r,s);else if(isNaN(e))t(2143289344,r,s);else if(e>34028234663852886e22)t((n<<31|2139095040)>>>0,r,s);else if(e<11754943508222875e-54)t((n<<31|Math.round(e/1401298464324817e-60))>>>0,r,s);else{var i=Math.floor(Math.log(e)/Math.LN2);t((n<<31|i+127<<23|8388607&Math.round(e*Math.pow(2,-i)*8388608))>>>0,r,s)}}function r(t,e,r){var s=t(e,r),n=2*(s>>31)+1,i=s>>>23&255,o=8388607&s;return 255===i?o?NaN:n*(1/0):0===i?1401298464324817e-60*n*o:n*Math.pow(2,i-150)*(o+8388608)}t.writeFloatLE=e.bind(null,s),t.writeFloatBE=e.bind(null,n),t.readFloatLE=r.bind(null,i),t.readFloatBE=r.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),s=128===r[7];function n(t,s,n){e[0]=t,s[n]=r[0],s[n+1]=r[1],s[n+2]=r[2],s[n+3]=r[3],s[n+4]=r[4],s[n+5]=r[5],s[n+6]=r[6],s[n+7]=r[7]}function i(t,s,n){e[0]=t,s[n]=r[7],s[n+1]=r[6],s[n+2]=r[5],s[n+3]=r[4],s[n+4]=r[3],s[n+5]=r[2],s[n+6]=r[1],s[n+7]=r[0]}function o(t,s){return r[0]=t[s],r[1]=t[s+1],r[2]=t[s+2],r[3]=t[s+3],r[4]=t[s+4],r[5]=t[s+5],r[6]=t[s+6],r[7]=t[s+7],e[0]}function l(t,s){return r[7]=t[s],r[6]=t[s+1],r[5]=t[s+2],r[4]=t[s+3],r[3]=t[s+4],r[2]=t[s+5],r[1]=t[s+6],r[0]=t[s+7],e[0]}t.writeDoubleLE=s?n:i,t.writeDoubleBE=s?i:n,t.readDoubleLE=s?o:l,t.readDoubleBE=s?l:o}():function(){function e(t,e,r,s,n,i){var o=s<0?1:0;if(o&&(s=-s),0===s)t(0,n,i+e),t(1/s>0?0:2147483648,n,i+r);else if(isNaN(s))t(0,n,i+e),t(2146959360,n,i+r);else if(s>17976931348623157e292)t(0,n,i+e),t((o<<31|2146435072)>>>0,n,i+r);else{var l;if(s<22250738585072014e-324)t((l=s/5e-324)>>>0,n,i+e),t((o<<31|l/4294967296)>>>0,n,i+r);else{var a=Math.floor(Math.log(s)/Math.LN2);1024===a&&(a=1023),t(4503599627370496*(l=s*Math.pow(2,-a))>>>0,n,i+e),t((o<<31|a+1023<<20|1048576*l&1048575)>>>0,n,i+r)}}}function r(t,e,r,s,n){var i=t(s,n+e),o=t(s,n+r),l=2*(o>>31)+1,a=o>>>20&2047,h=4294967296*(1048575&o)+i;return 2047===a?h?NaN:l*(1/0):0===a?5e-324*l*h:l*Math.pow(2,a-1075)*(h+4503599627370496)}t.writeDoubleLE=e.bind(null,s,0,4),t.writeDoubleBE=e.bind(null,n,4,0),t.readDoubleLE=r.bind(null,i,0,4),t.readDoubleBE=r.bind(null,o,4,0)}(),t}function s(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function n(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=255&t}function i(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function o(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}return r=1,e=t(t)}()),i={};var o=(s||(s=1,function(){var t=i;t.length=function(t){for(var e=0,r=0,s=0;s<t.length;++s)(r=t.charCodeAt(s))<128?e+=1:r<2048?e+=2:55296==(64512&r)&&56320==(64512&t.charCodeAt(s+1))?(++s,e+=4):e+=3;return e},t.read=function(t,e,r){if(r-e<1)return"";for(var s,n=null,i=[],o=0;e<r;)(s=t[e++])<128?i[o++]=s:s>191&&s<224?i[o++]=(31&s)<<6|63&t[e++]:s>239&&s<365?(s=((7&s)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,i[o++]=55296+(s>>10),i[o++]=56320+(1023&s)):i[o++]=(15&s)<<12|(63&t[e++])<<6|63&t[e++],o>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,i)),o=0);return n?(o&&n.push(String.fromCharCode.apply(String,i.slice(0,o))),n.join("")):String.fromCharCode.apply(String,i.slice(0,o))},t.write=function(t,e,r){for(var s,n,i=r,o=0;o<t.length;++o)(s=t.charCodeAt(o))<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=63&s|128):55296==(64512&s)&&56320==(64512&(n=t.charCodeAt(o+1)))?(s=65536+((1023&s)<<10)+(1023&n),++o,e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=63&s|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=63&s|128);return r-i}}()),i),l=t(o);class a{static create(t){if(t instanceof a)return t;if(t instanceof Uint8Array)return new a(t);throw Error("illegal buffer")}buf;pos;len;constructor(t){this.buf=t,this.pos=0,this.len=t.length}slice(t,e,r){return t.subarray(e,r)}indexOutOfRange(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}uint32(){let t=4294967295;if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,this.indexOutOfRange(this,10);return t}int32(){return 0|this.uint32()}float(){if(this.pos+4>this.len)throw this.indexOutOfRange(this,4);const t=n.readFloatLE(this.buf,this.pos);return this.pos+=4,t}bytes(){const t=this.uint32(),e=this.pos,r=this.pos+t;if(r>this.len)throw this.indexOutOfRange(this,t);return this.pos+=t,e==r?new Uint8Array(0):this.slice(this.buf,e,r)}string(){const t=this.bytes();return l.read(t,0,t.length)}skip(t){if("number"==typeof t){if(this.pos+t>this.len)throw this.indexOutOfRange(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw this.indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this}skipType(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this}}class h{static decode(t,e){t=a.create(t);const r=null==e?t.len:t.pos+e,s=new h;for(;t.pos<r;){const e=t.uint32();switch(e>>>3){case 1:s.x=t.float();break;case 2:s.y=t.float();break;case 3:s.width=t.float();break;case 4:s.height=t.float();break;default:t.skipType(7&e)}}return s}x=0;y=0;width=0;height=0;constructor(t){t&&(null!=t.x&&(this.x=t.x),null!=t.y&&(this.y=t.y),null!=t.width&&(this.width=t.width),null!=t.height&&(this.height=t.height))}}class u{static decode(t,e){t=a.create(t);let r=null==e?t.len:t.pos+e,s=new u;for(;t.pos<r;){let e=t.uint32();switch(e>>>3){case 1:s.a=t.float();break;case 2:s.b=t.float();break;case 3:s.c=t.float();break;case 4:s.d=t.float();break;case 5:s.tx=t.float();break;case 6:s.ty=t.float();break;default:t.skipType(7&e)}}return s}a=0;b=0;c=0;d=0;tx=0;ty=0;constructor(t){t&&(null!=t.a&&(this.a=t.a),null!=t.b&&(this.b=t.b),null!=t.c&&(this.c=t.c),null!=t.d&&(this.d=t.d),null!=t.tx&&(this.tx=t.tx),null!=t.ty&&(this.ty=t.ty))}}class c{static decode(t,e){t=a.create(t);const r=null==e?t.len:t.pos+e,s=new c;for(;t.pos<r;){const e=t.uint32();if(e>>>3==1)s.d=t.string();else t.skipType(7&e)}return s}d="";constructor(t){t&&null!=t.d&&(this.d=t.d)}}class f{static decode(t,e){t=a.create(t);const r=null==e?t.len:t.pos+e,s=new f;for(;t.pos<r;){const e=t.uint32();switch(e>>>3){case 1:s.x=t.float();break;case 2:s.y=t.float();break;case 3:s.width=t.float();break;case 4:s.height=t.float();break;case 5:s.cornerRadius=t.float();break;default:t.skipType(7&e)}}return s}x=0;y=0;width=0;height=0;cornerRadius=0;constructor(t){t&&(null!=t.x&&(this.x=t.x),null!=t.y&&(this.y=t.y),null!=t.width&&(this.width=t.width),null!=t.height&&(this.height=t.height),null!=t.cornerRadius&&(this.cornerRadius=t.cornerRadius))}}class d{static decode(t,e){t=a.create(t);const r=null==e?t.len:t.pos+e,s=new d;for(;t.pos<r;){const e=t.uint32();switch(e>>>3){case 1:s.x=t.float();break;case 2:s.y=t.float();break;case 3:s.radiusX=t.float();break;case 4:s.radiusY=t.float();break;default:t.skipType(7&e)}}return s}x=0;y=0;radiusX=0;radiusY=0;constructor(t){t&&(null!=t.x&&(this.x=t.x),null!=t.y&&(this.y=t.y),null!=t.radiusX&&(this.radiusX=t.radiusX),null!=t.radiusY&&(this.radiusY=t.radiusY))}}class p{static decode(t,e){t=a.create(t);const r=null==e?t.len:t.pos+e,s=new p;for(;t.pos<r;){const e=t.uint32();switch(e>>>3){case 1:s.r=t.float();break;case 2:s.g=t.float();break;case 3:s.b=t.float();break;case 4:s.a=t.float();break;default:t.skipType(7&e)}}return s}r=0;g=0;b=0;a=0;constructor(t){t&&(null!=t.r&&(this.r=t.r),null!=t.g&&(this.g=t.g),null!=t.b&&(this.b=t.b),null!=t.a&&(this.a=t.a))}}class g{static decode(t,e){t=a.create(t);const r=null==e?t.len:t.pos+e,s=new g;for(;t.pos<r;){const e=t.uint32();switch(e>>>3){case 1:s.fill=p.decode(t,t.uint32());break;case 2:s.stroke=p.decode(t,t.uint32());break;case 3:s.strokeWidth=t.float();break;case 4:s.lineCap=t.int32();break;case 5:s.lineJoin=t.int32();break;case 6:s.miterLimit=t.float();break;case 7:s.lineDashI=t.float();break;case 8:s.lineDashII=t.float();break;case 9:s.lineDashIII=t.float();break;default:t.skipType(7&e)}}return s}fill=null;stroke=null;strokeWidth=0;lineCap=0;lineJoin=0;miterLimit=0;lineDashI=0;lineDashII=0;lineDashIII=0;constructor(t){t&&(null!=t.fill&&(this.fill=t.fill),null!=t.lineCap&&(this.lineCap=t.lineCap),null!=t.lineDashI&&(this.lineDashI=t.lineDashI),null!=t.lineDashII&&(this.lineDashII=t.lineDashII),null!=t.lineDashIII&&(this.lineDashIII=t.lineDashIII),null!=t.lineJoin&&(this.lineJoin=t.lineJoin),null!=t.miterLimit&&(this.miterLimit=t.miterLimit),null!=t.stroke&&(this.stroke=t.stroke),null!=t.strokeWidth&&(this.strokeWidth=t.strokeWidth))}}class b{static decode(t,e){t=a.create(t);const r=null==e?t.len:t.pos+e,s=new b;for(;t.pos<r;){let e=t.uint32();switch(e>>>3){case 1:s.type=t.int32();break;case 2:s.shape=c.decode(t,t.uint32());break;case 3:s.rect=f.decode(t,t.uint32());break;case 4:s.ellipse=d.decode(t,t.uint32());break;case 10:s.styles=g.decode(t,t.uint32());break;case 11:s.transform=u.decode(t,t.uint32());break;default:t.skipType(7&e)}}return s}type=0;shape=null;rect=null;ellipse=null;styles=null;transform=null;$oneOfFields=["shape","rect","ellipse"];$fieldMap={};get args(){const t=Object.keys(this);for(let e=t.length-1;e>-1;--e){const r=t[e],s=this[r];if(1==this.$fieldMap[r]&&null!=s)return r}return""}set args(t){for(var e=0;e<this.$oneOfFields.length;++e){const r=this.$oneOfFields[e];r!=t&&delete this[r]}}constructor(t){t&&(null!=t.type&&(this.type=t.type),null!=t.ellipse&&(this.ellipse=t.ellipse),null!=t.rect&&(this.rect=t.rect),null!=t.shape&&(this.shape=t.shape),null!=t.styles&&(this.styles=t.styles),null!=t.transform&&(this.transform=t.transform));for(var e=0;e<this.$oneOfFields.length;++e)this.$fieldMap[this.$oneOfFields[e]]=1}}class w{static decode(t,e){t=a.create(t);const r=null==e?t.len:t.pos+e,s=new w;for(;t.pos<r;){const e=t.uint32();switch(e>>>3){case 1:s.alpha=t.float();break;case 2:s.layout=h.decode(t,t.uint32());break;case 3:s.transform=u.decode(t,t.uint32());break;case 4:s.clipPath=t.string();break;case 5:s.shapes&&s.shapes.length||(s.shapes=[]),s.shapes.push(b.decode(t,t.uint32()));break;default:t.skipType(7&e)}}return s}shapes=[];alpha=0;layout=null;transform=null;clipPath="";constructor(t){t&&(null!=t.alpha&&(this.alpha=t.alpha),null!=t.clipPath&&(this.clipPath=t.clipPath),null!=t.layout&&(this.layout=t.layout),null!=t.shapes&&(this.shapes=t.shapes),null!=t.transform&&(this.transform=t.transform))}}class y{static decode(t,e){t=a.create(t);const r=null==e?t.len:t.pos+e,s=new y;for(;t.pos<r;){const e=t.uint32();switch(e>>>3){case 1:s.imageKey=t.string();break;case 2:s.frames&&s.frames.length||(s.frames=[]),s.frames.push(w.decode(t,t.uint32()));break;case 3:s.matteKey=t.string();break;default:t.skipType(7&e)}}return s}frames=[];imageKey="";matteKey="";constructor(t){t&&(null!=t.frames&&(this.frames=t.frames),null!=t.imageKey&&(this.imageKey=t.imageKey),null!=t.matteKey&&(this.matteKey=t.matteKey))}}class m{static decode(t,e){t=a.create(t);let r=null==e?t.len:t.pos+e,s=new m;for(;t.pos<r;){let e=t.uint32();switch(e>>>3){case 1:s.viewBoxWidth=t.float();break;case 2:s.viewBoxHeight=t.float();break;case 3:s.fps=t.int32();break;case 4:s.frames=t.int32();break;default:t.skipType(7&e)}}return s}viewBoxWidth=0;viewBoxHeight=0;fps=0;frames=0;constructor(t){t&&(null!=t.viewBoxWidth&&(this.viewBoxWidth=t.viewBoxWidth),null!=t.viewBoxHeight&&(this.viewBoxHeight=t.viewBoxHeight),null!=t.fps&&(this.fps=t.fps),null!=t.frames&&(this.frames=t.frames))}}const k=Object.freeze({});class B{static decode(t,e){t=a.create(t);const r=null==e?t.len:t.pos+e,s=new B;let n,i;for(;t.pos<r;){const e=t.uint32();switch(e>>>3){case 1:s.version=t.string();break;case 2:s.params=m.decode(t,t.uint32());break;case 3:{s.images==k&&(s.images={});const e=t.uint32()+t.pos;for(n="",i=[];t.pos<e;){let e=t.uint32();switch(e>>>3){case 1:n=t.string();break;case 2:i=t.bytes();break;default:t.skipType(7&e)}}s.images[n]=i;break}case 4:s.sprites&&s.sprites.length||(s.sprites=[]),s.sprites.push(y.decode(t,t.uint32()));break;default:t.skipType(7&e)}}return s}version="";params=null;images=k;sprites=[];constructor(t){t&&(null!=t.version&&(this.version=t.version),null!=t.images&&(this.images=t.images),null!=t.params&&(this.params=t.params),null!=t.sprites&&(this.sprites=t.sprites))}}class E{buffer=[];lengthInBits=0;getAt(t){const e=~~(t/8);return 1==(this.buffer[e]>>>7-t%8&1)}put(t,e){for(let r=0;r<e;r++)this.putBit(1==(t>>>e-r-1&1))}putBit(t){const{lengthInBits:e,buffer:r}=this,s=~~(e/8);r.length<=s&&r.push(0),t&&(r[s]|=128>>>e%8),this.lengthInBits+=1}}const C={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},A={L:1,M:0,Q:3,H:2},T={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};class D{bytes;constructor(t){let e=[];for(let r=0;r<t.length;r++){const s=[],n=t.charCodeAt(r);n>65536?(s[0]=240|(1835008&n)>>>18,s[1]=128|(258048&n)>>>12,s[2]=128|(4032&n)>>>6,s[3]=128|63&n):n>2048?(s[0]=224|(61440&n)>>>12,s[1]=128|(4032&n)>>>6,s[2]=128|63&n):n>128?(s[0]=192|(1984&n)>>>6,s[1]=128|63&n):s[0]=n,e.push(s)}this.bytes=[].concat(...e);const{bytes:r}=this;r.length!=t.length&&(r.unshift(191),r.unshift(187),r.unshift(239))}get mode(){return C.MODE_8BIT_BYTE}get length(){return this.bytes.length}write(t){const{bytes:e}=this;for(let r=0;r<e.length;r++)t.put(e[r],8)}}const I=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];class x{getRSBlockTable(t,e){const{L:r,M:s,Q:n,H:i}=A,o=4*(t-1);switch(e){case r:return I[o+0];case s:return I[o+1];case n:return I[o+2];case i:return I[o+3]}}getRSBlocks(t,e){const r=this.getRSBlockTable(t,e);if(void 0===r)throw new Error(`bad rs block @ typeNumber:${t}/errorCorrectLevel: ${e}`);const s=r.length/3,n=[];for(let t=0;t<s;t++){const e=r[3*t],s=r[3*t+1],i=r[3*t+2];for(let t=0;t<e;t++)n.push({totalCount:s,dataCount:i})}return n}}class P{out;bit=0;bitlen=0;constructor(t){this.out=t}write(t,e){if(t>>>e!=0)throw new Error("length over");for(;this.bitlen+e>=8;)this.out.writeByte(255&(t<<this.bitlen|this.bit)),e-=8-this.bitlen,t>>>=8-this.bitlen,this.bit=this.bitlen=0;this.bit=t<<this.bitlen|this.bit,this.bitlen+=e}flush(){this.bitlen>0&&this.out.writeByte(this.bit)}}class v{bytes=[];writeByte(t){this.bytes.push(255&t)}writeBytes(t,e,r){const s=e||0,n=r||t.length;for(let e=0;e<n;e++)this.writeByte(t[e+s])}writeShort(t){this.writeByte(t),this.writeByte(t>>>8)}writeString(t){for(let e=0;e<t.length;e++)this.writeByte(t.charCodeAt(e))}toByteArray(){return this.bytes}toString(){return`[${this.bytes.join(",")}]`}}class N{map=new Map;get size(){return this.map.size}add(t){if(this.map.has(t))throw new Error(`dup key: ${t}`);this.map.set(t,this.map.size)}indexOf(t){return this.map.get(t)??-1}contains(t){return this.map.has(t)}}class ${buffer=0;buflen=0;length=0;base64="";encode(t){if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47;throw new Error(`n: ${t}`)}writeEncoded(t){this.base64+=String.fromCharCode(this.encode(63&t))}writeByte(t){for(this.buffer=this.buffer<<8|255&t,this.buflen+=8,this.length+=1;this.buflen>=6;)this.writeEncoded(this.buffer>>>this.buflen-6),this.buflen-=6}flush(){if(this.buflen>0&&(this.writeEncoded(this.buflen<<6-this.buflen),this.buffer=0,this.buflen=0),this.length%3!=0){const t=3-this.length%3;for(let e=0;e<t;e++)this.base64+="="}}toString(){return this.base64}}class M{width;height;signature="GIF87a";data;constructor(t,e){this.width=t,this.height=e,this.data=new Array(t*e)}getLZWRaster(t){const e=1<<t,r=1+(1<<t);let s=t+1;const n=new N,i=t=>String.fromCharCode(t);for(let t=0;t<e;t+=1)n.add(i(t));n.add(i(e)),n.add(i(r));const o=new v,l=new P(o);l.write(e,s);let a=0,h=i(this.data[a++]);for(;a<this.data.length;){const t=i(this.data[a++]);n.contains(h+t)?h+=t:(l.write(n.indexOf(h),s),n.size<4095&&(n.size==1<<s&&s++,n.add(h+t)),h=t)}return l.write(n.indexOf(h),s),l.write(r,s),l.flush(),o.toByteArray()}setPixel(t,e,r){this.data[e*this.width+t]=r}write(t,e="#000000",r="#ffffff"){const{width:s,height:n,signature:i}=this;t.writeString(i),t.writeShort(s),t.writeShort(n),t.writeByte(128),t.writeByte(0),t.writeByte(0);const o=e.split("");t.writeByte(parseInt(`${o[1]}${o[2]}`,16)),t.writeByte(parseInt(`${o[3]}${o[4]}`,16)),t.writeByte(parseInt(`${o[5]}${o[6]}`,16));const l=r.split("");t.writeByte(parseInt(`${l[1]}${l[2]}`,16)),t.writeByte(parseInt(`${l[3]}${l[4]}`,16)),t.writeByte(parseInt(`${l[5]}${l[6]}`,16)),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(s),t.writeShort(n),t.writeByte(0);const a=this.getLZWRaster(2);t.writeByte(2);let h=0;for(;a.length-h>255;)t.writeByte(255),t.writeBytes(a,h,255),h+=255;const u=a.length-h;t.writeByte(u),t.writeBytes(a,h,u),t.writeByte(0),t.writeString(";")}}function L(t,e,r,s,n){const i=new M(t,e);for(let s=0;s<e;s++)for(let e=0;e<t;e++)i.setPixel(e,s,r(e,s));const o=new v;i.write(o,s,n);const l=new $,a=o.toByteArray();for(let t=0;t<a.length;t++)l.writeByte(a[t]);return l.flush(),`data:image/gif;base64,${l}`}class R{data;pos=0;buffer=0;buflen=0;constructor(t){this.data=t}decode(t){if(t>=65&&t<=90)return t-65;if(t>=97&&t<=122)return t-97+26;if(t>=48&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw new Error(`c: ${t}`)}read(){const{buffer:t,buflen:e,pos:r,data:s}=this;for(;e<8;){if(r>=s.length){if(0==e)return-1;throw new Error(`unexpected end of file./${e}`)}const n=s.charAt(r);if(this.pos++,"="==n)return this.buflen=0,-1;n.match(/^\s$/)||(this.buffer=t<<6|this.decode(n.charCodeAt(0)),this.buflen+=6)}const n=t>>>e-8&255;return this.buflen-=8,n}}const O=new Array(256),S=new Array(256);for(let t=0;t<8;t++)O[t]=1<<t;for(let t=8;t<256;t++)O[t]=O[t-4]^O[t-5]^O[t-6]^O[t-8];for(let t=0;t<255;t++)S[O[t]]=t;const F={glog(t){if(t<1)throw new Error(`glog(${t})`);return S[t]},gexp(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return O[t]}};class _{num;constructor(t,e){const{length:r}=t;if(void 0===r)throw new Error(`${r}/${e}`);let s=0;for(;s<r&&0==t[s];)s++;const n=r-s;this.num=new Array(n+e);for(let e=0;e<n;e++)this.num[e]=t[e+s]}get length(){return this.num.length}getAt(t){return this.num[t]}multiply(t){const e=new Array(this.length+t.length-1);for(let r=0;r<this.length;r++)for(let s=0;s<t.length;s++)e[r+s]^=F.gexp(F.glog(this.getAt(r))+F.glog(t.getAt(s)));return new _(e,0)}mod(t){if(this.length-t.length<0)return this;const e=F.glog(this.getAt(0))-F.glog(t.getAt(0)),r=new Array(this.length);for(var s=0;s<this.length;s++)r[s]=this.getAt(s);for(s=0;s<t.length;s++)r[s]^=F.gexp(F.glog(t.getAt(s))+e);return new _(r,0).mod(t)}}const z=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],H={gen(t){let e=0,r=t;for(;0!=r;)e++,r>>>=1;return e}},K=H.gen(1335),W=H.gen(7973),U={getBCHTypeInfo(t){let e=t<<10;for(;H.gen(e)-K>=0;)e^=1335<<H.gen(e)-K;return 21522^(t<<10|e)},getBCHTypeNumber(t){let e=t<<12;for(;H.gen(e)-W>=0;)e^=7973<<H.gen(e)-W;return t<<12|e},getPatternPosition:t=>z[t-1],getMaskFunction(t){const{PATTERN000:e,PATTERN001:r,PATTERN010:s,PATTERN011:n,PATTERN100:i,PATTERN101:o,PATTERN110:l,PATTERN111:a}=T;switch(t){case e:return(t,e)=>(t+e)%2==0;case r:return t=>t%2==0;case s:return(t,e)=>e%3==0;case n:return(t,e)=>(t+e)%3==0;case i:return(t,e)=>(~~(t/2)+~~(e/3))%2==0;case o:return(t,e)=>t*e%2+t*e%3==0;case l:return(t,e)=>(t*e%2+t*e%3)%2==0;case a:return(t,e)=>(t*e%3+(t+e)%2)%2==0;default:throw new Error(`bad maskPattern: ${t}`)}},getErrorCorrectPolynomial(t){let e=new _([1],0);for(let r=0;r<t;r++)e=e.multiply(new _([1,F.gexp(r)],0));return e},getLengthInBits(t,e){const{MODE_NUMBER:r,MODE_ALPHA_NUM:s,MODE_8BIT_BYTE:n,MODE_KANJI:i}=C;if(e<1||e>40)throw new Error(`type: ${e}`);if(e>=1&&e<10)switch(t){case r:return 10;case s:return 9;case n:case i:return 8}if(e<27)switch(t){case r:return 12;case s:return 11;case n:return 16;case i:return 10}if(e<=40)switch(t){case r:return 14;case s:return 13;case n:return 16;case i:return 12}throw new Error(`mode: ${t}`)},getLostPoint(t){const e=t.getModuleCount();let r=0;for(let s=0;s<e;s++)for(let n=0;n<e;n++){const i=t.isDark(s,n);let o=0;for(let r=-1;r<=1;r++){const l=s+r;if(!(l<0||e<=l))for(let s=-1;s<=1;s++){const a=n+s;a<0||e<=a||(0==r&&0==s||i==t.isDark(l,a)&&o++)}}o>5&&(r+=o+3-5)}for(let s=0;s<e-1;s++)for(let n=0;n<e-1;n++){let e=0;t.isDark(s,n)&&e++,t.isDark(s+1,n)&&e++,t.isDark(s,n+1)&&e++,t.isDark(s+1,n+1)&&e++,0!=e&&4!=e||(r+=3)}for(let s=0;s<e;s++)for(let n=0;n<e-6;n++)t.isDark(s,n)&&!t.isDark(s,n+1)&&t.isDark(s,n+2)&&t.isDark(s,n+3)&&t.isDark(s,n+4)&&!t.isDark(s,n+5)&&t.isDark(s,n+6)&&(r+=40);for(let s=0;s<e;s++)for(let n=0;n<e-6;n++)t.isDark(n,s)&&!t.isDark(n+1,s)&&t.isDark(n+2,s)&&t.isDark(n+3,s)&&t.isDark(n+4,s)&&!t.isDark(n+5,s)&&t.isDark(n+6,s)&&(r+=40);let s=0;for(let r=0;r<e;r++)for(let n=0;n<e;n++)t.isDark(n,r)&&s++;return r+10*(Math.abs(100*s/Math.pow(e,2)-50)/5)}};class Y{static stringToBytes(t){const e=[];for(let r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}static createStringToBytes(t,e){const r=(()=>{const r=new R(t),s=()=>{const t=r.read();if(-1==t)throw new Error("character defect!");return t},n={};let i=0;for(;;){const t=r.read();if(-1==t)break;const e=s(),o=s()<<8|s();n[String.fromCharCode(t<<8|e)]=o,i+=1}if(i!=e)throw new Error(`${i} != ${e}`);return n})(),s="?".charCodeAt(0);return t=>{const e=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)e.push(i);else{const i=r[t.charAt(n)];"number"==typeof i?(255&i)==i?e.push(i):(e.push(i>>>8),e.push(255&i)):e.push(s)}}return e}}typeNumber;errorCorrectLevel;modules=[];moduleCount=0;dataCache=null;dataList=[];constructor(t,e){this.typeNumber=t,this.errorCorrectLevel=A[e]}makeImpl(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=(t=>{const e=new Array(t);for(let r=0;r<t;r++){e[r]=new Array(t);for(let s=0;s<t;s++)e[r][s]=null}return e})(this.moduleCount);const r=this.moduleCount-7;this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(r,0),this.setupPositionProbePattern(0,r),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=this.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)}setupPositionProbePattern(t,e){const{modules:r,moduleCount:s}=this;for(let n=-1;n<=7;n++){const i=t+n;if(!(i<=-1||s<=i))for(let t=-1;t<=7;t++){const o=e+t;o<=-1||s<=o||(r[i][o]=n>=0&&n<=6&&(0==t||6==t)||t>=0&&t<=6&&(0==n||6==n)||n>=2&&n<=4&&t>=2&&t<=4)}}}setupPositionAdjustPattern(){const{typeNumber:t,modules:e}=this,r=U.getPatternPosition(t),{length:s}=r;for(let t=0;t<s;t++)for(let n=0;n<s;n++){const s=r[t],i=r[n];if(null==e[s][i])for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)e[s+t][i+r]=-2==t||2==t||-2==r||2==r||0==t&&0==r}}setupTimingPattern(){const{moduleCount:t,modules:e}=this,r=t-8;for(let t=8;t<r;t++)null==e[t][6]&&(e[t][6]=t%2==0);for(let t=8;t<r;t++)null==e[6][t]&&(e[6][t]=t%2==0)}setupTypeInfo(t,e){const{errorCorrectLevel:r,modules:s,moduleCount:n}=this,i=r<<3|e,o=U.getBCHTypeInfo(i);for(let e=0;e<15;e++){const r=!t&&1==(o>>e&1);e<6?s[e][8]=r:e<8?s[e+1][8]=r:s[n-15+e][8]=r}for(let e=0;e<15;e++){const r=!t&&1==(o>>e&1);e<8?s[8][n-e-1]=r:e<9?s[8][15-e]=r:s[8][15-e-1]=r}s[n-8][8]=!t}getBestMaskPattern(){let t=0,e=0;for(let r=0;r<8;r++){this.makeImpl(!0,r);const s=U.getLostPoint(this);(0==r||t>s)&&(t=s,e=r)}return e}setupTypeNumber(t){const{typeNumber:e,modules:r,moduleCount:s}=this,n=U.getBCHTypeNumber(e);for(let e=0;e<18;e++){const i=!t&&1==(n>>e&1);r[~~(e/3)][e%3+s-8-3]=i,r[e%3+s-8-3][~~(e/3)]=i}}createData(t,e,r){const s=(new x).getRSBlocks(t,e),n=new E;for(let e=0;e<r.length;e++){const s=r[e];n.put(s.mode,4),n.put(s.length,U.getLengthInBits(s.mode,t)),s.write(n)}let i=0;for(let t=0;t<s.length;t++)i+=s[t].dataCount;const o=8*i;if(n.lengthInBits>o)throw new Error(`code length overflow. (${n.lengthInBits} > ${o})`);for(n.lengthInBits+4<=o&&n.put(0,4);n.lengthInBits%8!=0;)n.putBit(!1);for(;!(n.lengthInBits>=o||(n.put(236,8),n.lengthInBits>=o));)n.put(17,8);return this.createBytes(n,s)}mapData(t,e){const{modules:r,moduleCount:s}=this,n=U.getMaskFunction(e);let i=-1,o=s-1,l=7,a=0;for(let e=o;e>0;e-=2)for(6==e&&(e-=1);;){for(let s=0;s<2;s++)if(null==r[o][e-s]){let i=!1;a<t.length&&(i=1==(t[a]>>>l&1)),n(o,e-s)&&(i=!i),r[o][e-s]=i,l--,-1==l&&(a++,l=7)}if(o+=i,o<0||s<=o){o-=i,i=-i;break}}}createBytes(t,e){const r=new Array(e.length),s=new Array(e.length);let n=0,i=0,o=0;for(let l=0;l<e.length;l++){const a=e[l].dataCount,h=e[l].totalCount-a;i=Math.max(i,a),o=Math.max(o,h),r[l]=new Array(a);for(let e=0;e<r[l].length;e++)r[l][e]=255&t.buffer[e+n];n+=a;const u=U.getErrorCorrectPolynomial(h),c=new _(r[l],u.length-1).mod(u);s[l]=new Array(u.length-1);for(let t=0;t<s[l].length;t++){const e=t+c.length-s[l].length;s[l][t]=e>=0?c.getAt(e):0}}let l=0;for(let t=0;t<e.length;t++)l+=e[t].totalCount;const a=new Array(l);let h=0;for(let t=0;t<i;t++)for(let s=0;s<e.length;s++)t<r[s].length&&(a[h]=r[s][t],h++);for(let t=0;t<o;t++)for(let r=0;r<e.length;r++)t<s[r].length&&(a[h]=s[r][t],h++);return a}isDark(t,e){const{moduleCount:r}=this;if(t<0||r<=t||e<0||r<=e)throw new Error(`${t}, ${e}`);return this.modules[t][e]}addData(t){this.dataList.push(new D(t)),this.dataCache=null}getModuleCount(){return this.moduleCount}make(){this.makeImpl(!1,this.getBestMaskPattern())}}function j(t={}){const e={...t};return{typeNumber:e.typeNumber??4,errorCorrectLevel:e.errorCorrectLevel??"M",size:e.size??500,black:e.black??"#000000",white:e.white??"#FFFFFF"}}const J=(t,e)=>({margin:~~(e-t*~~(e/t))/2,cellSize:~~(e/t)||2});function X(t,e){const{typeNumber:r,errorCorrectLevel:s,size:n,black:i,white:o}=j(e);let l;try{l=new Y(r,s),l.addData(t),l.make()}catch(e){if(r>=40)throw new Error("Text too long to encode");return arguments.callee(t,{size:n,errorCorrectLevel:s,typeNumber:r+1,black:i,white:o})}const a=l.getModuleCount(),{margin:h,cellSize:u}=J(a,n),c=a*u+h;return L(n,n,((t,e)=>{if(h<=t&&t<c&&h<=e&&e<c){const r=~~((t-h)/u),s=~~((e-h)/u);return l.isDark(s,r)?0:1}return 1}),i,o)}function Q(t,e){const{typeNumber:r,errorCorrectLevel:s,size:n,black:i,white:o}=j(e);let l;try{l=new Y(r,s),l.addData(t),l.make()}catch(e){if(r>=40)throw new Error("Text too long to encode");return arguments.callee(t,{size:n,errorCorrectLevel:s,typeNumber:r+1,black:i,white:o})}const a=l.getModuleCount(),{margin:h,cellSize:u}=J(a,n),c="border-width: 0px; border-style: none; border-collapse: collapse; padding: 0px;";let f=`<table style="${c} margin: ${h}px;"><tbody>`;for(let t=0;t<a;t++){f+="<tr>";for(let e=0;e<a;e++)f+=`<td style="${c} margin: 0px; width: ${u}px; height: ${u}px; background-color: ${l.isDark(t,e)?"#000000":"#ffffff"};"/>`;f+="</tr>"}return f+"</tbody></table>"}export{M as GifImage,B as MovieEntity,Y as QRCode,L as createGifTag,X as createQRCodeToGIF,Q as createQRCodeToHTML};
//# sourceMappingURL=index.js.map
